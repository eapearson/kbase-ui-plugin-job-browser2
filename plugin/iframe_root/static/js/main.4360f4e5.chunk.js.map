{"version":3,"sources":["../../../kbase-ui-lib/lib/windowChannel.js","../../../kbase-ui-lib/lib/comm/DynamicServiceClient.js","../../../kbase-ui-lib/lib/coreServices/ServiceWizard.js","../../../kbase-ui-lib/lib/comm/Cache.js","../../../kbase-ui-lib/lib/coreServices/NarrativeJobService.js","../../../kbase-ui-lib/lib/coreServices/Catalog.js","../../../kbase-ui-lib/lib/time.js","../../../kbase-ui-lib/lib/Auth.js","redux/actions/index.ts","redux/reducers/myJobs.ts","redux/reducers/userJobs.ts","redux/reducers/app.ts","redux/reducers/publicAppStats.ts","redux/reducers/userRunSummary.ts","redux/store.ts","redux/reducers/index.ts","components/JobStatus.tsx","components/JobLog/view.tsx","components/FlexTabs.tsx","components/JobInfo.tsx","components/JobDetail/view.tsx","lib/MetricsServiceClient.ts","redux/actions/utils.ts","components/JobDetail/state.tsx","components/JobDetail/index.ts","lib/Poller.ts","lib/PubSub.ts","components/Monitor.tsx","components/UserJobs/view.tsx","lib/CancelableRequest.ts","redux/actions/userJobs.ts","components/UserJobs/index.tsx","components/MyJobs/view.tsx","redux/actions/myJobs.ts","components/MyJobs/index.tsx","components/PublicAppStats/view.tsx","redux/actions/publicAppStats.ts","components/PublicAppStats/index.tsx","components/UserRunSummary/view.tsx","redux/actions/userRunSummary.ts","components/UserRunSummary/index.tsx","components/Main/view.tsx","components/Main/state.ts","redux/actions/app.ts","components/Main/index.tsx","components/ErrorBoundary.tsx","App.tsx","serviceWorker.ts","index.tsx","../../../kbase-ui-components/lib/redux/integration/actions.js","../../../kbase-ui-components/lib/redux/root/store.js","../../../kbase-ui-components/lib/redux/auth/store.js","../../../kbase-ui-lib/lib/comm/GenericClient.js","../../../kbase-ui-components/lib/redux/auth/actions.js","../../../kbase-ui-components/lib/redux/integration/store.js","../../../kbase-ui-components/lib/redux/develop/store.js","../../../kbase-ui-components/lib/redux/develop/actions.js","../../../kbase-ui-components/lib/index.js","../../../kbase-ui-components/lib/lib/IFrameIntegration.js","../../../kbase-ui-components/lib/components/Loader.js","../../../kbase-ui-components/lib/redux/root/actions.js","../../../kbase-ui-lib/lib/comm/ServiceClient.js","../../../kbase-ui-lib/lib/coreServices/auth.js","../../../kbase-ui-components/lib/components/AppBase.js","../../../kbase-ui-components/lib/components/Integration/index.js","../../../kbase-ui-components/lib/components/Integration/container.js","../../../kbase-ui-components/lib/components/Integration/view.js","../../../kbase-ui-components/lib/components/Root/index.js","../../../kbase-ui-components/lib/components/Root/view.js","../../../kbase-ui-components/lib/components/Develop/index.js","../../../kbase-ui-components/lib/components/Develop/view.js","../../../kbase-ui-lib/lib/index.js","../../../kbase-ui-components/lib/redux/store.js","../../../kbase-ui-components/lib/components/NiceTimeDuration.js","../../../kbase-ui-components/lib/components/NiceRelativeTime.js","../../../kbase-ui-components/lib/components/NiceElapsedTime.js","../../../kbase-ui-components/lib/components/AuthGate/index.js","../../../kbase-ui-components/lib/components/AuthGate/view.js","../../../kbase-ui-components/lib/redux/reducers.js","../../../kbase-ui-components/lib/redux/integration/reducers.js","../../../kbase-ui-components/lib/redux/auth/reducers.js","../../../kbase-ui-components/lib/redux/develop/reducers.js","../../../kbase-ui-components/lib/redux/root/reducers.js","../../../kbase-ui-components/lib/components/FlexTabs/index.js"],"names":["_slicedToArray","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","_classCallCheck","__importDefault","this","mod","__esModule","Object","defineProperty","exports","value","uuid_1","Listener","_ref","name","onSuccess","onError","WaitingListener","_Listener","params","_this","call","started","Date","timeout","Envelope","_ref2","from","to","id","default","v4","created","key","Message","_ref3","payload","envelope","toJSON","Channel","arguments","length","undefined","window","debug","document","Error","location","host","origin","debugLog","partnerId","awaitingResponse","Map","waitingListeners","listeners","lastId","sentCount","receivedCount","unwelcomeReceivedCount","unwelcomeReceivedCountThreshhold","unwelcomeReceiptWarning","unwelcomeReceiptWarningCount","currentListener","message","console","log","toChannelId","String","messageEvent","data","warn","has","response","get","delete","handler","ex","error","awaiting","forEach","listener","set","push","messageId","success","listen","postMessage","JSON","stringify","sendMessage","_this2","Promise","resolve","reject","sendRequest","_this3","setTimeout","now","getTime","_loop","_ref4","_Array$from","_i","_ref5","filter","elapsed","Array","entries","size","startMonitor","listenOnce","_this4","sent","received","_this5","receiveMessage","addEventListener","removeEventListener","_regeneratorRuntime","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","result","done","then","apply","ServiceWizard_1","GenericClient_1","moduleCache","itemLifetime","monitoringFrequency","waiterTimeout","waiterFrequency","DEFAULT_TIMEOUT","DynamicServiceClient","token","url","version","rpcContext","urlBaseOverride","authorization","constructor","module","moduleId","getModule","fetcher","getItemWithWait","mark","_callee","wrap","_context","prev","abrupt","getCached","client","ServiceWizardClient","getServiceStatus","module_name","stop","funcName","_callee2","_context2","lookupModule","AuthorizedGenericClient","callFunc","isString","x","p","Reflect","isGetServiceStatusResult","subType","every","arrayElement","isArray","isNumber","_ServiceClient_1$Auth","theResult","AuthorizedServiceClient","Cache","cache","cacheLifetime","isMonitoring","newCache","cacheRenewed","keys","item","isExpired","runMonitor","cacheItem","createdAt","cached","waiter","reserved","reserveAndFetch","catch","err","reserveItem","setItem","finally","reserveWaiter","NarrativeJobServiceClient","_GenericClient_1$Gene","param","_callee3","_context3","GenericClient","CatalogClient","t0","_ref6","TimeUnit","timeUnits","unit","MILLISECOND","long","short","single","SECOND","MINUTE","HOUR","DAY","makeUnit","format","label","niceRelativeTime","someDate","measure","measureAbs","options","nowDate","Math","round","elapsedAbs","abs","absoluteAfter","prefix","suffix","getFullYear","Intl","DateTimeFormat","month","day","year","niceDuration","minimized","temp","parts","map","unitValue","reverse","pop","keep","i","precision","join","niceElapsed","elapsedTime","timeLeftInUnits","index","__importStar","k","hasOwnProperty","AuthState","Cookies","auth_1","Auth","auth","status","UNAUTHENTICATED","userAuthorization","all","getTokenInfo","getMe","account","roles","desc","AUTHENTICATED","username","user","realname","display","ActionType","reducer","state","action","type","MY_JOBS_SEARCH_SUCCESS","views","myJobsView","searchState","SearchState","SEARCHED","rawJobs","jobs","jobsFetchedAt","searchExpression","myJobsSearchSuccess","MY_JOBS_SEARCH_START","SEARCHING","myJobsSearchStart","MY_JOBS_CANCEL_SUCCESS","myJobsCancelJobSuccess","USER_JOBS_SEARCH_START","userJobsView","userJobsSearchStart","USER_JOBS_SEARCH_SUCCESS","userJobsSearchSuccess","USER_JOBS_CANCEL_START","USER_JOBS_CANCEL_SUCCESS","cancelJobSuccess","MAIN_LOAD_SUCCESS","mainView","loadingState","ComponentLoadingState","SUCCESS","isAdmin","mainLoadSuccess","MAIN_UNLOAD","NONE","unload","PUBLIC_APP_STATS_SEARCH_START","publicAppStatsView","searchStart","PUBLIC_APP_STATS_SEARCH_SUCCESS","appStats","searchSuccess","JobStatus","USER_RUN_SUMMARY_SEARCH_START","userRunSummaryView","USER_RUN_SUMMARY_SEARCH_SUCCESS","userRunSummary","baseState","baseReducer","appReducer","myJobsReducer","userJobsReducer","publicAppStatsReducer","makeInitialStoreState","makeBaseStoreState","rawAppStats","query","jobColor","QUEUED","RUNNING","CANCELED_QUEUED","CANCELED_RUNNING","FINISHED","ERRORED_QUEUED","ERRORED_RUNNING","PlayState","JobStatusComponent","spin","jobStatusLabel","props","job","color","queuedAt","useClock","runAt","time","finishAt","timing","showTiming","renderTiming","renderTag","React","Component","Tabs","selectedTabIndex","tabIndex","setState","tabs","tab","classNames","className","onClick","selectTab","title","component","renderTabs","renderTabBody","JobLogs","playLogTimer","bodyRef","currentJobStatus","createRef","playState","isPaused","isActive","scrollToBottom","current","scrollTop","scrollHeight","lastJobStatus","style","textAlign","fontStyle","backgroundColor","data-end","lines","rows","line","rowStyle","isError","lineNumber","renderLastLine","ref","dataSource","rowKey","logLine","pagination","scroll","y","rowClassName","Column","dataIndex","width","render","numberDisplay","NumberFormat","useGrouping","sorter","a","b","row","contentType","content","Papa","unparse","delimiter","logToTSV","logToJSON","logToText","logToCSV","filename","downloadLink","createElement","downloadContent","Blob","href","URL","createObjectURL","download","visibility","body","appendChild","click","removeChild","revokeObjectURL","downloadLog","PLAYING","PAUSED","playTooltip","pauseTooltip","irrelevant","renderPlayPauseTooltips","icon","disabled","onPlayLog","bind","onPauseLog","menu","onMenuClick","Item","overlay","renderPlayPause","renderToolbar","renderJobLog","JobInfo","date","jobStatus","narrativeID","target","rel","narrativeTitle","appID","appTitle","renderSubmitted","renderQueuedFor","renderStateSpinner","renderRunFor","JobDetail","view","JobLogState","JOB_QUEUED","renderQueued","INITIAL_LOADING","renderLoading","ERROR","renderError","ACTIVE_LOADED","ACTIVE_LOADING","FINISHED_LOADED","flex","flexDirection","borderBottom","padding","overflowWrap","wordWrap","minHeight","overflowY","renderStatus","renderJobInfo","Fragment","renderMiniDetails","MetricsServiceClient","epoch_range","user_ids","job_id","serviceJobToUIJob","getJobStatus","wsid","parseInt","app_id","narrative_name","creation_time","queuedElapsed","clientGroups","client_groups","makeJobQueued","exec_start_time","runElapsed","makeJobRunning","finish_time","makeJobFinished","makeJobErroredQueued","makeJobErroredRunning","makeJobCanceledQueued","makeJobCanceledRunning","compareStatus","some","extractTimeRange","timeRange","kind","preset","endDate","hourInMilliseconds","getTimeRange","start","end","JobLogsState","metricsClient","serviceWizardURL","jobID","getJob","job_state","skipLines","njsClient","njsURL","getJobLogs","skip_lines","jobLog","is_error","poller","startingLines","getJobLog","newLog","startQueuedPolling","concat","loop","startRunningPolling","getInitialJobLog","connect","PollerState","app","config","services","NarrativeJobService","ServiceWizard","dispatch","ownProps","PubSubProxy","pubsub","subscriptions","messageID","on","off","PubSub","sendQueue","messageListeners","allListeners","queue","messageListener","sendMessages","processQueue","uuid","l","Poller","statusTimer","statusCount","watchStartAt","watcherTimer","waitTimer","pubsubProxy","STOPPED","clearInterval","clearTimeout","updateOnProgress","startWaiting","STARTED","pollWatch","stopPolling","POLLING","pollWatcherLoop","WAITING","watchInterval","pollWaitProgressLoop","setInterval","pollInterval","progressSteps","runPoll","onPoll","startWatching","is","pause","play","startListeningForPollingEvent","onProgress","stopListeningForPollingEvent","MONITORING_INTERVAL","MONITORING_FEEDBACK_STEPS","WATCH_INTERVAL","Monitor","monitoringTimer","monitoringStatusTimer","pollWatcherTimer","searchListenerID","pollWaitProgress","isPollingInitiated","pollingStartedAt","isPolling","isOpen","startOpen","progress","startPolling","startMonitoring","stopMonitoring","showControls","monitoringStatus","monitor","buttonType","opener","defaultChecked","checkedChildren","unCheckedChildren","onChange","onToggleOpen","percent","showInfo","strokeWidth","strokeColor","toggleMonitoring","fontSize","jobStatusFilterOptions","UserJobs","currentQuery","showDates","currentJobStatusFilter","defaultTimeRange","isFilterOpen","selectedJob","currentSort","doSearch","send","event","preventDefault","forceSearch","jobStatusFilter","jobStatuses","jobStatusFilterOptionsToJobStatus","sort","search","dateString","existingTimeRange","valueOf","Infinity","onConfirm","cancelJob","okText","cancelText","defaultValue","onChangeTimeRange","dropdownMatchSelectWidth","Option","showTime","allowClear","moment","onRangeFromChange","onRangeToChange","dateControls","renderTimeRangeControl","layout","onSubmit","placeholder","onChangeQuery","renderTimeRangeSelectionControl","htmlType","onToggleFilterArea","isPollerRunning","showMonitoringControls","filters","checked","fontWeight","marginRight","onClickAny","onClickActive","onClickFinished","Group","onFilterChange","filterRow","filterRowStyle","margin","renderFilterInput","renderSearchInput","footer","onCloseModal","fontFamily","onCancel","visible","field","direction","order","loading","position","showSizeChanger","onTableChanged","onClickDetail","defaultSortOrder","_","renderJobAction","data-k-b-testhook-component","renderControlBar","renderJobsTable","renderJobDetail","CancelableRequest","pendingTasks","isCanceled","task","cancel","cancelPending","request","userJobsSearchError","USER_JOBS_SEARCH_ERROR","userJobsSearchRequest","promise","getJobs","metrics","job_states","jobState","newID","userJobsCancelJobError","USER_JOBS_CANCEL_ERROR","UserJobsReduxAdapter","getState","code","searchTerms","split","term","RegExp","timeRangeStart","timeRangeEnd","spawn","newJobs","test","userJobsSearch","userJobsCancelJob","MyJobs","defaultTimeRangePreset","data-k-b-testhook-button","onJobCancel","sortOrder","myJobsSearchError","MY_JOBS_SEARCH_ERROR","myJobsSearchRequests","myJobsRefreshSearch","myJobsCancelJobError","MY_JOBS_CANCEL_ERROR","myJobsSearch","MY_JOBS_CANCEL_START","myJobsCancelJob","refreshSearch","PublicAppStats","onSearch","onSubmitSearch","stat","appId","onTableChange","moduleTitle","localeCompare","functionId","functionTitle","align","runCount","errorCount","successRate","averageRunTime","duration","averageQueueTime","totalRunTime","renderAppStatsTable","calcAverage","total","count","searchError","PUBLIC_APP_STATS_SEARCH_ERROR","catalogUrl","Catalog","catalogClient","getExecAggrStats","rawStats","stats","full_app_id","part","whole","number_of_calls","number_of_errors","total_exec_time","total_queue_time","expression","filtered","UserRunSummary","moduleName","functionName","renderTable","USER_RUN_SUMMARY_SEARCH_ERROR","begin","getExecAggrTable","isApp","func_mod","func","n","Main","defaultTabKey","activeTabKey","defaultActiveTabKey","setTitle","activeKey","renderMyJobsTab","userJobsTabLabel","renderPublicAppStatsTab","tabLabel","data-k-b-testhook-plugin","runtime","navigation","sendTitle","setView","setParams","mainLoadError","MAIN_LOAD_ERROR","Loader","LOADING","onLoad","MAIN_LOAD_START","catalogURL","ErrorBoundary","errorMessage","errorInfo","children","store","createStore","compose","applyMiddleware","thunk","App","required","Boolean","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","channel","windowListener","ui_lib_1","IFrameIntegration_1","actions_1","loadSuccess","APP_LOAD_SUCCESS","APP_SET_TITLE","navigate","APP_NAVIGATE","messageName","loadError","APP_LOAD_ERROR","appStart","iframeParams","getParamsFromDOM","hostChannelId","channelId","baseUrl","Groups","UserProfile","Workspace","NarrativeMethodStore","defaultPath","devMode","_params$authorization","authAuthorized","greeting","RootState","makeRootStoreInitialState","root","makeAuthStoreInitialState","_wrapNativeSuper","axios_1","JSONRPCException","_Error","classJSONRPCServerException","_Error2","method","random","slice","headers","makePayload","post","_GenericClient","AuthActionType","authCheckStart","AUTH_CHECK_START","authCheckError","AUTH_CHECK_ERROR","AUTH_AUTHORIZED","authUnauthorized","AUTH_UNAUTHORIZED","checkAuth","AuthClient","removeAuthorization","remove","addAuthorization","AppState","makeIntegrationStoreInitialState","DevelopStatus","makeDevelopStore","develop","DevelopActionType","ui_lib_2","DEVELOP_SET_TITLE","DEVELOP_LOAD_SUCCESS","DEVELOP_SET_VIEW","DEVELOP_SET_PARAMS","devConfig","setupAndStartChannel","authInfo","setPartner","button","AppBase_1","AppBase","Loader_1","store_1","NiceTimeDuration_1","NiceTimeDuration","NiceRelativeTime_1","NiceRelativeTime","NiceElapsedTime_1","NiceElapsedTime","AuthGate_1","AuthGate","actions_2","reducers_1","store_2","FlexTabs_1","FlexTabs","findHostElement","frameElement","querySelector","getParamsFromIFrame","hostNode","hasAttribute","getAttribute","parse","decodeURIComponent","getChannelID","_React$Component","READY","RootActionType","startHostedEnvironment","ROOT_START_HOSTED_ENVIRONMENT","startDevelopmentEnvironment","ROOT_START_DEVELOPMENT_ENVIRONMENT","ServiceClient","_ServiceClient","Authorization","Accept","endpoints","path","makePath","Integration_1","Root_1","hosted","clicks","react_redux_1","container_1","Wrapped","mapStateToProps","mapDispatchToProps","view_1","_state$app","onAppStart","KBaseIntegration","teardownChannel","renderReady","renderNotReady","rootState","react_1","Develop_1","Root","_react_1$default$Comp","HOSTED","DEVELOP","rootStateToLabel","_state$develop","developStatus","antd_1","Develop","tokenRef","Button","onLoginClick","onLogoutClick","CHECKING","AUTHORIZED","renderAuthToolbar","UNAUTHORIZED","renderAuthForm","paramsString","encodeURIComponent","Tag","renderTitleToolbar","renderAuth","Spin","Alert","renderDevLoading","renderDevError","renderDevReady","renderDev","windowChannel_1","ServiceClient_1","DynamicServiceClient_1","NarrativeJobService_1","Catalog_1","time_1","Auth_1","store_3","store_4","rootStore","appStore","authStore","developStore","assign","showTooltip","tooltip","fullElapsed","tooltipPrefix","Tooltip","placement","intervals","nowTimer","interval","calcInterval","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","upto","return","startIntervalTimer","handleInterval","fullDate","hour","minute","timeZoneName","clockTimer","clockTime","startClock","_ui_lib_1$niceElapsed2","tooltipContent","_state$auth","isAuthorized","authState","renderUnauthorized","reducers_2","reducers_3","reducers_4","_reducers","newState","_reducer"],"mappings":"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","file":"static/js/main.4360f4e5.chunk.js","sourcesContent":["\"use strict\";\n\nvar _slicedToArray = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar uuid_1 = __importDefault(require(\"uuid\"));\n\nvar Listener = function Listener(_ref) {\n  var name = _ref.name,\n      onSuccess = _ref.onSuccess,\n      onError = _ref.onError;\n\n  _classCallCheck(this, Listener);\n\n  this.name = name;\n  this.onSuccess = onSuccess;\n  this.onError = onError;\n};\n\nvar WaitingListener =\n/*#__PURE__*/\nfunction (_Listener) {\n  _inherits(WaitingListener, _Listener);\n\n  function WaitingListener(params) {\n    var _this;\n\n    _classCallCheck(this, WaitingListener);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WaitingListener).call(this, params));\n    _this.started = new Date();\n    _this.timeout = params.timeout || 5000;\n    return _this;\n  }\n\n  return WaitingListener;\n}(Listener);\n\nvar Envelope =\n/*#__PURE__*/\nfunction () {\n  function Envelope(_ref2) {\n    var from = _ref2.from,\n        to = _ref2.to;\n\n    _classCallCheck(this, Envelope);\n\n    this.from = from;\n    this.to = to;\n    this.id = uuid_1.default.v4();\n    this.created = new Date();\n  }\n\n  _createClass(Envelope, [{\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        from: this.from,\n        to: this.to,\n        id: this.id,\n        created: this.created\n      };\n    }\n  }]);\n\n  return Envelope;\n}();\n\nvar Message =\n/*#__PURE__*/\nfunction () {\n  function Message(_ref3) {\n    var name = _ref3.name,\n        payload = _ref3.payload,\n        from = _ref3.from,\n        to = _ref3.to;\n\n    _classCallCheck(this, Message);\n\n    this.name = name;\n    this.payload = payload;\n    this.id = uuid_1.default.v4();\n    this.created = new Date();\n    this.envelope = new Envelope({\n      from: from,\n      to: to\n    });\n  }\n\n  _createClass(Message, [{\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        envelope: this.envelope.toJSON(),\n        name: this.name,\n        payload: this.payload\n      };\n    }\n  }]);\n\n  return Message;\n}();\n\nvar Channel =\n/*#__PURE__*/\nfunction () {\n  function Channel() {\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Channel);\n\n    this.window = params.window || window;\n    this.debug = params.debug || false;\n\n    if (this.window.document === null) {\n      throw new Error('No document');\n    }\n\n    if (this.window.document.location === null) {\n      throw new Error('No location');\n    }\n\n    this.host = params.host || this.window.document.location.origin;\n    this.id = params.id || uuid_1.default.v4();\n    this.debugLog('Setting partner id to ' + params.to);\n    this.partnerId = params.to || null;\n    this.awaitingResponse = new Map();\n    this.waitingListeners = new Map();\n    this.listeners = new Map();\n    this.lastId = 0;\n    this.sentCount = 0;\n    this.receivedCount = 0;\n    this.unwelcomeReceivedCount = 0;\n    this.unwelcomeReceivedCountThreshhold = 100;\n    this.unwelcomeReceiptWarning = false;\n    this.unwelcomeReceiptWarningCount = 0;\n    this.currentListener = null;\n  }\n\n  _createClass(Channel, [{\n    key: \"debugLog\",\n    value: function debugLog(message) {\n      if (this.debug) {\n        console.log('[windowChannel][' + this.id + '] ' + message);\n      }\n    }\n  }, {\n    key: \"setTo\",\n    value: function setTo(toChannelId) {\n      this.partnerId = toChannelId;\n    }\n  }, {\n    key: \"genId\",\n    value: function genId() {\n      this.lastId += 1;\n      return 'msg_' + String(this.lastId);\n    }\n  }, {\n    key: \"receiveMessage\",\n    value: function receiveMessage(messageEvent) {\n      var message = messageEvent.data;\n\n      if (!message) {\n        this.unwelcomeReceivedCount++;\n\n        if (this.unwelcomeReceiptWarning) {\n          console.warn('TS No message data; message ignored', messageEvent);\n        }\n\n        return;\n      }\n\n      if (!message.envelope) {\n        this.unwelcomeReceivedCount++;\n\n        if (this.unwelcomeReceiptWarning) {\n          console.warn('No message envelope, not from KBase; message ignored', messageEvent);\n        }\n\n        return;\n      }\n\n      if (this.debug) {\n        console.debug('[windowChannel][debug]', this.id, message.envelope.to, this.partnerId, message.envelope.from, message);\n      }\n\n      if (message.envelope.to !== this.id) {\n        this.unwelcomeReceivedCount++;\n\n        if (this.unwelcomeReceiptWarning) {\n          console.warn(\"Message envelope does not match this channel's id\", 'message', message, 'channel id', this.id, 'partner id', this.partnerId);\n        }\n\n        return;\n      }\n\n      if (this.unwelcomeReceiptWarningCount > this.unwelcomeReceivedCountThreshhold) {\n        this.unwelcomeReceiptWarning = false;\n        console.warn('Unwelcome message warning disabled after ' + this.unwelcomeReceiptWarningCount + ' instances.');\n      }\n\n      if (message.envelope.id && this.awaitingResponse.has(message.envelope.id)) {\n        try {\n          var response = this.awaitingResponse.get(message.envelope.id);\n          this.awaitingResponse.delete(message.envelope.id);\n\n          if (response) {\n            response.handler(message.payload);\n          }\n        } catch (ex) {\n          console.error('Error handling response for message ', message, ex);\n        }\n      }\n\n      if (this.waitingListeners.has(message.name)) {\n        var awaiting = this.waitingListeners.get(message.name);\n        this.waitingListeners.delete(message.name);\n        awaiting.forEach(function (listener) {\n          try {\n            listener.onSuccess(message.payload);\n          } catch (ex) {\n            if (listener.onError) {\n              listener.onError(ex);\n            } else {\n              console.error('Error handling listener for message', message, ex);\n            }\n          }\n        });\n      }\n\n      if (this.listeners.has(message.name)) {\n        this.listeners.get(message.name).forEach(function (listener) {\n          if (!listener.onSuccess) {\n            console.warn('no handler for listener!', listener);\n          }\n\n          try {\n            listener.onSuccess(message.payload);\n          } catch (ex) {\n            if (listener.onError) {\n              listener.onError(ex);\n            } else {\n              console.error('Error handling listener for message', message, ex);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(listener) {\n      if (!this.listeners.has(listener.name)) {\n        this.listeners.set(listener.name, []);\n      }\n\n      this.listeners.get(listener.name).push(listener);\n    }\n  }, {\n    key: \"on\",\n    value: function on(messageId, success, error) {\n      this.listen(new Listener({\n        name: messageId,\n        onSuccess: success,\n        onError: error\n      }));\n    }\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage(message) {\n      this.window.postMessage(message.toJSON(), this.host);\n    }\n  }, {\n    key: \"send\",\n    value: function send(name, payload) {\n      this.debugLog(' sending message: ' + name + ', with payload: ' + JSON.stringify(payload));\n\n      if (this.partnerId === null) {\n        throw new Error('Channel partner id not set, cannot send message');\n      }\n\n      var message = new Message({\n        name: name,\n        payload: payload,\n        from: this.id,\n        to: this.partnerId\n      });\n      this.sendMessage(message);\n    }\n  }, {\n    key: \"sendRequest\",\n    value: function sendRequest(message, handler) {\n      this.awaitingResponse.set('message.id', {\n        started: new Date(),\n        handler: handler\n      });\n      this.sendMessage(message);\n    }\n  }, {\n    key: \"request\",\n    value: function request(name, payload) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        try {\n          if (_this2.partnerId === null) {\n            throw new Error('Channel partner id not set, cannot issue request');\n          }\n\n          _this2.sendRequest(new Message({\n            name: name,\n            payload: payload,\n            from: _this2.id,\n            to: _this2.partnerId\n          }), function (response) {\n            resolve(response);\n          });\n        } catch (ex) {\n          reject(ex);\n        }\n      });\n    }\n  }, {\n    key: \"startMonitor\",\n    value: function startMonitor() {\n      var _this3 = this;\n\n      window.setTimeout(function () {\n        var now = new Date().getTime();\n\n        var _loop = function _loop() {\n          var _ref4 = _Array$from[_i];\n          _ref5 = _slicedToArray(_ref4, 2);\n          var id = _ref5[0];\n          var listeners = _ref5[1];\n          var newListeners = listeners.filter(function (listener) {\n            if (listener instanceof WaitingListener) {\n              var elapsed = now - listener.started.getTime();\n\n              if (elapsed > listener.timeout) {\n                try {\n                  if (listener.onError) {\n                    listener.onError(new Error('timout after ' + elapsed));\n                  }\n                } catch (ex) {\n                  console.error('Error calling error handler', id, ex);\n                }\n\n                return false;\n              } else {\n                return true;\n              }\n            } else {\n              return true;\n            }\n          });\n\n          if (newListeners.length === 0) {\n            _this3.waitingListeners.delete(id);\n          }\n        };\n\n        for (var _i = 0, _Array$from = Array.from(_this3.waitingListeners.entries()); _i < _Array$from.length; _i++) {\n          var _ref5;\n\n          _loop();\n        }\n\n        if (_this3.waitingListeners.size > 0) {\n          _this3.startMonitor();\n        }\n      }, 100);\n    }\n  }, {\n    key: \"listenOnce\",\n    value: function listenOnce(listener) {\n      if (!this.waitingListeners.has(listener.name)) {\n        this.waitingListeners.set(listener.name, []);\n      }\n\n      this.waitingListeners.get(listener.name).push(listener);\n\n      if (listener.timeout) {\n        this.startMonitor();\n      }\n    }\n  }, {\n    key: \"once\",\n    value: function once(name, success, error) {\n      this.listenOnce(new WaitingListener({\n        name: name,\n        onSuccess: success,\n        onError: error\n      }));\n    }\n  }, {\n    key: \"when\",\n    value: function when(name, timeout) {\n      var _this4 = this;\n\n      return new Promise(function (resolve, reject) {\n        return _this4.listenOnce(new WaitingListener({\n          name: name,\n          timeout: timeout,\n          onSuccess: function onSuccess(payload) {\n            resolve(payload);\n          },\n          onError: function onError(error) {\n            reject(error);\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"stats\",\n    value: function stats() {\n      return {\n        sent: this.sentCount,\n        received: this.receivedCount\n      };\n    }\n  }, {\n    key: \"setPartner\",\n    value: function setPartner(id) {\n      this.partnerId = id;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(window) {\n      this.window = window;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this5 = this;\n\n      if (this.debug) {\n        console.log('[windowChannel][' + this.id + '] starting');\n      }\n\n      this.currentListener = function (message) {\n        _this5.receiveMessage(message);\n      };\n\n      this.window.addEventListener('message', this.currentListener, false);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.currentListener) {\n        this.window.removeEventListener('message', this.currentListener, false);\n      }\n    }\n  }]);\n\n  return Channel;\n}();\n\nexports.Channel = Channel;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ServiceWizard_1 = require(\"../coreServices/ServiceWizard\");\n\nvar GenericClient_1 = require(\"./GenericClient\");\n\nvar Cache_1 = __importDefault(require(\"./Cache\"));\n\nvar moduleCache = new Cache_1.default({\n  itemLifetime: 1800000,\n  monitoringFrequency: 60000,\n  waiterTimeout: 30000,\n  waiterFrequency: 100\n});\nvar DEFAULT_TIMEOUT = 10000;\n\nvar DynamicServiceClient =\n/*#__PURE__*/\nfunction () {\n  function DynamicServiceClient(_ref) {\n    var token = _ref.token,\n        url = _ref.url,\n        version = _ref.version,\n        timeout = _ref.timeout,\n        rpcContext = _ref.rpcContext,\n        urlBaseOverride = _ref.urlBaseOverride;\n\n    _classCallCheck(this, DynamicServiceClient);\n\n    this.token = token;\n    this.timeout = timeout || DEFAULT_TIMEOUT;\n    this.rpcContext = rpcContext || null;\n    this.urlBaseOverride = urlBaseOverride || null;\n\n    if (!url) {\n      throw new Error('The service discovery url was not provided');\n    }\n\n    this.url = url;\n    this.version = version || null;\n\n    if (version === 'auto') {\n      this.version = null;\n    }\n  }\n\n  _createClass(DynamicServiceClient, [{\n    key: \"options\",\n    value: function options() {\n      return {\n        timeout: this.timeout,\n        authorization: this.token,\n        rpcContext: this.rpcContext\n      };\n    }\n  }, {\n    key: \"getModule\",\n    value: function getModule() {\n      return this.constructor.module;\n    }\n  }, {\n    key: \"moduleId\",\n    value: function moduleId() {\n      var moduleId;\n\n      if (!this.version) {\n        moduleId = this.getModule() + ':auto';\n      } else {\n        moduleId = this.getModule() + ':' + this.version;\n      }\n\n      return moduleId;\n    }\n  }, {\n    key: \"getCached\",\n    value: function getCached(fetcher) {\n      return moduleCache.getItemWithWait({\n        id: this.moduleId(),\n        fetcher: fetcher\n      });\n    }\n  }, {\n    key: \"lookupModule\",\n    value: function lookupModule() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this.getCached(function () {\n                  var client = new ServiceWizard_1.ServiceWizardClient({\n                    url: _this.url,\n                    token: _this.token,\n                    timeout: _this.timeout\n                  });\n                  return Promise.resolve(client.getServiceStatus({\n                    module_name: _this.getModule(),\n                    version: _this.version\n                  }));\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"callFunc\",\n    value: function callFunc(funcName, params) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _ref2, url, module_name, client;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.lookupModule();\n\n              case 2:\n                _ref2 = _context2.sent;\n                url = _ref2.url;\n                module_name = _ref2.module_name;\n                client = new GenericClient_1.AuthorizedGenericClient({\n                  module: module_name,\n                  url: url,\n                  token: this.token,\n                  timeout: this.timeout\n                });\n                _context2.next = 8;\n                return client.callFunc(funcName, params);\n\n              case 8:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }]);\n\n  return DynamicServiceClient;\n}();\n\nexports.DynamicServiceClient = DynamicServiceClient;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ServiceClient_1 = require(\"../comm/ServiceClient\");\n\nfunction isString(x, p) {\n  if (typeof x === 'object' && Reflect.has(x, p)) {\n    if (typeof Reflect.get(x, p) === 'string') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction isNumber(x, p) {\n  if (typeof x === 'object' && Reflect.has(x, p)) {\n    if (typeof Reflect.get(x, p) === 'number') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction isArray(x, p, subType) {\n  if (typeof x === 'object' && Reflect.has(x, p)) {\n    var value = Reflect.get(x, p);\n\n    if (typeof value === 'object' && value instanceof Array) {\n      if (value.length === 0) {\n        return true;\n      }\n\n      return value.every(function (arrayElement) {\n        return typeof arrayElement === 'string';\n      });\n    }\n  }\n\n  return false;\n}\n\nfunction isGetServiceStatusResult(x) {\n  if (isString(x, 'module_name') && isString(x, 'version') && isString(x, 'git_commit_hash') && isArray(x, 'release_tags', 'string') && isString(x, 'url') && isNumber(x, 'up') && isString(x, 'status') && isString(x, 'health')) {\n    return true;\n  }\n\n  return false;\n}\n\nvar ServiceWizardClient =\n/*#__PURE__*/\nfunction (_ServiceClient_1$Auth) {\n  _inherits(ServiceWizardClient, _ServiceClient_1$Auth);\n\n  function ServiceWizardClient() {\n    _classCallCheck(this, ServiceWizardClient);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ServiceWizardClient).apply(this, arguments));\n  }\n\n  _createClass(ServiceWizardClient, [{\n    key: \"getServiceStatus\",\n    value: function getServiceStatus(params) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result, theResult;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.callFunc('get_service_status', params);\n\n              case 2:\n                result = _context.sent;\n\n                if (!(result.result && result.result.length > 0)) {\n                  _context.next = 14;\n                  break;\n                }\n\n                theResult = result.result[0];\n\n                if (theResult) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new Error('Crazy as it seems, result is falsy');\n\n              case 7:\n                if (!isGetServiceStatusResult(theResult)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", theResult);\n\n              case 11:\n                throw new Error('Sorry, result does not conform to \"GetServiceStatusResult\"');\n\n              case 12:\n                _context.next = 15;\n                break;\n\n              case 14:\n                throw new Error('Crazy as it seems, no result');\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return ServiceWizardClient;\n}(ServiceClient_1.AuthorizedServiceClient);\n\nexports.ServiceWizardClient = ServiceWizardClient;\nServiceWizardClient.module = 'ServiceWizard';","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Cache =\n/*#__PURE__*/\nfunction () {\n  function Cache(_ref) {\n    var itemLifetime = _ref.itemLifetime,\n        monitoringFrequency = _ref.monitoringFrequency,\n        waiterTimeout = _ref.waiterTimeout,\n        waiterFrequency = _ref.waiterFrequency;\n\n    _classCallCheck(this, Cache);\n\n    this.cache = new Map();\n    this.cacheLifetime = itemLifetime || 1800000;\n    this.monitoringFrequency = monitoringFrequency || 60000;\n    this.waiterTimeout = waiterTimeout || 30000;\n    this.waiterFrequency = waiterFrequency || 100;\n    this.isMonitoring = false;\n  }\n\n  _createClass(Cache, [{\n    key: \"runMonitor\",\n    value: function runMonitor() {\n      var _this = this;\n\n      if (this.isMonitoring) {\n        return;\n      }\n\n      this.isMonitoring = true;\n      setTimeout(function () {\n        var newCache = new Map();\n        var cacheRenewed = false;\n        Object.keys(_this.cache).forEach(function (id) {\n          var item = _this.cache.get(id);\n\n          if (!_this.isExpired(item)) {\n            newCache.set(id, item);\n            cacheRenewed = true;\n          }\n        });\n        _this.cache = newCache;\n        _this.isMonitoring = false;\n\n        if (cacheRenewed) {\n          _this.runMonitor();\n        }\n      }, this.monitoringFrequency);\n    }\n  }, {\n    key: \"isExpired\",\n    value: function isExpired(cacheItem) {\n      var now = new Date().getTime();\n      var elapsed = now - cacheItem.createdAt;\n      return elapsed > this.cacheLifetime;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem(id) {\n      if (this.cache.get(id) === undefined) {\n        return null;\n      }\n\n      var cached = this.cache.get(id);\n\n      if (this.isExpired(cached)) {\n        this.cache.delete(id);\n        return;\n      }\n\n      return cached;\n    }\n  }, {\n    key: \"reserveWaiter\",\n    value: function reserveWaiter(id, fetcher) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var started = new Date().getTime();\n        var waiting = true;\n\n        var waiter = function waiter() {\n          if (!waiting) {\n            return;\n          }\n\n          setTimeout(function () {\n            var item = _this2.cache.get(id);\n\n            if (!item) {\n              _this2.reserveAndFetch(id, fetcher).then(function () {\n                resolve(_this2.cache.get(id));\n              }).catch(function (err) {\n                reject(err);\n              });\n            } else if (item.reserved) {\n              var elapsed = new Date().getTime() - started;\n\n              if (elapsed < _this2.waiterTimeout) {\n                waiter();\n                return;\n              } else {\n                reject(new Error('Timed-out waiting for cache item to become available; timeout ' + _this2.waiterTimeout + ', waited ' + elapsed));\n                return;\n              }\n            } else {\n              resolve(item);\n            }\n          }, _this2.waiterFrequency);\n        };\n\n        waiter();\n      });\n    }\n  }, {\n    key: \"reserveAndFetch\",\n    value: function reserveAndFetch(id, fetcher) {\n      var _this3 = this;\n\n      this.reserveItem(id, fetcher);\n      var fetchPromise = fetcher().then(function (result) {\n        _this3.setItem(id, result, fetcher);\n\n        return result;\n      }).finally(function () {});\n      return fetchPromise;\n    }\n  }, {\n    key: \"getItemWithWait\",\n    value: function getItemWithWait(_ref2) {\n      var id = _ref2.id,\n          fetcher = _ref2.fetcher;\n      var cached = this.cache.get(id);\n\n      if (cached) {\n        if (this.isExpired(cached)) {\n          this.cache.delete(id);\n        } else if (cached.reserved) {\n          return this.reserveWaiter(id, fetcher).then(function (cached) {\n            return cached.value;\n          });\n        } else {\n          return Promise.resolve(cached.value);\n        }\n      }\n\n      return this.reserveAndFetch(id, fetcher);\n    }\n  }, {\n    key: \"reserveItem\",\n    value: function reserveItem(id, fetcher) {\n      this.cache.set(id, {\n        id: id,\n        createdAt: new Date().getTime(),\n        reserved: true,\n        value: null,\n        fetcher: fetcher\n      });\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(id, value, fetcher) {\n      if (this.cache.has(id)) {\n        var item = this.cache.get(id);\n\n        if (item && item.reserved) {\n          item.reserved = false;\n          item.value = value;\n          item.fetcher = fetcher;\n        } else {\n          this.cache.set(id, {\n            id: id,\n            createdAt: new Date().getTime(),\n            fetcher: fetcher,\n            reserved: false,\n            value: value\n          });\n        }\n      } else {\n        this.cache.set(id, {\n          id: id,\n          createdAt: new Date().getTime(),\n          fetcher: fetcher,\n          reserved: false,\n          value: value\n        });\n      }\n\n      this.runMonitor();\n    }\n  }]);\n\n  return Cache;\n}();\n\nexports.default = Cache;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar GenericClient_1 = require(\"../comm/GenericClient\");\n\nvar NarrativeJobServiceClient =\n/*#__PURE__*/\nfunction (_GenericClient_1$Gene) {\n  _inherits(NarrativeJobServiceClient, _GenericClient_1$Gene);\n\n  function NarrativeJobServiceClient() {\n    _classCallCheck(this, NarrativeJobServiceClient);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NarrativeJobServiceClient).apply(this, arguments));\n  }\n\n  _createClass(NarrativeJobServiceClient, [{\n    key: \"cancelJob\",\n    value: function cancelJob(param) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.callFunc('cancel_job', [param]);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"getJobLogs\",\n    value: function getJobLogs(param) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.callFunc('get_job_logs', [param]);\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"checkJob\",\n    value: function checkJob(param) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.callFunc('check_job', [param]);\n\n              case 2:\n                return _context3.abrupt(\"return\", _context3.sent);\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }]);\n\n  return NarrativeJobServiceClient;\n}(GenericClient_1.GenericClient);\n\nexports.default = NarrativeJobServiceClient;\nNarrativeJobServiceClient.module = 'NarrativeJobService';","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _slicedToArray = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar GenericClient_1 = require(\"../comm/GenericClient\");\n\nvar CatalogClient =\n/*#__PURE__*/\nfunction (_GenericClient_1$Gene) {\n  _inherits(CatalogClient, _GenericClient_1$Gene);\n\n  function CatalogClient() {\n    _classCallCheck(this, CatalogClient);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CatalogClient).apply(this, arguments));\n  }\n\n  _createClass(CatalogClient, [{\n    key: \"isAdmin\",\n    value: function isAdmin() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _ref, _ref2, result;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.callFunc('is_admin', [null]);\n\n              case 3:\n                _ref = _context.sent;\n                _ref2 = _slicedToArray(_ref, 1);\n                result = _ref2[0];\n                return _context.abrupt(\"return\", result);\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                console.error('ERROR', _context.t0);\n                throw _context.t0;\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 9]]);\n      }));\n    }\n  }, {\n    key: \"getExecAggrTable\",\n    value: function getExecAggrTable(param) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _ref3, _ref4, result;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.callFunc('get_exec_aggr_table', [param]);\n\n              case 2:\n                _ref3 = _context2.sent;\n                _ref4 = _slicedToArray(_ref3, 1);\n                result = _ref4[0];\n                return _context2.abrupt(\"return\", result);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"getExecAggrStats\",\n    value: function getExecAggrStats(param) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var _ref5, _ref6, result;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.callFunc('get_exec_aggr_stats', [param]);\n\n              case 2:\n                _ref5 = _context3.sent;\n                _ref6 = _slicedToArray(_ref5, 1);\n                result = _ref6[0];\n                return _context3.abrupt(\"return\", result);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }]);\n\n  return CatalogClient;\n}(GenericClient_1.GenericClient);\n\nexports.default = CatalogClient;\nCatalogClient.module = 'Catalog';","\"use strict\";\n\nvar _slicedToArray = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar TimeUnit;\n\n(function (TimeUnit) {\n  TimeUnit[TimeUnit[\"MILLISECOND\"] = 0] = \"MILLISECOND\";\n  TimeUnit[TimeUnit[\"SECOND\"] = 1] = \"SECOND\";\n  TimeUnit[TimeUnit[\"MINUTE\"] = 2] = \"MINUTE\";\n  TimeUnit[TimeUnit[\"HOUR\"] = 3] = \"HOUR\";\n  TimeUnit[TimeUnit[\"DAY\"] = 4] = \"DAY\";\n})(TimeUnit = exports.TimeUnit || (exports.TimeUnit = {}));\n\nvar timeUnits = [{\n  unit: TimeUnit.MILLISECOND,\n  long: 'millisecond',\n  short: 'ms',\n  single: 'm',\n  size: 1000\n}, {\n  unit: TimeUnit.SECOND,\n  long: 'second',\n  short: 'sec',\n  single: 's',\n  size: 60\n}, {\n  unit: TimeUnit.MINUTE,\n  long: 'minute',\n  short: 'min',\n  single: 'm',\n  size: 60\n}, {\n  unit: TimeUnit.HOUR,\n  long: 'hour',\n  short: 'hr',\n  single: 'h',\n  size: 24\n}, {\n  unit: TimeUnit.DAY,\n  long: 'day',\n  short: 'day',\n  single: 'd',\n  size: 30\n}];\n\nfunction niceRelativeTime(someDate) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var nowDate = options.now || new Date();\n  var elapsed = Math.round((nowDate.getTime() - someDate.getTime()) / 1000);\n  var elapsedAbs = Math.abs(elapsed);\n  var format = options.format || 'compact';\n  var measure, measureAbs, unit;\n  var maxDays = options.absoluteAfter || 90;\n\n  if (elapsedAbs < 60 * 60 * 24 * maxDays) {\n    if (elapsedAbs === 0) {\n      return 'now';\n    } else if (elapsedAbs < 60) {\n      measure = elapsed;\n      measureAbs = elapsedAbs;\n      unit = makeUnit(timeUnits[1], format, measureAbs);\n    } else if (elapsedAbs < 60 * 60) {\n      measure = Math.round(elapsed / 60);\n      measureAbs = Math.round(elapsedAbs / 60);\n      unit = makeUnit(timeUnits[2], format, measureAbs);\n    } else if (elapsedAbs < 60 * 60 * 24) {\n      measure = Math.round(elapsed / 3600);\n      measureAbs = Math.round(elapsedAbs / 3600);\n      unit = makeUnit(timeUnits[3], format, measureAbs);\n    } else {\n      measure = Math.round(elapsed / (3600 * 24));\n      measureAbs = Math.round(elapsedAbs / (3600 * 24));\n      unit = makeUnit(timeUnits[4], format, measureAbs);\n    }\n\n    var _ref = measure < 0 ? ['in', null] : [null, 'ago'],\n        _ref2 = _slicedToArray(_ref, 2),\n        prefix = _ref2[0],\n        suffix = _ref2[1];\n\n    return (prefix ? prefix + ' ' : '') + measureAbs + unit + (suffix ? ' ' + suffix : '');\n  } else {\n    if (options.format === 'compact' && nowDate.getFullYear() === someDate.getFullYear()) {\n      return Intl.DateTimeFormat('en-US', {\n        month: 'short',\n        day: 'numeric'\n      }).format(someDate);\n    } else {\n      return Intl.DateTimeFormat('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      }).format(someDate);\n    }\n  }\n}\n\nexports.niceRelativeTime = niceRelativeTime;\n\nfunction makeUnit(unit, format, value) {\n  switch (format) {\n    case 'full':\n      var label = ' ' + unit.long;\n\n      if (value !== 1) {\n        return label + 's';\n      }\n\n      return label;\n\n    case 'short':\n      return ' ' + unit.short;\n\n    case 'compact':\n      return unit.single;\n  }\n}\n\nfunction niceDuration(value) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var minimized = [];\n  var format = options.format || 'compact';\n  var temp = Math.abs(value);\n  var parts = timeUnits.map(function (unit) {\n    var unitValue = temp % unit.size;\n    temp = (temp - unitValue) / unit.size;\n    var unitLabel = makeUnit(unit, format, unitValue);\n    return {\n      label: unitLabel,\n      value: unitValue\n    };\n  }).reverse();\n  parts.pop();\n  var keep = false;\n\n  for (var i = 0; i < parts.length; i += 1) {\n    if (!keep) {\n      if (parts[i].value > 0) {\n        keep = true;\n      } else {\n        continue;\n      }\n    }\n\n    if (options.precision && options.precision === minimized.length) {\n      break;\n    }\n\n    minimized.push(parts[i]);\n  }\n\n  if (minimized.length === 0) {\n    return '<' + (format !== 'compact' ? ' ' : '') + '1' + makeUnit(timeUnits[1], format, 1);\n  } else {\n    return minimized.map(function (item) {\n      return String(item.value) + item.label;\n    }).join(' ');\n  }\n}\n\nexports.niceDuration = niceDuration;\n\nfunction niceElapsed(elapsedTime) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var minimized = [];\n  var format = options.format || 'compact';\n  var timeLeftInUnits = Math.abs(elapsedTime);\n  var parts = timeUnits.map(function (unit, index) {\n    if (index === timeUnits.length - 1) {\n      return {\n        label: makeUnit(unit, format, timeLeftInUnits),\n        value: timeLeftInUnits\n      };\n    } else {\n      var unitValue = timeLeftInUnits % unit.size;\n      timeLeftInUnits = (timeLeftInUnits - unitValue) / unit.size;\n      var unitLabel = makeUnit(unit, format, unitValue);\n      return {\n        label: unitLabel,\n        value: unitValue\n      };\n    }\n  }).reverse();\n  parts.pop();\n  var keep = false;\n\n  for (var i = 0; i < parts.length; i += 1) {\n    if (!keep) {\n      if (parts[i].value > 0) {\n        keep = true;\n      } else {\n        continue;\n      }\n    }\n\n    if (options.precision && options.precision === minimized.length) {\n      break;\n    }\n\n    minimized.push(parts[i]);\n  }\n\n  if (minimized.length === 0) {\n    return {\n      label: '<' + (format !== 'compact' ? ' ' : '') + '1' + makeUnit(timeUnits[1], format, 1),\n      value: minimized\n    };\n  } else {\n    return {\n      label: minimized.map(function (item) {\n        return String(item.value) + item.label;\n      }).join(' '),\n      value: minimized\n    };\n  }\n}\n\nexports.niceElapsed = niceElapsed;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _slicedToArray = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Cookies = __importStar(require(\"es-cookie\"));\n\nvar auth_1 = __importDefault(require(\"./coreServices/auth\"));\n\nvar AuthState;\n\n(function (AuthState) {\n  AuthState[AuthState[\"NONE\"] = 0] = \"NONE\";\n  AuthState[AuthState[\"AUTHENTICATED\"] = 1] = \"AUTHENTICATED\";\n  AuthState[AuthState[\"UNAUTHENTICATED\"] = 2] = \"UNAUTHENTICATED\";\n  AuthState[AuthState[\"ERROR\"] = 3] = \"ERROR\";\n})(AuthState = exports.AuthState || (exports.AuthState = {}));\n\nvar Auth =\n/*#__PURE__*/\nfunction () {\n  function Auth(url) {\n    _classCallCheck(this, Auth);\n\n    this.url = url;\n  }\n\n  _createClass(Auth, [{\n    key: \"checkAuth\",\n    value: function checkAuth() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var token, auth;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                token = Cookies.get('kbase_session');\n\n                if (token) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", Promise.resolve({\n                  status: AuthState.UNAUTHENTICATED,\n                  userAuthorization: null\n                }));\n\n              case 3:\n                auth = new auth_1.default({\n                  url: this.url\n                });\n                return _context.abrupt(\"return\", Promise.all([auth.getTokenInfo(token), auth.getMe(token)]).then(function (_ref) {\n                  var _ref2 = _slicedToArray(_ref, 2),\n                      tokenInfo = _ref2[0],\n                      account = _ref2[1];\n\n                  var roles = account.roles.map(function (_ref3) {\n                    var id = _ref3.id,\n                        desc = _ref3.desc;\n                    return id;\n                  });\n                  return {\n                    status: AuthState.AUTHENTICATED,\n                    userAuthorization: {\n                      token: token,\n                      username: account.user,\n                      realname: account.display,\n                      roles: roles\n                    }\n                  };\n                }).catch(function (err) {\n                  return {\n                    status: AuthState.UNAUTHENTICATED,\n                    userAuthorization: null\n                  };\n                }));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return Auth;\n}();\n\nexports.default = Auth;","export enum ActionType {\n    MAIN_LOAD = 'main load',\n    MAIN_LOAD_START = 'main load start',\n    MAIN_LOAD_SUCCESS = 'main load success',\n    MAIN_LOAD_ERROR = 'main load error',\n    MAIN_UNLOAD = 'main/unload',\n\n    MY_JOBS_SEARCH = 'my jobs search',\n    MY_JOBS_SEARCH_START = 'my jobs search start',\n    MY_JOBS_SEARCH_SUCCESS = 'my jobs search success',\n    MY_JOBS_SEARCH_ERROR = 'my jobs search error',\n    My_JOBS_REFRESH_SEARCH = 'my jobs refresh search',\n\n    MY_JOBS_CANCEL = 'my jobs cancel',\n    MY_JOBS_CANCEL_START = 'my jobs cancel start',\n    MY_JOBS_CANCEL_SUCCESS = 'my jobs cancel success',\n    MY_JOBS_CANCEL_ERROR = 'my jobs cancel error',\n\n    USER_JOBS_SEARCH = 'user jobs search',\n    USER_JOBS_SEARCH_START = 'user jobs search start',\n    USER_JOBS_SEARCH_SUCCESS = 'user jobs search success',\n    USER_JOBS_SEARCH_ERROR = 'user jobs search error',\n\n    USER_JOBS_CANCEL = 'user jobs cancel',\n    USER_JOBS_CANCEL_START = 'user jobs cancel start',\n    USER_JOBS_CANCEL_SUCCESS = 'user jobs cancel success',\n    USER_JOBS_CANCEL_ERROR = 'user jobs cancel error',\n\n    PUBLIC_APP_STATS_SEARCH = 'publicAppStats/Search',\n    PUBLIC_APP_STATS_SEARCH_START = 'publicAppStats/Search/Start',\n    PUBLIC_APP_STATS_SEARCH_ERROR = 'publicAppStats/Search/Error',\n    PUBLIC_APP_STATS_SEARCH_SUCCESS = 'publicAppStats/Search/Success',\n\n    USER_RUN_SUMMARY_SEARCH = 'userRunSummary/Search',\n    USER_RUN_SUMMARY_SEARCH_START = 'userRunSummary/Search/Start',\n    USER_RUN_SUMMARY_SEARCH_ERROR = 'userRunSummary/Search/Error',\n    USER_RUN_SUMMARY_SEARCH_SUCCESS = 'userRunSummary/Search/Success'\n}\n\n// function fakeJobs() {\n//     function randomStatus(): JobStatus {\n//         const i = Math.floor(Math.random() * 4);\n//         return [JobStatus.QUEUED, JobStatus.RUNNING, JobStatus.FINISHED, JobStatus.ERRORED][i];\n//     }\n\n//     function createJobs(jobCount: number) {\n//         const testJobs: Array<Job> = [];\n\n//         const dayMs = 1000 * 60 * 60 * 24;\n//         const now = Date.now();\n\n//         for (let i = 0; i < jobCount; i++) {\n//             testJobs.push({\n//                 key: 'narrative_id_' + i,\n//                 narrativeTitle: 'narrative ' + i + ' here',\n//                 narrativeID: i,\n//                 appTitle: 'app here',\n//                 appID: String(i),\n//                 submittedAt: new Date(now - dayMs * (jobCount - i)).getTime(),\n//                 queuedAt: new Date(now - dayMs * (jobCount - i)).getTime(),\n//                 runAt: new Date(now - dayMs * (jobCount - i)).getTime(),\n//                 finishAt: new Date(now - dayMs * (jobCount - i)).getTime(),\n//                 queuedElapsed: 1000 * 100 * Math.random(),\n//                 runElapsed: 1000 * 100 * Math.random(),\n//                 status: randomStatus()\n//             });\n//         }\n\n//         return testJobs;\n//     }\n\n//     const jobCount = Math.floor(Math.random() * 200);\n\n//     return createJobs(jobCount);\n// }\n\n// async function fetchMyJobsx(): Promise<Array<Job>> {\n//     return new Promise((resolve, reject) => {\n//         window.setTimeout(() => {\n//             resolve(fakeJobs());\n//         }, 3000);\n//     });\n// }\n\n// All user jobs, for admins.\n// This is separate, because it exposes different information in the view.\n","import { Reducer } from 'react';\nimport { StoreState, SearchState } from '../store';\nimport { Action } from 'redux';\nimport { MyJobsSearchStart, MyJobsSearchSuccess, MyJobsCancelJobSuccess } from '../actions/myJobs';\nimport { ActionType } from '../actions';\n\nfunction myJobsSearchStart(state: StoreState, action: MyJobsSearchStart): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            myJobsView: {\n                ...state.views.myJobsView,\n                searchState: SearchState.SEARCHING\n            }\n        }\n    };\n}\n\nfunction myJobsSearchSuccess(state: StoreState, action: MyJobsSearchSuccess): StoreState {\n    const newState = {\n        ...state,\n        views: {\n            ...state.views,\n            myJobsView: {\n                ...state.views.myJobsView,\n                searchState: SearchState.SEARCHED,\n                rawJobs: action.rawJobs,\n                jobs: action.jobs,\n                jobsFetchedAt: action.jobsFetchedAt,\n                searchExpression: action.searchExpression\n            }\n        }\n    };\n    return newState;\n}\n\nfunction myJobsCancelJobSuccess(state: StoreState, action: MyJobsCancelJobSuccess): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            myJobsView: {\n                ...state.views.myJobsView\n                // TODO: should twiddle a cancellation status for the job.\n            }\n        }\n    };\n}\n\nconst reducer: Reducer<StoreState | undefined, Action> = (state: StoreState | undefined, action: Action) => {\n    if (!state) {\n        return state;\n    }\n    switch (action.type) {\n        case ActionType.MY_JOBS_SEARCH_SUCCESS:\n            return myJobsSearchSuccess(state, action as MyJobsSearchSuccess);\n        case ActionType.MY_JOBS_SEARCH_START:\n            return myJobsSearchStart(state, action as MyJobsSearchStart);\n        case ActionType.MY_JOBS_CANCEL_SUCCESS:\n            return myJobsCancelJobSuccess(state, action as MyJobsCancelJobSuccess);\n    }\n};\n\nexport default reducer;\n","import { StoreState, SearchState } from '../store';\nimport {\n    UserJobsSearchStart,\n    UserJobsSearchSuccess,\n    UserJobsCancelJobStart,\n    UserJobsCancelJobSuccess\n} from '../actions/userJobs';\nimport { Reducer } from 'react';\nimport { Action } from 'redux';\nimport { ActionType } from '../actions';\n\nfunction userJobsSearchStart(state: StoreState, action: UserJobsSearchStart): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            userJobsView: {\n                ...state.views.userJobsView,\n                searchState: SearchState.SEARCHING\n            }\n        }\n    };\n}\n\nfunction userJobsSearchSuccess(state: StoreState, action: UserJobsSearchSuccess): StoreState {\n    const newState = {\n        ...state,\n        views: {\n            ...state.views,\n            userJobsView: {\n                ...state.views.userJobsView,\n                searchState: SearchState.SEARCHED,\n                rawJobs: action.rawJobs,\n                jobs: action.jobs,\n                jobsFetchedAt: action.jobsFetchedAt,\n                searchExpression: action.searchExpression\n            }\n        }\n    };\n    return newState;\n}\n\nfunction cancelJobStart(state: StoreState, action: UserJobsCancelJobStart): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            userJobsView: {\n                ...state.views.userJobsView\n                // TODO: need cancelation state...\n            }\n        }\n    };\n}\n\nfunction cancelJobSuccess(state: StoreState, action: UserJobsCancelJobSuccess): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            userJobsView: {\n                ...state.views.userJobsView\n                // TODO: need cancelation state...\n            }\n        }\n    };\n}\n\nconst reducer: Reducer<StoreState | undefined, Action> = (state: StoreState | undefined, action: Action) => {\n    if (!state) {\n        return state;\n    }\n    switch (action.type) {\n        case ActionType.USER_JOBS_SEARCH_START:\n            return userJobsSearchStart(state, action as UserJobsSearchStart);\n        case ActionType.USER_JOBS_SEARCH_SUCCESS:\n            return userJobsSearchSuccess(state, action as UserJobsSearchSuccess);\n        case ActionType.USER_JOBS_CANCEL_START:\n            return cancelJobStart(state, action as UserJobsCancelJobStart);\n        case ActionType.USER_JOBS_CANCEL_SUCCESS:\n            return cancelJobSuccess(state, action as UserJobsCancelJobSuccess);\n    }\n};\n\nexport default reducer;\n","import { StoreState, ComponentLoadingState } from '../store';\nimport { MainLoadSuccess, Unload } from '../actions/app';\nimport { Reducer } from 'react';\nimport { Action } from 'redux';\nimport { ActionType } from '../actions';\n\nfunction mainLoadSuccess(state: StoreState, action: MainLoadSuccess): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            mainView: {\n                ...state.views.mainView,\n                loadingState: ComponentLoadingState.SUCCESS,\n                isAdmin: action.isAdmin\n            }\n        }\n    };\n}\n\nfunction unload(state: StoreState, action: Unload): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            mainView: {\n                loadingState: ComponentLoadingState.NONE,\n                isAdmin: false,\n                error: null\n            }\n        }\n    };\n}\n\nconst reducer: Reducer<StoreState | undefined, Action> = (state: StoreState | undefined, action: Action) => {\n    if (!state) {\n        return state;\n    }\n    switch (action.type) {\n        case ActionType.MAIN_LOAD_SUCCESS:\n            return mainLoadSuccess(state, action as MainLoadSuccess);\n        case ActionType.MAIN_UNLOAD:\n            return unload(state, action as Unload);\n    }\n};\n\nexport default reducer;\n","import { StoreState, SearchState } from '../store';\nimport { Reducer } from 'react';\nimport { Action } from 'redux';\nimport { ActionType } from '../actions';\nimport { SearchSuccess, SearchStart } from '../actions/publicAppStats';\n\nfunction searchSuccess(state: StoreState, action: SearchSuccess): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            publicAppStatsView: {\n                ...state.views.publicAppStatsView,\n                searchState: SearchState.SEARCHED,\n                appStats: action.appStats\n            }\n        }\n    };\n}\n\nfunction searchStart(state: StoreState, action: SearchStart): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            publicAppStatsView: {\n                ...state.views.publicAppStatsView,\n                searchState: SearchState.SEARCHING\n            }\n        }\n    };\n}\n\nconst reducer: Reducer<StoreState | undefined, Action> = (state: StoreState | undefined, action: Action) => {\n    if (!state) {\n        return state;\n    }\n    switch (action.type) {\n        case ActionType.PUBLIC_APP_STATS_SEARCH_START:\n            return searchStart(state, action as SearchStart);\n        case ActionType.PUBLIC_APP_STATS_SEARCH_SUCCESS:\n            return searchSuccess(state, action as SearchSuccess);\n    }\n};\n\nexport default reducer;\n","import { StoreState, SearchState } from '../store';\nimport { Reducer } from 'react';\nimport { Action } from 'redux';\nimport { ActionType } from '../actions';\nimport { SearchSuccess, SearchStart } from '../actions/userRunSummary';\n\nfunction searchSuccess(state: StoreState, action: SearchSuccess): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            userRunSummaryView: {\n                ...state.views.userRunSummaryView,\n                searchState: SearchState.SEARCHED,\n                userRunSummary: action.userRunSummary\n            }\n        }\n    };\n}\n\nfunction searchStart(state: StoreState, action: SearchStart): StoreState {\n    return {\n        ...state,\n        views: {\n            ...state.views,\n            userRunSummaryView: {\n                ...state.views.userRunSummaryView,\n                searchState: SearchState.SEARCHING\n            }\n        }\n    };\n}\n\nconst reducer: Reducer<StoreState | undefined, Action> = (state: StoreState | undefined, action: Action) => {\n    if (!state) {\n        return state;\n    }\n    switch (action.type) {\n        case ActionType.USER_RUN_SUMMARY_SEARCH_START:\n            return searchStart(state, action as SearchStart);\n        case ActionType.USER_RUN_SUMMARY_SEARCH_SUCCESS:\n            return searchSuccess(state, action as SearchSuccess);\n    }\n};\n\nexport default reducer;\n","import { makeBaseStoreState } from '@kbase/ui-components';\nimport reducer from './reducers';\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { AppError } from '@kbase/ui-components';\nimport { BaseStoreState } from '@kbase/ui-components';\n\nexport enum JobStatus {\n    QUEUED = 'QUEUED',\n    RUNNING = 'RUNNING',\n    FINISHED = 'FINISHED',\n    ERRORED_QUEUED = 'ERRORED_QUEUED',\n    ERRORED_RUNNING = 'ERRORED_RUNNING',\n    CANCELED_QUEUED = 'CANCELED_QUEUED',\n    CANCELED_RUNNING = 'CANCELED_RUNNING'\n}\n\nexport type JobID = string;\n\n\n\n// export interface Job {\n//     id: JobID;\n//     key: string;\n//     narrativeID: number | null;\n//     narrativeTitle: string;\n//     appID: string;\n//     appTitle: string;\n//     queuedAt: EpochTime;\n//     runAt: EpochTime | null;\n//     finishAt: EpochTime | null;\n//     queuedElapsed: number;\n//     runElapsed: number | null;\n//     status: JobStatus;\n//     message: string;\n//     clientGroups: Array<string>;\n//     username: string;\n// }\n\n// export enum TemporalState {\n//     NONE,\n//     QUEUED,\n//     RUNNING\n// }\n\n// export enum PermanentState {\n//     NONE,\n//     SUCCESS,\n//     ERROR,\n//     CANCEL\n// }\n\n// export interface JobQueuedState {\n//     tstate: TemporalState.QUEUED;\n//     pstate: PermanentState.NONE;\n\n//     id: JobID;\n//     key: string;\n//     narrativeID: number | null;\n//     narrativeTitle: string;\n//     appID: string;\n//     appTitle: string;\n//     queuedAt: EpochTime;\n//     queuedElapsed: number;\n//     clientGroups: Array<string>;\n//     username: string;\n// }\n\n// export interface JobRunningState {\n//     tstate: TemporalState.RUNNING;\n//     pstate: PermanentState.NONE;\n\n//     id: JobID;\n//     key: string;\n//     narrativeID: number | null;\n//     narrativeTitle: string;\n//     appID: string;\n//     appTitle: string;\n//     queuedAt: EpochTime;\n//     runAt: EpochTime;\n//     queuedElapsed: number;\n//     runElapsed: number;\n//     clientGroups: Array<string>;\n//     username: string;\n// }\n\n// export interface JobFinishedState {\n//     tstate: TemporalState.NONE;\n//     pstate: PermanentState.SUCCESS;\n\n//     id: JobID;\n//     key: string;\n//     narrativeID: number | null;\n//     narrativeTitle: string;\n//     appID: string;\n//     appTitle: string;\n//     queuedAt: EpochTime;\n//     runAt: EpochTime;\n//     finishAt: EpochTime;\n//     queuedElapsed: number;\n//     runElapsed: number;\n//     clientGroups: Array<string>;\n//     username: string;\n// }\n\n// export interface JobCanceledWhileQueuedState {\n//     tstate: TemporalState.QUEUED;\n//     pstate: PermanentState.SUCCESS;\n\n//     id: JobID;\n//     key: string;\n//     narrativeID: number | null;\n//     narrativeTitle: string;\n//     appID: string;\n//     appTitle: string;\n//     queuedAt: EpochTime;\n//     runAt: EpochTime;\n//     finishAt: EpochTime;\n//     queuedElapsed: number;\n//     runElapsed: number;\n//     clientGroups: Array<string>;\n//     username: string;\n// }\n\n\nexport interface JobQueued {\n    status: JobStatus.QUEUED;\n    id: JobID;\n    key: string;\n    narrativeID: number | null;\n    narrativeTitle: string;\n    appID: string;\n    appTitle: string;\n    queuedAt: EpochTime;\n    queuedElapsed: number;\n    clientGroups: Array<string>;\n    username: string;\n}\n\nexport interface JobRunning {\n    status: JobStatus.RUNNING;\n    id: JobID;\n    key: string;\n    narrativeID: number | null;\n    narrativeTitle: string;\n    appID: string;\n    appTitle: string;\n    queuedAt: EpochTime;\n    runAt: EpochTime;\n    queuedElapsed: number;\n    runElapsed: number;\n    clientGroups: Array<string>;\n    username: string;\n}\n\nexport interface JobFinished {\n    status: JobStatus.FINISHED;\n    id: JobID;\n    key: string;\n    narrativeID: number | null;\n    narrativeTitle: string;\n    appID: string;\n    appTitle: string;\n    queuedAt: EpochTime;\n    runAt: EpochTime;\n    finishAt: EpochTime;\n    queuedElapsed: number;\n    runElapsed: number;\n    clientGroups: Array<string>;\n    username: string;\n}\n\nexport interface JobCanceledWhileQueued {\n    status: JobStatus.CANCELED_QUEUED;\n    id: JobID;\n    key: string;\n    narrativeID: number | null;\n    narrativeTitle: string;\n    appID: string;\n    appTitle: string;\n    queuedAt: EpochTime;\n    finishAt: EpochTime;\n    queuedElapsed: number;\n    clientGroups: Array<string>;\n    username: string;\n}\n\nexport interface JobCanceledWhileRunning {\n    status: JobStatus.CANCELED_RUNNING;\n    id: JobID;\n    key: string;\n    narrativeID: number | null;\n    narrativeTitle: string;\n    appID: string;\n    appTitle: string;\n    queuedAt: EpochTime;\n    runAt: EpochTime;\n    finishAt: EpochTime;\n    queuedElapsed: number;\n    runElapsed: number;\n    clientGroups: Array<string>;\n    username: string;\n}\n\nexport interface JobErroredWhileQueued {\n    status: JobStatus.ERRORED_QUEUED;\n    id: JobID;\n    key: string;\n    narrativeID: number | null;\n    narrativeTitle: string;\n    appID: string;\n    appTitle: string;\n    queuedAt: EpochTime;\n    finishAt: EpochTime;\n    queuedElapsed: number;\n    message: string;\n    clientGroups: Array<string>;\n    username: string;\n}\n\nexport interface JobErroredWhileRunning {\n    status: JobStatus.ERRORED_RUNNING;\n    id: JobID;\n    key: string;\n    narrativeID: number | null;\n    narrativeTitle: string;\n    appID: string;\n    appTitle: string;\n    queuedAt: EpochTime;\n    runAt: EpochTime;\n    finishAt: EpochTime;\n    queuedElapsed: number;\n    runElapsed: number;\n    message: string;\n    clientGroups: Array<string>;\n    username: string;\n}\n\nexport type Job = JobQueued | JobRunning | JobFinished | JobCanceledWhileQueued | JobCanceledWhileRunning | JobErroredWhileQueued | JobErroredWhileRunning;\n\ninterface JobsState {\n    jobs: Array<Job>;\n}\n\nexport type EpochTime = number;\n\nexport type TimeRangePresets = 'lastHour' | 'last48Hours' | 'lastWeek' | 'lastMonth';\n\nexport interface TimeRangePreset {\n    kind: 'preset';\n    preset: TimeRangePresets;\n}\n\nexport interface TimeRangeLiteral {\n    kind: 'literal';\n    start: EpochTime;\n    end: EpochTime;\n}\n\nexport type TimeRange = TimeRangePreset | TimeRangeLiteral;\n\nexport interface TimeRange2 {\n    preset: TimeRangePresets;\n    start: EpochTime | null;\n    end: EpochTime | null;\n}\n\nexport interface SortSpec {\n    field: string;\n    direction: 'ascending' | 'descending';\n}\n\nexport interface JobsSearchExpression {\n    query: string;\n    timeRange: TimeRange;\n    sort: SortSpec | null;\n    // timeRangeStart: EpochTime;\n    // timeRangeEnd: EpochTime;\n    jobStatus: Array<JobStatus>;\n    forceSearch: boolean;\n}\n\nexport enum SearchState {\n    NONE = 0,\n    SEARCHING,\n    SEARCHED,\n    ERROR\n}\n\nexport enum ComponentLoadingState {\n    NONE = 0,\n    LOADING,\n    SUCCESS,\n    ERROR\n}\n\n// The Store!\n\nexport interface MainView {\n    loadingState: ComponentLoadingState;\n    error: AppError | null;\n    isAdmin: boolean;\n}\n\nexport interface MyJobsView {\n    searchState: SearchState;\n    searchExpression: JobsSearchExpression | null;\n    jobsFetchedAt: EpochTime | null;\n    rawJobs: Array<Job>;\n    jobs: Array<Job>;\n}\n\nexport interface UserJobsView {\n    searchState: SearchState;\n    searchExpression: JobsSearchExpression | null;\n    jobsFetchedAt: EpochTime | null;\n    rawJobs: Array<Job>;\n    jobs: Array<Job>;\n}\n\nexport interface MyStoreState {\n    views: {\n        mainView: MainView;\n        myJobsView: MyJobsView;\n        userJobsView: UserJobsView;\n        publicAppStatsView: PublicAppStatsView;\n        userRunSummaryView: UserRunSummaryView;\n    };\n}\n\nexport interface StoreState extends BaseStoreState, MyStoreState {\n    // entities: {\n    //     jobs: {\n    //         byId: Map<string, Job>\n    //     }\n    // },\n\n}\n\n// App Stats\n\nexport interface PublicAppStatsQuery {\n    query: string;\n}\n\nexport interface PublicAppStatsView {\n    searchState: SearchState;\n    rawAppStats: Array<AppStat>;\n    appStats: Array<AppStat>;\n    query: PublicAppStatsQuery;\n}\n\nexport interface AppStat {\n    appId: string;\n    functionId: string;\n    functionTitle: string;\n    moduleId: string;\n    moduleTitle: string;\n    runCount: number;\n    errorCount: number;\n    successRate: number;\n    averageRunTime: number;\n    averageQueueTime: number;\n    totalRunTime: number;\n}\n\n/**\n * User Run Summary types\n */\n\nexport interface UserRunSummaryQuery {\n    query: string;\n}\n\nexport interface UserRunSummaryStat {\n    username: string;\n    isApp: boolean;\n    appId: string | null;\n    moduleName: string;\n    functionName: string;\n    runCount: number;\n}\n\nexport interface UserRunSummaryView {\n    searchState: SearchState;\n    userRunSummary: Array<UserRunSummaryStat>;\n    query: UserRunSummaryQuery;\n}\n\nexport function makeInitialStoreState(): StoreState {\n    const jobs: Array<Job> = [];\n    const baseState = makeBaseStoreState();\n    return {\n        ...baseState,\n        views: {\n            mainView: {\n                loadingState: ComponentLoadingState.NONE,\n                error: null,\n                isAdmin: false\n            },\n            myJobsView: {\n                searchState: SearchState.NONE,\n                searchExpression: null,\n                jobsFetchedAt: null,\n                rawJobs: jobs,\n                jobs\n            },\n            userJobsView: {\n                searchState: SearchState.NONE,\n                searchExpression: null,\n                jobsFetchedAt: null,\n                rawJobs: jobs,\n                jobs\n            },\n            publicAppStatsView: {\n                searchState: SearchState.NONE,\n                rawAppStats: [],\n                appStats: [],\n                query: {\n                    query: ''\n                }\n            },\n            userRunSummaryView: {\n                searchState: SearchState.NONE,\n                userRunSummary: [],\n                query: {\n                    query: ''\n                }\n            }\n        }\n    };\n}\n\nexport function createReduxStore() {\n    return createStore(reducer, makeInitialStoreState(), compose(applyMiddleware(thunk)));\n}\n","import { Action, Reducer } from 'redux';\nimport { StoreState } from '../store';\n\nimport { baseReducer } from '@kbase/ui-components';\nimport { BaseStoreState } from '@kbase/ui-components';\nimport myJobsReducer from './myJobs';\nimport userJobsReducer from './userJobs';\nimport appReducer from './app';\nimport publicAppStatsReducer from './publicAppStats';\nimport userRunSummary from './userRunSummary';\n\n// export default function reducer<StoreState, Action>(state: StoreState, action: Action): StoreState {\n//     return state;\n// }\n\nconst reducer: Reducer<StoreState | undefined, Action> = (state: StoreState | undefined, action: Action) => {\n    // TODO: we cast state to baseStore state, which should be fine since StoreState extends BaseStoreState.\n    // and then we recast to store state when returning to make ts happy; the actual state object which passes\n    // into and ...\n    // WARNING: this may break if a base reducer (app or auth) does not copy all the state with ...state.\n    // we probably need to use combine reducers?\n    const baseState = baseReducer(state as BaseStoreState, action);\n    if (baseState) {\n        return baseState as StoreState;\n    }\n    return (\n        appReducer(state, action) ||\n        myJobsReducer(state, action) ||\n        userJobsReducer(state, action) ||\n        publicAppStatsReducer(state, action) ||\n        userRunSummary(state, action) ||\n        state\n    );\n};\n\nexport default reducer;\n","import React from 'react';\nimport { Tag, Icon } from 'antd';\nimport { JobStatus, Job } from '../redux/store';\nimport { NiceElapsedTime, NiceRelativeTime } from '@kbase/ui-components';\n\n/**\n* Translates a job status value to a label, with optional icon, suitable for\n* display as the child of the job status tag.\n*\n* @param status - the status of the job\n*\n* @note Since the switch is over an enum, we don't have to worry about the default case\n*/\nfunction jobStatusLabel(status: JobStatus): JSX.Element | string {\n    switch (status) {\n        case JobStatus.QUEUED:\n            return (\n                <span>\n                    <Icon type=\"loading\" spin /> Queued\n                </span>\n            );\n        case JobStatus.RUNNING:\n            return (\n                <span>\n                    <Icon type=\"loading-3-quarters\" spin /> Running\n                </span>\n            );\n        case JobStatus.CANCELED_QUEUED:\n        case JobStatus.CANCELED_RUNNING:\n            return 'Canceled';\n        case JobStatus.FINISHED:\n            return 'Success';\n        case JobStatus.ERRORED_QUEUED:\n        case JobStatus.ERRORED_RUNNING:\n            return 'Errored';\n        default:\n            throw new Error('Invalid job status');\n    }\n}\n\n/**\n * Translates a job status value to a color value acceptable for the color\n * prop for the job status tag.\n *\n * @param status - the status of the job\n */\nexport function jobColor(status: JobStatus): string {\n    switch (status) {\n        case JobStatus.QUEUED:\n            return 'orange';\n        case JobStatus.RUNNING:\n            return 'blue';\n        case JobStatus.CANCELED_QUEUED:\n        case JobStatus.CANCELED_RUNNING:\n            return 'gray';\n        case JobStatus.FINISHED:\n            return 'green';\n        case JobStatus.ERRORED_QUEUED:\n        case JobStatus.ERRORED_RUNNING:\n            return 'red';\n        default:\n            throw new Error('Invalid job status');\n    }\n}\n\nexport interface JobStatusProps {\n    job: Job\n    showTiming?: boolean\n}\n\ninterface JobStatusState {\n\n}\n\nexport default class JobStatusComponent extends React.Component<JobStatusProps, JobStatusState> {\n\n    renderTag() {\n        const label = jobStatusLabel(this.props.job.status);\n        const color = jobColor(this.props.job.status);\n        return <Tag color={color}>{label}</Tag>\n    }\n\n    renderTiming() {\n        switch (this.props.job.status) {\n            case JobStatus.QUEUED:\n                return <span>\n                    <NiceElapsedTime from={this.props.job.queuedAt} useClock={true} />\n                </span>\n            case JobStatus.RUNNING:\n                return <span>\n                    <NiceElapsedTime from={this.props.job.runAt} useClock={true} />\n                </span>\n            case JobStatus.FINISHED:\n            case JobStatus.ERRORED_QUEUED:\n            case JobStatus.ERRORED_RUNNING:\n            case JobStatus.CANCELED_QUEUED:\n            case JobStatus.CANCELED_RUNNING:\n                return <span>\n                    <NiceRelativeTime time={new Date(this.props.job.finishAt)} />\n                </span>\n        }\n    }\n\n    render() {\n        const timing = this.props.showTiming ? this.renderTiming() : '';\n        return (\n            <span>\n                {this.renderTag()}\n                {timing}\n            </span>\n        )\n    }\n}","import React from 'react';\nimport './style.css';\nimport { Job, JobStatus } from '../../redux/store';\nimport { JobLogLine, JobLog } from './state';\nimport { Table, Tooltip, Empty, Button, Dropdown, Menu, Spin } from 'antd';\nimport { ClickParam } from 'antd/lib/menu';\nimport Papa from 'papaparse';\nimport ButtonGroup from 'antd/lib/button/button-group';\n\nenum PlayState {\n    NONE,\n    PLAYING,\n    PAUSED,\n    DISABLED\n}\n\nexport interface JobLogProps {\n    job: Job;\n    log: JobLog;\n}\n\ninterface JobLogState {\n    playState: PlayState;\n    isPaused: boolean;\n}\n\nexport default class JobLogs extends React.Component<JobLogProps, JobLogState> {\n    playLogTimer: number;\n    bodyRef: React.RefObject<HTMLDivElement>\n    // a hack to detect state change... \n    currentJobStatus: JobStatus | null;\n\n    constructor(params: JobLogProps) {\n        super(params);\n        this.playLogTimer = 0;\n        this.bodyRef = React.createRef();\n        this.currentJobStatus = null;\n        this.state = {\n            playState: PlayState.NONE,\n            isPaused: false\n        }\n    }\n    componentDidMount() {\n        this.currentJobStatus = this.props.job.status;\n\n        // if (this.state.playState !== PlayState.PLAYING) {\n        //     return;\n        // }\n        if (this.state.isPaused) {\n            return;\n        }\n        if (!this.isActive()) {\n            return;\n        }\n        this.scrollToBottom();\n    }\n    scrollToBottom() {\n        if (this.bodyRef.current === null) {\n            return;\n        }\n        // console.log('scroll to bottom!', this.bodyRef.current.scrollTop, this.bodyRef.current.scrollHeight, this.bodyRef.current.clientHeight);\n        this.bodyRef.current.scrollTop = this.bodyRef.current.scrollHeight;\n    }\n    componentDidUpdate() {\n        const lastJobStatus = this.currentJobStatus;\n        this.currentJobStatus = this.props.job.status;\n        // if (this.state.playState !== PlayState.PLAYING) {\n        //     return;\n        // }\n        if (this.state.isPaused) {\n            return;\n        }\n        if (!this.isActive()) {\n            if (lastJobStatus === JobStatus.RUNNING &&\n                this.props.job.status === JobStatus.RUNNING) {\n                return;\n            }\n        }\n        this.scrollToBottom();\n    }\n    isActive() {\n        return this.props.job.status === JobStatus.QUEUED ||\n            this.props.job.status === JobStatus.RUNNING;\n    }\n    renderLastLine() {\n        let message;\n\n        if (this.isActive()) {\n            message = <span>\n                Polling for additional log entries...{' '}\n                <Spin size=\"small\" />\n            </span>\n        } else {\n            message = <div style={{ textAlign: 'center', fontStyle: 'italic' }}>Log complete</div>\n        }\n        return (\n            <div className=\"FlexTable-row\" key='END' style={{ backgroundColor: 'rgba(200, 200, 200, 0.5)' }} data-end=\"end\">\n                <div className=\"FlexTable-col\"></div>\n                <div className=\"FlexTable-col\">{message}</div>\n            </div>\n        )\n    }\n    renderJobLog() {\n        const lines = this.props.log;\n        if (lines.length === 0) {\n            return (\n                <Empty />\n            )\n        }\n        const rows = lines.map((line) => {\n            const rowStyle: React.CSSProperties = {};\n            if (line.isError) {\n                rowStyle.color = 'red';\n            }\n            return <div className=\"FlexTable-row\" style={rowStyle} key={line.lineNumber}>\n                <div className=\"FlexTable-col\">\n                    {line.lineNumber}\n                </div>\n                <div className=\"FlexTable-col\">\n                    {line.line}\n                </div>\n            </div>\n        })\n        rows.push(\n            this.renderLastLine()\n        )\n        return (\n            <div className=\"FlexTable\" key=\"log\">\n                <div className=\"FlexTable-header\">\n                    <div className=\"FlexTable-row\">\n                        <div className=\"FlexTable-col\">Line #</div>\n                        <div className=\"FlexTable-col\">Log line</div>\n                    </div>\n                </div>\n                <div className=\"FlexTable-body\" ref={this.bodyRef}>\n                    {rows}\n                </div>\n            </div>\n        )\n    }\n\n    renderJobLogRow() {\n\n    }\n    renderJobLogLines() {\n        return (\n            <Table\n                dataSource={this.props.log}\n                size=\"small\"\n                // scroll={{ y: 400 }}\n                rowKey={(logLine: JobLogLine) => {\n                    return String(logLine.lineNumber);\n                }}\n                // pagination={{ position: 'top', showSizeChanger: true }}\n                pagination={false}\n                scroll={{ y: '100%' }}\n                rowClassName={(line: JobLogLine) => {\n                    if (line.isError) {\n                        return 'JobLog-errorRow';\n                    } else {\n                        return 'JobLog-normalRow';\n                    }\n                }}\n            >\n                <Table.Column\n                    title=\"Row\"\n                    dataIndex=\"lineNumber\"\n                    key=\"lineNumber\"\n                    width=\"8%\"\n                    render={(lineNumber: number, logLine: JobLogLine) => {\n                        const numberDisplay = new Intl.NumberFormat('en-US', { useGrouping: true }).format(lineNumber);\n                        if (logLine.isError) {\n                            return <span className=\"JobLog-errorText\">{numberDisplay}</span>;\n                        }\n                        return numberDisplay;\n                    }}\n                    sorter={(a: JobLogLine, b: JobLogLine) => {\n                        return a.lineNumber - b.lineNumber;\n                    }}\n                />\n                <Table.Column\n                    title=\"Log line\"\n                    dataIndex=\"line\"\n                    key=\"line\"\n                    width=\"92%\"\n                    render={(line: string, logLine: JobLogLine) => {\n                        let row;\n                        if (logLine.isError) {\n                            row = <span className=\"JobLog-errorText\">{line}</span>;\n                        } else {\n                            row = <span>{line}</span>;\n                        }\n                        return <Tooltip title={line}>{row}</Tooltip>;\n                    }}\n                />\n            </Table>\n        );\n    }\n    downloadLog(type: string, log: JobLog) {\n        function download(filename: string, contentType: string, content: string) {\n            const downloadLink = document.createElement('a');\n            const downloadContent = new Blob([content]);\n            downloadLink.href = URL.createObjectURL(downloadContent);\n            downloadLink.download = filename;\n            downloadLink.style.visibility = 'none';\n            downloadLink.type = contentType;\n            document.body.appendChild(downloadLink);\n            downloadLink.click();\n            document.body.removeChild(downloadLink);\n            URL.revokeObjectURL(downloadLink.href);\n        }\n        function logToCSV(log: JobLog): string {\n            return Papa.unparse(log);\n        }\n        function logToTSV(log: JobLog): string {\n            return Papa.unparse(log, {\n                delimiter: '\\t'\n            });\n        }\n        function logToJSON(log: JobLog): string {\n            return JSON.stringify(log);\n        }\n        function logToText(log: JobLog): string {\n            return log.map((line) => {\n                return line.line;\n            }).join('\\n');\n        }\n\n        let contentType: string;\n        let content: string;\n        switch (type) {\n            case 'tsv':\n                contentType = 'application/octet-stream';\n                content = logToTSV(log);\n                break;\n            case 'json':\n                contentType = 'application/octet-stream';\n                content = logToJSON(log);\n                break;\n            case 'text':\n                contentType = 'text/plain';\n                content = logToText(log);\n                break;\n            default:\n            case 'csv':\n                contentType = 'application/octet-stream';\n                content = logToCSV(log);\n                break;\n        }\n\n        download('job-log.' + type, contentType, content)\n    }\n\n    onMenuClick(param: ClickParam | undefined) {\n        if (!param) {\n            return\n        }\n        this.downloadLog(param.key, this.props.log);\n    }\n\n    onPlayLog() {\n        // this.props.updateJobLog();\n        this.scrollToBottom();\n        this.setState({\n            playState: PlayState.PLAYING,\n            isPaused: false\n        })\n    }\n\n    onPauseLog() {\n        this.setState({\n            playState: PlayState.PAUSED,\n            isPaused: true\n        })\n    }\n\n    renderPlayPauseTooltips() {\n        let playTooltip: string;\n        let pauseTooltip: string;\n        const isPaused = this.state.isPaused;\n\n        switch (this.props.job.status) {\n            case JobStatus.RUNNING:\n                if (isPaused) {\n                    playTooltip = 'Click to automatically scroll to the bottom of the logs when new entries arrive';\n                    pauseTooltip = 'Automatic scrolling is already paused';\n                } else {\n                    playTooltip = 'Automatic scrolling is already active';\n                    pauseTooltip = 'Click to pause automatic scrolling to the bottom of the logs when new entries arrive';\n                }\n                break;\n            case JobStatus.QUEUED:\n            case JobStatus.FINISHED:\n            case JobStatus.ERRORED_QUEUED:\n            case JobStatus.ERRORED_RUNNING:\n            case JobStatus.CANCELED_QUEUED:\n            case JobStatus.CANCELED_RUNNING:\n            default:\n                playTooltip = 'Log playing only available when the job is running';\n                pauseTooltip = 'Log playing only available when the job is running';\n                break;\n\n        }\n        return [playTooltip, pauseTooltip];\n    }\n\n    renderPlayPause() {\n        let irrelevant: boolean;\n\n        // Does the job status make log playing irrelevant.\n        switch (this.props.job.status) {\n            case JobStatus.QUEUED:\n                irrelevant = true;\n                break;\n            case JobStatus.RUNNING:\n                irrelevant = false;\n                break;\n            case JobStatus.FINISHED:\n            case JobStatus.ERRORED_QUEUED:\n            case JobStatus.ERRORED_RUNNING:\n            case JobStatus.CANCELED_QUEUED:\n            case JobStatus.CANCELED_RUNNING:\n            default:\n                irrelevant = true;\n        }\n\n        const [playTooltip, pauseTooltip] = this.renderPlayPauseTooltips();\n\n        return (\n            <ButtonGroup >\n                <Tooltip title={playTooltip}>\n                    <Button icon=\"caret-right\" disabled={irrelevant || !this.state.isPaused} onClick={this.onPlayLog.bind(this)} />\n                </Tooltip>\n                <Tooltip title={pauseTooltip}>\n                    <Button icon=\"pause\" disabled={irrelevant || this.state.isPaused} onClick={this.onPauseLog.bind(this)} />\n                </Tooltip>\n            </ButtonGroup>\n        )\n    }\n    renderToolbar() {\n        const disabled = this.props.log.length === 0;\n        const menu = (\n            <Menu onClick={this.onMenuClick.bind(this)}>\n                <Menu.Item key=\"csv\" disabled={disabled}>CSV</Menu.Item>\n                <Menu.Item key=\"tsv\" disabled={disabled}>TSV</Menu.Item>\n                <Menu.Item key=\"json\" disabled={disabled}>JSON</Menu.Item>\n                <Menu.Item key=\"text\" disabled={disabled}>TEXT</Menu.Item>\n            </Menu>\n        )\n        return (\n            <div key=\"toolbar\">\n                <Dropdown overlay={menu}>\n                    <Button icon=\"download\"></Button>\n                </Dropdown>\n                {' '}\n                {this.renderPlayPause()}\n            </div>\n        )\n    }\n    render() {\n        return <div className=\"JobLog\">\n            {this.renderToolbar()}\n            {this.renderJobLog()}\n        </div>\n    }\n    // render() {\n    //     return this.renderJobLog();\n    // }\n}\n","import React from 'react';\nimport { Button } from 'antd';\nimport './FlexTabs.css';\n\nexport interface Tab {\n    tab: string;\n    title: JSX.Element | string;\n    component: JSX.Element\n}\n\nexport interface TabsProps {\n    tabs: Array<Tab>\n}\n\ninterface TabsState {\n    selectedTabIndex: number;\n}\n\nexport default class Tabs extends React.Component<TabsProps, TabsState> {\n    constructor(props: TabsProps) {\n        super(props);\n        this.state = {\n            selectedTabIndex: 0\n        };\n    }\n\n    selectTab(tabIndex: number) {\n        this.setState({ selectedTabIndex: tabIndex })\n    }\n\n    renderTabs() {\n        return this.props.tabs.map((tab, index) => {\n            const classNames = ['FlexTabs-tab']\n            if (index === this.state.selectedTabIndex) {\n                classNames.push('FlexTabs-tab-active');\n            }\n            return (\n                <span key={String(index)} className={classNames.join(' ')}>\n                    <Button type=\"link\" onClick={() => { this.selectTab(index) }}>{tab.title}</Button>\n                </span>\n            )\n        })\n    }\n\n    renderTabBody() {\n        return this.props.tabs[this.state.selectedTabIndex].component\n    }\n\n    render() {\n        return <div className=\"FlexTabs\">\n            <div className=\"FlexTabs-header\">\n                {this.renderTabs()}\n            </div>\n            <div className=\"FlexTabs-body\">\n                {this.renderTabBody()}\n            </div>\n        </div>\n    }\n}","import React from 'react';\nimport { Job, JobStatus } from '../redux/store';\nimport { NiceRelativeTime, NiceElapsedTime } from '@kbase/ui-components';\nimport JobStatusBadge, { jobColor } from './JobStatus';\nimport { Spin } from 'antd';\n\nexport interface Props {\n    job: Job\n}\n\ninterface State {\n\n}\n\nexport default class JobInfo extends React.Component<Props, State> {\n    renderSubmitted() {\n        const date = this.props.job.queuedAt\n        if (!date) {\n            return <span>** empty **</span>;\n        }\n        return <NiceRelativeTime time={new Date(date)} />;\n    }\n    renderQueuedFor() {\n        const job = this.props.job;\n        switch (job.status) {\n            case JobStatus.QUEUED:\n                return <NiceElapsedTime from={job.queuedAt} precision={2} useClock={true} />;\n            case JobStatus.RUNNING:\n                return <NiceElapsedTime from={job.queuedAt} to={job.runAt} precision={2} />;\n            case JobStatus.FINISHED:\n                return <NiceElapsedTime from={job.queuedAt} to={job.runAt} precision={2} />;\n            case JobStatus.CANCELED_QUEUED:\n                return <NiceElapsedTime from={job.queuedAt} to={job.finishAt} precision={2} />;\n            case JobStatus.CANCELED_RUNNING:\n                return <NiceElapsedTime from={job.queuedAt} to={job.runAt} precision={2} />;\n            case JobStatus.ERRORED_QUEUED:\n                return <NiceElapsedTime from={job.queuedAt} to={job.finishAt} precision={2} />;\n            case JobStatus.ERRORED_RUNNING:\n                return <NiceElapsedTime from={job.queuedAt} to={job.runAt} precision={2} />;\n        }\n    }\n    renderRunFor() {\n        const job = this.props.job;\n        switch (job.status) {\n            case JobStatus.QUEUED:\n                return <span>-</span>;\n            case JobStatus.RUNNING:\n                return <NiceElapsedTime from={job.runAt} precision={2} useClock={true} />;\n            case JobStatus.FINISHED:\n                return <NiceElapsedTime from={job.runAt} to={job.finishAt} precision={2} />;\n            case JobStatus.CANCELED_QUEUED:\n                return <span>-</span>;\n            case JobStatus.CANCELED_RUNNING:\n                return <NiceElapsedTime from={job.runAt} to={job.finishAt} precision={2} />;\n            case JobStatus.ERRORED_QUEUED:\n                return <span>-</span>;\n            case JobStatus.ERRORED_RUNNING:\n                return <NiceElapsedTime from={job.runAt} to={job.finishAt} precision={2} />;\n        }\n        // console.log('run for', this.props.job);\n        // if (!this.props.job.runElapsed) {\n        //     return <span>-</span>\n        // }\n        // return <NiceElapsedTime duration={this.props.job.runElapsed} precision={2} />;\n    }\n\n    renderStateSpinner(jobStatus: JobStatus) {\n        if (this.props.job.status === jobStatus) {\n            return <span>\n                {' '}\n                <Spin size=\"small\" style={{ color: jobColor(jobStatus) }} />\n            </span>\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"JobInfo InfoTable\">\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\">\n                        Job ID\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        {this.props.job.id}\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\">\n                        Status\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        <JobStatusBadge job={this.props.job} />\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\">\n                        Narrative\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        <a\n                            href={`/narrative/${this.props.job.narrativeID}`}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                        >\n                            {this.props.job.narrativeTitle}\n                        </a>\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\">\n                        App\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        <a href={`/#catalog/apps/${this.props.job.appID}`}>{this.props.job.appTitle}</a>\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\">\n                        Submitted\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        {this.renderSubmitted()}\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\">\n                        Queued For\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        {this.renderQueuedFor()}\n                        {this.renderStateSpinner(JobStatus.QUEUED)}\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\">\n                        Run For\n                </div>\n                    <div className=\"InfoTable-dataCol\">\n                        {this.renderRunFor()}\n                        {this.renderStateSpinner(JobStatus.RUNNING)}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react';\n\nimport { Spin, Alert } from 'antd';\nimport FlexTabs from '../FlexTabs';\nimport JobLog from '../JobLog/view';\nimport JobInfo from '../JobInfo';\nimport './style.css'\nimport { JobLogView, JobLogState, JobLogViewError } from './state';\nimport JobStatusBadge from '../JobStatus';\n\nexport interface JobDetailProps {\n    view: JobLogView\n}\n\ninterface JobDetailState {\n}\n\nexport default class JobDetail extends React.Component<JobDetailProps, JobDetailState> {\n    renderLoading() {\n        return (\n            <div className=\"FullyCenteredBox\">\n                <span>Loading ... <Spin /></span>\n            </div>\n        );\n    }\n\n    renderQueued() {\n        return (\n            <div className=\"FullyCenteredBox\">\n                <span>\n                    The job is <i>queued</i>. The log will be displayed when the job starts running ... <Spin />\n                </span>\n            </div >\n        );\n    }\n\n    renderError(view: JobLogViewError) {\n        return (\n            <Alert type=\"error\" message={view.error} />\n        )\n    }\n\n    renderJobLog() {\n        switch (this.props.view.status) {\n            case JobLogState.NONE:\n            case JobLogState.JOB_QUEUED:\n                return this.renderQueued();\n            case JobLogState.INITIAL_LOADING:\n                return this.renderLoading();\n            case JobLogState.ERROR:\n                return this.renderError(this.props.view);\n            case JobLogState.ACTIVE_LOADED:\n            case JobLogState.ACTIVE_LOADING:\n                return <JobLog job={this.props.view.job} log={this.props.view.log} />;\n            case JobLogState.FINISHED_LOADED:\n                return <JobLog job={this.props.view.job} log={this.props.view.log} />;\n        }\n    }\n    renderJobInfo() {\n        switch (this.props.view.status) {\n            case JobLogState.NONE:\n                return this.renderLoading();\n            case JobLogState.JOB_QUEUED:\n                return <JobInfo job={this.props.view.job} />;\n            case JobLogState.INITIAL_LOADING:\n                return this.renderLoading();\n            case JobLogState.ERROR:\n                return this.renderError(this.props.view);\n            case JobLogState.ACTIVE_LOADED:\n            case JobLogState.ACTIVE_LOADING:\n                return <JobInfo job={this.props.view.job} />;\n            case JobLogState.FINISHED_LOADED:\n                return <JobInfo job={this.props.view.job} />;\n        }\n    }\n    renderTest() {\n        const content = Array.from(Array(100).keys()).map((i) => {\n            return <div style={{ flex: '0 0 auto', display: 'flex', flexDirection: 'row', borderBottom: '1px silver solid' }} key={String(i)}>\n                <div style={{ flex: '0 0 auto', padding: '4px', overflowWrap: 'break-word', wordWrap: 'break-word' }}>\n                    {i}\n                </div>\n            </div>\n        });\n        return (\n            <div style={{ flex: '1 1 0px', display: 'flex', flexDirection: 'column', minHeight: 0 }}>\n                <div>Header Here</div>\n                <div style={{ flex: '1 1 0px', display: 'flex', flexDirection: 'column', minHeight: 0, overflowY: 'auto' }}>\n                    {content}\n                </div>\n            </div>\n        )\n    }\n    renderTest2() {\n        const content = Array.from(Array(100).keys()).map((i) => {\n            return <div className=\"FlexTable-row\" key={String(i)}>\n                <div className=\"FlexTable-col\">{i}</div>\n                <div className=\"FlexTable-col\">This is row {i}</div>\n            </div>\n        });\n        return (\n            <div className=\"FlexTable\">\n                <div className=\"FlexTable-header\">\n                    <div className=\"FlexTable-row\">\n                        <div className=\"FlexTable-col\">#</div>\n                        <div className=\"FlexTable-col\">Data</div>\n                    </div>\n                </div>\n                <div className=\"FlexTable-body\">\n                    {content}\n                </div>\n            </div>\n        )\n    }\n    renderStatus() {\n        switch (this.props.view.status) {\n            case JobLogState.NONE:\n            case JobLogState.INITIAL_LOADING:\n                return <Spin size=\"small\" />\n            case JobLogState.ERROR:\n                return <Alert type=\"error\" message={this.props.view.error} />\n            default:\n                return <JobStatusBadge job={this.props.view.job} showTiming={true} />\n        }\n    }\n    renderMiniDetails() {\n        return <div style={{ flex: '0 0 auto' }}>\n            {this.renderStatus()}\n        </div>\n\n    }\n    render() {\n        const tabs = [\n            {\n                tab: 'log',\n                title: 'Log',\n                component: this.renderJobLog()\n            },\n            {\n                tab: 'detail',\n                title: 'Detail',\n                component: this.renderJobInfo()\n            },\n        ]\n        return (\n            <React.Fragment>\n                {this.renderMiniDetails()}\n                <FlexTabs tabs={tabs} />\n            </React.Fragment>\n        )\n    }\n}","import { DynamicServiceClient, DynamicServiceClientParams } from '@kbase/ui-lib';\n\n// Metrics client --\n// TODO: move\n// TODO: use a more dynamic dynamic service client??\n\ninterface MetricsServiceParams extends DynamicServiceClientParams { }\n\n\nexport interface JobState {\n    app_id: string;\n    client_groups: Array<string>;\n    user?: string;\n\n    complete: boolean;\n    error: boolean;\n    status: string;\n    state: string;\n\n    creation_time: number;\n    exec_start_time?: number;\n    modification_time?: number;\n    finish_time?: number;\n\n    job_id: string;\n    method: string;\n\n    wsid: string;\n    narrative_objNo: number;\n\n    narrative_name: string;\n    workspace_name: string;\n}\n\n\ninterface GetAppMetricsParam {\n    epoch_range: [number, number];\n    user_ids: Array<string>;\n}\ninterface GetAppMetricsResult {\n    job_states: Array<JobState>;\n}\n\ninterface GetJobsParam {\n    epoch_range: [number, number];\n    user_ids: Array<string>;\n}\ninterface GetJobsResult {\n    job_states: Array<JobState>;\n    total_count: number;\n}\n\ninterface GetJobParam {\n    job_id: string;\n}\ninterface GetJobResult {\n    job_state: JobState;\n}\n\nexport default class MetricsServiceClient extends DynamicServiceClient {\n    static module: string = 'kb_Metrics';\n\n    async getJobs({ epoch_range, user_ids }: GetJobsParam): Promise<GetJobsResult> {\n        const result = await this.callFunc<[GetJobsParam], [GetJobsResult]>('get_jobs', [\n            {\n                epoch_range,\n                user_ids\n            }\n        ]);\n        return result[0];\n    }\n\n    async getJob({ job_id }: GetJobParam): Promise<GetJobResult> {\n        const result = await this.callFunc<[GetJobParam], [GetJobResult]>('get_job', [\n            {\n                job_id\n            }\n        ]);\n        return result[0];\n    }\n\n    async getAppMetrics({ epoch_range, user_ids }: GetAppMetricsParam): Promise<GetAppMetricsResult> {\n        const result = await this.callFunc<[GetAppMetricsParam], [GetAppMetricsResult]>('get_job', [\n            {\n                epoch_range,\n                user_ids\n            }\n        ]);\n        return result[0];\n    }\n}\n","import { JobStatus, Job, EpochTime, TimeRangePresets, TimeRange, JobQueued, JobRunning, JobFinished, JobCanceledWhileQueued, JobCanceledWhileRunning, JobErroredWhileQueued, JobErroredWhileRunning } from '../store';\nimport { JobState } from '../../lib/MetricsServiceClient';\n\nfunction getJobStatus(job: JobState): JobStatus {\n    switch (job.state) {\n        case 'QUEUED': return JobStatus.QUEUED;\n        case 'RUNNING': return JobStatus.RUNNING;\n        case 'FINISHED': return JobStatus.FINISHED;\n        case 'CANCELED_QUEUED': return JobStatus.CANCELED_QUEUED;\n        case 'CANCELED_RUNNING': return JobStatus.CANCELED_QUEUED;\n\n        // case 'ERRORED': return JobStatus.ERRORED;\n        case 'ERRORED_QUEUED':\n            console.warn('QUEUE_ERRORED', job);\n            return JobStatus.ERRORED_QUEUED;\n        case 'ERRORED_RUNNING':\n            return JobStatus.ERRORED_RUNNING;\n        default:\n            throw new Error('Unknown job state: ' + job.state)\n    }\n    // Use most reliable fields first.\n    // if (job.complete) {\n    //     if (job.error) {\n    //         return JobStatus.ERRORED;\n    //     } else {\n    //         if (job.status === 'done') {\n    //             return JobStatus.FINISHED;\n    //         }\n    //         if (job.status.startsWith('canceled')) {\n    //             return JobStatus.CANCELED;\n    //         }\n    //         if (job.status === 'Unknown error') {\n    //             return JobStatus.ERRORED;\n    //         }\n    //         return JobStatus.ERRORED;\n    //         // TODO: handle this error by creating a new job state - UNKNOWN\n    //         // console.log('detection error', job);\n    //         // throw new Error('Cannot detect job state');\n    //     }\n    // } else {\n    //     if (!job.status || job.status === 'queued') {\n    //         return JobStatus.QUEUED;\n    //     }\n    //     // Various status values indicate the job is running, but\n    //     // we don't need any more evidence because that is the only possible\n    //     // other job state.\n    //     // E.g. 'in-progress', 'running', 'starting job so that it can be finished'\n\n    //     return JobStatus.RUNNING;\n    // }\n\n    // if (job.status === 'Unknown error') {\n    //     return JobStatus.ERRORED;\n    // }\n    // console.log('detection error', job);\n    // throw new Error('Cannot detect job state');\n}\n\nfunction makeJobQueued(job: JobState, username: string): JobQueued {\n    let narrativeID;\n    if (job.wsid) {\n        narrativeID = parseInt(job.wsid, 10);\n    } else {\n        narrativeID = null;\n    }\n    return {\n        key: job.job_id,\n        id: job.job_id,\n        status: JobStatus.QUEUED,\n        appID: job.app_id,\n        appTitle: job.app_id,\n        narrativeID,\n        narrativeTitle: job.narrative_name,\n        queuedAt: job.creation_time,\n        // runAt: job.exec_start_time! || null,\n        queuedElapsed: Date.now() - job.creation_time,\n        clientGroups: job.client_groups,\n        // TODO: a more affirmative method of providing current username\n        // for querying for own...?\n        username: job.user || username\n    };\n}\n\nfunction makeJobRunning(job: JobState, username: string): JobRunning {\n    let narrativeID;\n    if (job.wsid) {\n        narrativeID = parseInt(job.wsid, 10);\n    } else {\n        narrativeID = null;\n    }\n    if (!job.exec_start_time) {\n        console.error('ERROR: Running job without exec_start_time!', job);\n        throw new Error('Running job without exec_start_time!');\n    }\n    return {\n        key: job.job_id,\n        id: job.job_id,\n        status: JobStatus.RUNNING,\n        appID: job.app_id,\n        appTitle: job.app_id,\n        narrativeID,\n        narrativeTitle: job.narrative_name,\n        queuedAt: job.creation_time,\n        runAt: job.exec_start_time,\n        runElapsed: Date.now() - job.exec_start_time,\n        queuedElapsed: Date.now() - job.creation_time,\n        clientGroups: job.client_groups,\n        // TODO: a more affirmative method of providing current username\n        // for querying for own...?\n        username: job.user || username\n    };\n}\n\nfunction makeJobFinished(job: JobState, username: string): JobFinished {\n    let narrativeID;\n    if (job.wsid) {\n        narrativeID = parseInt(job.wsid, 10);\n    } else {\n        narrativeID = null;\n    }\n    if (!job.exec_start_time) {\n        throw new Error('Running job without exec_start_time!')\n    }\n    if (!job.finish_time) {\n        throw new Error('Running job without finish_time!')\n    }\n    return {\n        key: job.job_id,\n        id: job.job_id,\n        status: JobStatus.FINISHED,\n        appID: job.app_id,\n        appTitle: job.app_id,\n        narrativeID,\n        narrativeTitle: job.narrative_name,\n        queuedAt: job.creation_time,\n        runAt: job.exec_start_time,\n        runElapsed: job.finish_time - job.exec_start_time,\n        finishAt: job.finish_time,\n        queuedElapsed: Date.now() - job.creation_time,\n        clientGroups: job.client_groups,\n        // TODO: a more affirmative method of providing current username\n        // for querying for own...?\n        username: job.user || username\n    };\n}\n\nfunction makeJobCanceledQueued(job: JobState, username: string): JobCanceledWhileQueued {\n    let narrativeID;\n    if (job.wsid) {\n        narrativeID = parseInt(job.wsid, 10);\n    } else {\n        narrativeID = null;\n    }\n\n    if (!job.finish_time) {\n        throw new Error('Canceled job without finish_time!')\n    }\n    return {\n        key: job.job_id,\n        id: job.job_id,\n        status: JobStatus.CANCELED_QUEUED,\n        appID: job.app_id,\n        appTitle: job.app_id,\n        narrativeID,\n        narrativeTitle: job.narrative_name,\n        queuedAt: job.creation_time,\n        queuedElapsed: Date.now() - job.creation_time,\n        clientGroups: job.client_groups,\n        finishAt: job.finish_time,\n        // TODO: a more affirmative method of providing current username\n        // for querying for own...?\n        username: job.user || username\n    };\n}\n\nfunction makeJobCanceledRunning(job: JobState, username: string): JobCanceledWhileRunning {\n    let narrativeID;\n    if (job.wsid) {\n        narrativeID = parseInt(job.wsid, 10);\n    } else {\n        narrativeID = null;\n    }\n    if (!job.exec_start_time) {\n        throw new Error('Canceled job without exec_start_time!')\n    }\n    if (!job.finish_time) {\n        throw new Error('Canceled job without finish_time!')\n    }\n    return {\n        key: job.job_id,\n        id: job.job_id,\n        status: JobStatus.CANCELED_RUNNING,\n        appID: job.app_id,\n        appTitle: job.app_id,\n        narrativeID,\n        narrativeTitle: job.narrative_name,\n        queuedAt: job.creation_time,\n        runAt: job.exec_start_time,\n        runElapsed: job.finish_time - job.exec_start_time,\n        finishAt: job.finish_time,\n        queuedElapsed: Date.now() - job.creation_time,\n        clientGroups: job.client_groups,\n        // TODO: a more affirmative method of providing current username\n        // for querying for own...?\n        username: job.user || username\n    };\n}\n\nfunction makeJobErroredQueued(job: JobState, username: string): JobErroredWhileQueued {\n    let narrativeID;\n    if (job.wsid) {\n        narrativeID = parseInt(job.wsid, 10);\n    } else {\n        narrativeID = null;\n    }\n    if (!job.finish_time) {\n        throw new Error('Errored job without finish_time!')\n    }\n    return {\n        key: job.job_id,\n        id: job.job_id,\n        status: JobStatus.ERRORED_QUEUED,\n        appID: job.app_id,\n        appTitle: job.app_id,\n        narrativeID,\n        narrativeTitle: job.narrative_name,\n        queuedAt: job.creation_time,\n        finishAt: job.finish_time,\n        queuedElapsed: Date.now() - job.creation_time,\n        clientGroups: job.client_groups,\n        message: job.status,\n        // TODO: a more affirmative method of providing current username\n        // for querying for own...?\n        username: job.user || username\n    };\n}\n\nfunction makeJobErroredRunning(job: JobState, username: string): JobErroredWhileRunning {\n    let narrativeID;\n    if (job.wsid) {\n        narrativeID = parseInt(job.wsid, 10);\n    } else {\n        narrativeID = null;\n    }\n    if (!job.exec_start_time) {\n        console.error('ERROR: Errored job without exec_start_time!', job);\n        throw new Error('Errored job without exec_start_time!')\n    }\n    if (!job.finish_time) {\n        throw new Error('Errored job without finish_time!')\n    }\n    return {\n        key: job.job_id,\n        id: job.job_id,\n        status: JobStatus.ERRORED_RUNNING,\n        appID: job.app_id,\n        appTitle: job.app_id,\n        narrativeID,\n        narrativeTitle: job.narrative_name,\n        queuedAt: job.creation_time,\n        runAt: job.exec_start_time,\n        runElapsed: job.finish_time - job.exec_start_time,\n        finishAt: job.finish_time,\n        queuedElapsed: Date.now() - job.creation_time,\n        clientGroups: job.client_groups,\n        message: job.status,\n        // TODO: a more affirmative method of providing current username\n        // for querying for own...?\n        username: job.user || username\n    };\n}\n\nexport function serviceJobToUIJob(job: JobState, username: string): Job {\n    const status = getJobStatus(job);\n    switch (status) {\n        case JobStatus.QUEUED:\n            return makeJobQueued(job, username);\n        case JobStatus.RUNNING:\n            return makeJobRunning(job, username);\n        case JobStatus.FINISHED:\n            return makeJobFinished(job, username);\n        case JobStatus.ERRORED_QUEUED:\n            return makeJobErroredQueued(job, username);\n        case JobStatus.ERRORED_RUNNING:\n            return makeJobErroredRunning(job, username);\n        case JobStatus.CANCELED_QUEUED:\n            return makeJobCanceledQueued(job, username);\n        case JobStatus.CANCELED_RUNNING:\n            return makeJobCanceledRunning(job, username);\n        default:\n            throw new Error('Invalid job status: ' + job.status);\n    }\n}\n\nexport function compareTimeRange(job: Job, timeRangeStart: EpochTime, timeRangeEnd: EpochTime) {\n    // // if any of the timestamps fall within the time range, we are good\n    // if (\n    //     [job.queuedAt, job.runAt, job.finishAt].some((eventTime) => {\n    //         if (!eventTime) {\n    //             return false;\n    //         }\n    //         return eventTime > timeRangeStart && eventTime < timeRangeEnd;\n    //     })\n    // ) {\n    //     return true;\n    // }\n\n    // // If the timestamps span the time range, we are also good.\n    // if (!job.queuedAt) {\n    //     return false;\n    // }\n    // // if start past the end time, no match.\n    // if (job.queuedAt > timeRangeEnd) {\n    //     return false;\n    // }\n    // // If start after or on start time, then, we have a match.\n    // if (job.queuedAt >= timeRangeStart) {\n    //     return true;\n    // }\n\n    // // Otherwise, the job started (queued) before out time range, but\n    // // there is still hope, maybe it is still queued or started after the\n    // // start date.\n    // if (!job.runAt) {\n    //     // Not run yet, a match.\n    //     return true;\n    // }\n    // // Otherwise, if it starts after the range start, a match\n    // if (job.runAt >= timeRangeStart) {\n    //     return true;\n    // }\n\n    // // Otherwise, yes, there is still hope...\n\n    // // If not finished yet, a match.\n    // if (!job.finishAt) {\n    //     return true;\n    // }\n\n    // // Otherwise, if it finished after the range start, a match\n    // if (job.finishAt >= timeRangeStart) {\n    //     return true;\n    // }\n\n    // return false;\n    return true;\n}\n\nexport function compareStatus(job: Job, jobStatus?: Array<JobStatus>) {\n    if (!jobStatus) {\n        return true;\n    }\n    return jobStatus.some((status) => {\n        return job.status === status;\n    });\n}\n\nexport function calcAverage(total: number, count: number) {\n    if (total) {\n        if (count) {\n            return total / count;\n        } else {\n            return null;\n        }\n    } else {\n        if (count) {\n            return 0;\n        } else {\n            return null;\n        }\n    }\n}\n\nexport function calcRate(part: number, whole: number) {\n    if (part) {\n        if (whole) {\n            return part / whole;\n        } else {\n            return null;\n        }\n    } else {\n        if (whole) {\n            return 0;\n        } else {\n            return null;\n        }\n    }\n}\n\nexport function getTimeRange(preset: TimeRangePresets): [EpochTime, EpochTime] {\n    const hourInMilliseconds = 1000 * 60 * 60;\n    const endDate = new Date().getTime();\n    switch (preset) {\n        case 'lastHour':\n            return [endDate - hourInMilliseconds, endDate];\n        case 'last48Hours':\n            return [endDate - hourInMilliseconds * 24 * 2, endDate];\n        case 'lastWeek':\n            return [endDate - hourInMilliseconds * 24 * 7, endDate];\n        case 'lastMonth':\n            return [endDate - hourInMilliseconds * 24 * 30, endDate];\n    }\n}\n\nexport function extractTimeRange(timeRange: TimeRange): [EpochTime, EpochTime] {\n    switch (timeRange.kind) {\n        case 'preset':\n            return getTimeRange(timeRange.preset);\n        case 'literal':\n            return [timeRange.start, timeRange.end];\n        default:\n            throw new Error('Invalid time range kind value (should be impossible');\n    }\n}\n","import React from 'react';\nimport { Job, JobID, JobStatus } from '../../redux/store';\nimport JobDetailComponent from './view';\nimport { Spin, Alert } from 'antd';\nimport { NarrativeJobServiceClient } from '@kbase/ui-lib';\nimport MetricsServiceClient from '../../lib/MetricsServiceClient';\nimport { serviceJobToUIJob } from '../../redux/actions/utils';\n\nconst POLLING_INTERVAL = 5000;\n\n// A simple state wrapper for job logs.\n\nexport interface JobLogLine {\n    lineNumber: number;\n    line: string;\n    isError: boolean;\n}\nexport type JobLog = Array<JobLogLine>;\n\nexport enum JobLogState {\n    NONE,\n    JOB_QUEUED,\n    INITIAL_LOADING,\n    ACTIVE_LOADED,\n    ACTIVE_LOADING,\n    FINISHED_LOADED,\n    ERROR\n}\n\n// TODO: rename this and other things to JobDetailView...\nexport interface JobLogViewNone {\n    status: JobLogState.NONE\n}\n\nexport interface JobLogViewQueued {\n    status: JobLogState.JOB_QUEUED\n    job: Job\n}\n\nexport interface JobLogViewInitialLoading {\n    status: JobLogState.INITIAL_LOADING\n}\n\nexport interface JobLogViewActiveLoaded {\n    status: JobLogState.ACTIVE_LOADED,\n    log: Array<JobLogLine>;\n    job: Job\n}\n\nexport interface JobLogViewActiveLoading {\n    status: JobLogState.ACTIVE_LOADING,\n    log: Array<JobLogLine>;\n    job: Job\n}\n\nexport interface JobLogViewFinishedLoaded {\n    status: JobLogState.FINISHED_LOADED,\n    log: Array<JobLogLine>;\n    job: Job\n}\n\nexport interface JobLogViewError {\n    status: JobLogState.ERROR,\n    error: string\n}\n\nexport type JobLogView = JobLogViewNone | JobLogViewQueued | JobLogViewInitialLoading | JobLogViewActiveLoaded | JobLogViewActiveLoading | JobLogViewFinishedLoaded | JobLogViewError\n\nexport interface JobLogsStateProps {\n    jobID: JobID;\n    token: string;\n    njsURL: string;\n    serviceWizardURL: string;\n}\n\ntype JobLogsStateState = JobLogView;\n\nexport default class JobLogsState extends React.Component<JobLogsStateProps, JobLogsStateState> {\n    constructor(props: JobLogsStateProps) {\n        super(props);\n\n        this.state = {\n            status: JobLogState.NONE\n        };\n    }\n\n    async getJob(): Promise<Job> {\n        const metricsClient = new MetricsServiceClient({\n            token: this.props.token,\n            url: this.props.serviceWizardURL,\n            // version: 'dev'\n        });\n\n        const job_id = this.props.jobID;\n\n        const job = await metricsClient.getJob({ job_id });\n        return serviceJobToUIJob(job.job_state, 'UNKNOWN');\n    }\n\n    async getJobLog(skipLines: number): Promise<Array<JobLogLine>> {\n        const njsClient = new NarrativeJobServiceClient({\n            token: this.props.token,\n            url: this.props.njsURL,\n            module: 'NarrativeJobService'\n        });\n\n        const [jobLog] = await njsClient.getJobLogs({ job_id: this.props.jobID, skip_lines: skipLines });\n\n        return jobLog.lines.map((line, index) => {\n            return {\n                lineNumber: skipLines + index + 1,\n                line: line.line,\n                isError: line.is_error ? true : false\n            };\n        });\n    }\n\n    // async updateJobLog() {\n    //     const startingLines = this.state.log.length;\n    //     const lines = await this.getJobLog(startingLines);\n    //     this.setState({\n    //         log: {\n    //             isLoaded: this.state.log.isLoaded,\n    //             lines: this.state.log.lines.concat(lines)\n    //         }\n    //     })\n    // }\n\n    startRunningPolling() {\n        const poller = async () => {\n            const state = this.state;\n            if (state.status !== JobLogState.ACTIVE_LOADED) {\n                this.setState({\n                    status: JobLogState.ERROR,\n                    error: 'Invalid state for polling: ' + state.status\n                });\n                return;\n            }\n            const { log } = state;\n            this.setState({\n                status: JobLogState.ACTIVE_LOADING,\n                log\n            });\n            const job = await this.getJob();\n            const startingLines = log.length;\n            const newLog = await this.getJobLog(startingLines);\n            switch (job.status) {\n                case JobStatus.QUEUED:\n                    // should not occur!\n                    this.startQueuedPolling();\n                    break;\n                case JobStatus.RUNNING:\n                    this.setState({\n                        status: JobLogState.ACTIVE_LOADED,\n                        log: log.concat(newLog),\n                        job\n                    });\n                    loop();\n                    break;\n                case JobStatus.FINISHED:\n                case JobStatus.ERRORED_QUEUED:\n                case JobStatus.ERRORED_RUNNING:\n                case JobStatus.CANCELED_RUNNING:\n                case JobStatus.CANCELED_QUEUED:\n                    this.setState({\n                        status: JobLogState.FINISHED_LOADED,\n                        log: log.concat(newLog),\n                        job\n                    });\n            }\n        }\n        const loop = () => {\n            setTimeout(poller, POLLING_INTERVAL);\n        }\n        loop();\n    }\n\n    startQueuedPolling() {\n        const poller = async () => {\n            try {\n                const job = await this.getJob();\n                switch (job.status) {\n                    case JobStatus.QUEUED:\n                        // still queued, eh?\n                        loop();\n                        return;\n                    default:\n                        const log = await this.getJobLog(0);\n                        switch (job.status) {\n                            case JobStatus.RUNNING:\n                                this.setState({\n                                    status: JobLogState.ACTIVE_LOADED,\n                                    log,\n                                    job\n                                });\n                                this.startRunningPolling();\n                                break;\n                            case JobStatus.FINISHED:\n                                // case JobStatus.CANCELED_RUNNING:\n                                this.setState({\n                                    status: JobLogState.FINISHED_LOADED,\n                                    log,\n                                    job\n                                });\n                                break;\n\n                            case JobStatus.CANCELED_QUEUED:\n                            case JobStatus.CANCELED_RUNNING:\n                                this.setState({\n                                    status: JobLogState.FINISHED_LOADED,\n                                    log,\n                                    job\n                                });\n                                break;\n                            case JobStatus.ERRORED_QUEUED:\n                            case JobStatus.ERRORED_RUNNING:\n                                this.setState({\n                                    status: JobLogState.ERROR,\n                                    log,\n                                    job\n                                });\n                                break;\n                        }\n                }\n            } catch (ex) {\n                console.error('ERROR', ex);\n            }\n        }\n\n        const loop = () => {\n            setTimeout(poller, POLLING_INTERVAL);\n        }\n\n        loop();\n    }\n\n    async getInitialJobLog() {\n        this.setState({\n            status: JobLogState.INITIAL_LOADING\n        });\n        const job = await this.getJob();\n        // const log = await this.getJobLog(0);\n\n        let log;\n        switch (job.status) {\n            case JobStatus.QUEUED:\n                // still queued, eh?\n                this.setState({\n                    status: JobLogState.JOB_QUEUED,\n                    job\n                });\n                this.startQueuedPolling();\n                return;\n            case JobStatus.RUNNING:\n                log = await this.getJobLog(0);\n                this.setState({\n                    status: JobLogState.ACTIVE_LOADED,\n                    log,\n                    job\n                });\n                this.startRunningPolling();\n                return;\n            case JobStatus.FINISHED:\n            case JobStatus.ERRORED_QUEUED:\n            case JobStatus.ERRORED_RUNNING:\n            case JobStatus.CANCELED_QUEUED:\n            case JobStatus.CANCELED_RUNNING:\n                log = await this.getJobLog(0);\n                this.setState({\n                    status: JobLogState.FINISHED_LOADED,\n                    log,\n                    job\n                });\n                return;\n        }\n    }\n\n    componentDidMount() {\n        this.getInitialJobLog();\n    }\n\n    renderLoading() {\n        return (\n            <div>\n                Loading ... <Spin />\n            </div>\n        );\n    }\n\n    renderQueued() {\n        return (\n            <div>\n                Queued ... <Spin />\n            </div>\n        );\n    }\n\n    renderError(view: JobLogViewError) {\n        return (\n            <Alert type=\"error\" message={view.error} />\n        )\n    }\n\n    render() {\n        return <JobDetailComponent view={this.state} />;\n    }\n}\n","import { Dispatch, Action } from 'redux';\nimport { connect } from 'react-redux';\nimport JobLogState from './state';\nimport { StoreState } from '../../redux/store';\n\nexport interface OwnProps {\n}\n\ninterface StateProps {\n    token: string;\n    njsURL: string;\n    serviceWizardURL: string;\n}\n\ninterface DispatchProps { }\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        app: {\n            config: {\n                services: {\n                    NarrativeJobService: { url: njsURL },\n                    ServiceWizard: { url: serviceWizardURL }\n                }\n            }\n        }\n    } = state;\n\n    let token;\n    if (!userAuthorization) {\n        throw new Error('Invalid state: token required');\n    } else {\n        token = userAuthorization.token;\n    }\n\n    return { token, njsURL, serviceWizardURL };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {};\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(JobLogState);\n","import PubSub, { PubSubProxy } from \"./PubSub\";\n\n// const MONITORING_INTERVAL = 10000;\n// const MONITORING_FEEDBACK_STEPS = 100;\n// const WATCH_INTERVAL = 100;\n\nconst POLLING_TIMEOUT = 10000;\n\nexport interface PollerParams {\n    // callback to trigger a polling action, whatever that is.\n    onPoll: () => void,\n    // callback for progress\n    onProgress: (progress: number) => void,\n    pubsub: PubSub,\n    progressSteps: number,\n    pollInterval: number,\n    watchInterval: number\n}\n\nexport enum PollerState {\n    STARTED,\n    POLLING,\n    WAITING,\n    PAUSED,\n    STOPPED,\n    ERROR\n}\n\nexport class Poller {\n    params: PollerParams;\n\n    statusTimer: number | null;\n    statusCount: number;\n\n    watchStartAt: number;\n    status: PollerState;\n    // isPollerRunning: boolean;\n    // isPollerPaused: boolean;\n    error: string;\n\n    watcherTimer: number | null;\n    waitTimer: number | null;\n\n    pubsubProxy: PubSubProxy;\n\n    constructor(params: PollerParams) {\n        this.params = params;\n\n        this.statusTimer = null;\n        this.statusCount = 0;\n\n        this.watchStartAt = 0;\n        // this.isPollerRunning = false;\n        // this.isPollerPaused = true;\n        this.status = PollerState.STOPPED;\n\n        this.watcherTimer = null;\n\n        this.waitTimer = null\n\n        this.pubsubProxy = new PubSubProxy(this.params.pubsub);\n        this.error = '';\n\n    }\n\n    stop() {\n        this.pubsubProxy.off();\n    }\n\n    pause() {\n        this.status = PollerState.PAUSED;\n\n        if (this.waitTimer) {\n            window.clearInterval(this.waitTimer);\n        }\n        if (this.statusTimer) {\n            window.clearInterval(this.statusTimer);\n        }\n        if (this.watcherTimer) {\n            window.clearTimeout(this.watcherTimer);\n        }\n\n        this.statusCount = 0;\n        this.updateOnProgress();\n    }\n\n    play() {\n        this.startWaiting();\n    }\n\n    startWatching() {\n        this.watchStartAt = Date.now();\n        this.status = PollerState.STARTED;\n\n        const pollWatch = () => {\n            const elapsed = Date.now() - this.watchStartAt;\n            if (elapsed > POLLING_TIMEOUT) {\n                this.status = PollerState.ERROR;\n                this.error = `Polling took too long (${elapsed}ms)`\n                this.stopPolling();\n                return;\n            }\n\n            switch (this.status) {\n                // case PollerState.NONE:\n                //     console.error('Error: Invalid state NONE');\n                //     this.stopPolling();\n                //     break;\n                case PollerState.STARTED:\n                case PollerState.POLLING:\n                    pollWatcherLoop();\n                    return;\n                case PollerState.WAITING:\n                    if (this.watcherTimer) {\n                        window.clearTimeout(this.watcherTimer);\n                    }\n                    this.status = PollerState.WAITING;\n                    this.startWaiting();\n                    break;\n                case PollerState.STOPPED:\n                    pollWatcherLoop();\n                    break;\n                case PollerState.PAUSED:\n                    console.warn('unexpected state PAUSED');\n                    // nothing to do\n                    break;\n                case PollerState.ERROR:\n                    console.warn('unexpected state ERROR');\n                    break;\n            }\n        }\n        const pollWatcherLoop = () => {\n            this.watcherTimer = window.setTimeout(pollWatch, this.params.watchInterval);\n        }\n\n        pollWatcherLoop();\n    }\n\n    startWaiting() {\n        this.status = PollerState.WAITING;\n        // Here we enter a loop to pause until the next polling event.\n        const pollWaitLoop = () => {\n            // This will fire another polling request after the interval passes,\n            // via a timeout.\n            this.waitTimer = window.setTimeout(this.runPoll.bind(this), this.params.pollInterval);\n            this.statusCount = 0;\n            pollWaitProgressLoop();\n        }\n\n        // This interval timer is for animating the progress bar.\n        // It is an interval which should run for the same period that the poll\n        // waiter above does, but in steps defined by MONITORING_FEEDBACK_STEPS.\n        const pollWaitProgressLoop = () => {\n            this.statusTimer = window.setInterval(() => {\n                this.statusCount += 1;\n                this.updateOnProgress();\n            }, this.params.pollInterval / this.params.progressSteps);\n        }\n\n        pollWaitLoop()\n    }\n\n    runPoll() {\n        if (this.statusTimer) {\n            window.clearInterval(this.statusTimer);\n        }\n\n        this.params.onPoll();\n        this.statusCount = 0;\n        this.startWatching();\n    }\n\n    startListeningForPollingEvent() {\n        this.pubsubProxy.on('searching', ({ is }) => {\n            if (is) {\n                switch (this.status) {\n                    // case PollerState.NONE:\n                    //     // Should not occur, but move into polling state.\n                    //     this.status = PollerState.POLLING;\n                    case PollerState.STARTED:\n                        // this is where we move into the polling state!\n                        this.status = PollerState.POLLING;\n                        break;\n                    case PollerState.POLLING:\n                        // hmm, if a polling event ('searching' for now) comes in,\n                        // and we are already polling, this is weird, but lets stay\n                        // in the polling state.\n                        break;\n                    case PollerState.WAITING:\n                        this.pause();\n                        break;\n                    case PollerState.STOPPED:\n                        break;\n                    case PollerState.PAUSED:\n                        // nothing to do\n                        break;\n                    case PollerState.ERROR:\n                        break;\n                }\n            } else {\n                switch (this.status) {\n                    // case PollerState.NONE:\n                    //     break;\n                    case PollerState.STARTED:\n                        break;\n                    case PollerState.POLLING:\n                        this.status = PollerState.WAITING;\n                        break;\n                    case PollerState.WAITING:\n                        break;\n                    case PollerState.STOPPED:\n                        break;\n                    case PollerState.PAUSED:\n                        // this.status = this.play();;\n                        // nothing to do\n                        this.play();\n                        break;\n                    case PollerState.ERROR:\n                        break;\n                }\n            }\n        });\n    }\n\n    stopListeningForPollingEvent() {\n        this.pubsubProxy.off();\n    }\n\n    startPolling() {\n        this.startListeningForPollingEvent();\n        this.runPoll();\n    }\n\n    updateOnProgress() {\n        this.params.onProgress(100 * this.statusCount / this.params.progressSteps);\n    }\n\n    stopPolling() {\n        if (this.waitTimer) {\n            window.clearInterval(this.waitTimer);\n        }\n        if (this.statusTimer) {\n            window.clearInterval(this.statusTimer);\n        }\n        if (this.watcherTimer) {\n            window.clearTimeout(this.watcherTimer);\n        }\n\n        this.statusCount = 0;\n        this.updateOnProgress();\n        this.stopListeningForPollingEvent();\n    }\n\n}","import uuid from 'uuid';\n\nexport interface SubscriptionDefinition {\n    channel: string | null;\n    message: string;\n}\n\nexport interface Subscription {\n    id: string,\n    channelName: string,\n    messageName: string\n}\n\nexport interface Channel {\n    messages: Map<string, MessageListener>\n}\n\n// export interface Listener {\n\n// }\n\nexport interface PublishDefinition {\n    channel: string;\n    message: string;\n\n}\n\nexport interface Payload { }\n\nexport interface Message {\n    id: MessageID,\n    payload: any\n}\n\nconst SEND_WINDOW = 1000 / 60;\n\n// Listen for message T\nexport interface Listener {\n    id: string;\n    messageID: MessageID;\n    handler: (message: Message) => void\n}\n\nexport interface MessageListener {\n    listeners: Array<Listener>;\n}\n\nexport type MessageID = string;\n\nexport class PubSubProxy {\n    subscriptions: Array<string>;\n    pubsub: PubSub;\n\n    constructor(pubsub: PubSub) {\n        this.subscriptions = [];\n        this.pubsub = pubsub;\n    }\n\n    on(messageID: string, handler: (payload: any) => void) {\n        const id = this.pubsub.on(messageID, handler);\n        this.subscriptions.push(id);\n    }\n\n    off() {\n        this.subscriptions.forEach((id) => {\n            this.pubsub.off(id);\n        })\n    }\n}\n\nexport default class PubSub {\n    sendQueue: Array<Message>\n    messageListeners: Map<MessageID, MessageListener>\n    allListeners: Map<string, Listener>\n    constructor() {\n        this.sendQueue = [];\n        this.messageListeners = new Map<MessageID, MessageListener>();\n        this.allListeners = new Map<string, Listener>();\n    }\n\n    private sendMessages() {\n        const queue = this.sendQueue;\n        this.sendQueue = [];\n        queue.forEach((message: Message) => {\n            const messageListener = this.messageListeners.get(message.id);\n            if (!messageListener) {\n                return;\n            }\n            messageListener.listeners.forEach((listener: Listener) => {\n                try {\n                    listener.handler(message.payload);\n                } catch (ex) {\n                    console.error('ERROR', ex);\n                }\n            });\n        });\n    }\n\n    private processQueue() {\n        if (this.sendQueue.length === 0) {\n            return;\n        }\n        window.setTimeout(() => {\n            this.sendMessages();\n        }, SEND_WINDOW)\n    }\n\n    send<T>(messageID: string, payload: any) {\n        const message: Message = {\n            id: messageID,\n            payload\n        }\n        this.sendQueue.push(message);\n        this.processQueue();\n    }\n\n    on(messageID: string, handler: (m: Message) => void): string {\n        let messageListener = this.messageListeners.get(messageID);\n        if (!messageListener) {\n            messageListener = {\n                listeners: []\n            }\n            this.messageListeners.set(messageID, messageListener);\n        }\n        const id = uuid.v4();\n        const listener = {\n            id, messageID, handler\n        }\n        messageListener.listeners.push(listener);\n        this.allListeners.set(id, listener);\n        return id;\n    }\n\n    off(id: string) {\n        const listener = this.allListeners.get(id);\n        if (!listener) {\n            return;\n        }\n        const messageListener = this.messageListeners.get(listener.messageID);\n        if (!messageListener) {\n            return;\n        }\n        messageListener.listeners = messageListener.listeners.filter((l) => {\n            return l.id !== listener.id\n        })\n    }\n}","import * as React from 'react';\nimport { Progress, Button, Tooltip, Switch } from 'antd';\nimport PubSub, { PubSubProxy } from '../lib/PubSub';\nimport { Poller } from '../lib/Poller';\n\nconst MONITORING_INTERVAL = 10000;\nconst MONITORING_FEEDBACK_STEPS = 100;\nconst WATCH_INTERVAL = 100;\n\nexport interface MonitorProps {\n    showControls: boolean;\n    startPolling: boolean;\n    startOpen: boolean;\n    isPollerRunning: boolean;\n    pubsub: PubSub;\n    onPoll: () => void;\n}\n\nexport interface MonitorState {\n    /** Support for job monitoring */\n    isMonitoring: boolean;\n\n    /**  */\n    isPollingInitiated: boolean;\n    pollingStartedAt: number;\n\n    /** Monitoring progress */\n    // monitoringStatusCount: number;\n    pollWaitProgress: number;\n\n    isPolling: boolean;\n\n    isOpen: boolean;\n}\n\nexport default class Monitor extends React.Component<MonitorProps, MonitorState> {\n    monitoringTimer: number | null;\n    monitoringStatusTimer: number | null;\n    pollWatcherTimer: number | null;\n    searchListenerID: string | null;\n    pubsubProxy: PubSubProxy;\n\n    poller: Poller;\n\n    constructor(props: MonitorProps) {\n        super(props);\n\n        this.monitoringTimer = null;\n        this.monitoringStatusTimer = null;\n        this.pollWatcherTimer = null;\n        this.searchListenerID = null;\n        this.pubsubProxy = new PubSubProxy(this.props.pubsub);\n\n        this.poller = new Poller({\n            onPoll: this.props.onPoll,\n            onProgress: this.onProgress.bind(this),\n            pubsub: this.props.pubsub,\n            pollInterval: MONITORING_INTERVAL,\n            progressSteps: MONITORING_FEEDBACK_STEPS,\n            watchInterval: WATCH_INTERVAL\n        })\n\n        this.state = {\n            isMonitoring: false,\n            // monitoringStatusCount: 0,\n            pollWaitProgress: 0,\n            isPollingInitiated: false,\n            pollingStartedAt: 0,\n            isPolling: false,\n            isOpen: this.props.startOpen\n        };\n    }\n\n    onProgress(progress: number) {\n        this.setState({\n            pollWaitProgress: progress\n        })\n    }\n\n    componentDidMount() {\n        if (this.props.startPolling) {\n            this.startMonitoring();\n        }\n        this.pubsubProxy.on('searching', ({ is }) => {\n            if (is) {\n                this.setState({\n                    isPolling: true\n                });\n                // this.poller.stopPolling();\n            } else {\n                this.setState({\n                    isPolling: false\n                });\n                // this.poller.startPolling();\n            }\n        })\n        // this.searchListenerID = this.props.pubsub.on(\n        //     'search',\n        //     () => {\n        //         //this.resetMonitoring();\n        //         console.log('skipping the search reset...');\n        //     }\n        // )\n    }\n\n    componentWillUnmount() {\n        this.stopMonitoring();\n        this.poller.stop();\n        this.pubsubProxy.off();\n    }\n\n    componentDidUpdate() {\n\n    }\n\n    startMonitoring() {\n        this.setState({\n            isMonitoring: true\n        });\n        this.poller.startPolling();\n    }\n\n    // resetMonitoring() {\n    //     if (!this.state.isMonitoring) {\n    //         return;\n    //     }\n\n    //     // If waiting for a poll, do nothing.\n    //     if (!this.state.isPolling) {\n    //         return;\n    //     }\n\n    //     // If waiting to poll again, our only possible other state,\n    //     // restart the timers.\n    //     // clear the timers\n    //     this.poller.stopPolling();\n\n    //     // reset the count.\n    //     this.poller.startPolling();\n    // }\n\n    stopMonitoring() {\n        this.poller.stopPolling();\n        this.setState({\n            isMonitoring: false\n        });\n    }\n\n    toggleMonitoring() {\n        if (this.state.isMonitoring) {\n            this.stopMonitoring();\n        } else {\n            this.startMonitoring();\n        }\n    }\n\n    onToggleOpen(isOpen: boolean) {\n        this.setState({ isOpen });\n    }\n\n    render() {\n        if (!this.props.showControls) {\n            return null;\n        }\n        let monitoringStatus;\n        let label = 'Start Polling';\n        let buttonType: 'default' | 'danger' = 'default';\n        // let opener;\n        // let openerStyle: React.CSSProperties = {};\n        // if (this.state.isMonitoring) {\n        //     openerStyle.color = 'red';\n        // }\n        // if (!this.state.isOpen) {\n        //     opener = <Tooltip title=\"Open the monitor\">\n        //         <Button type=\"link\" icon=\"sync\" onClick={this.onToggleOpen.bind(this)} style={openerStyle} />\n        //     </Tooltip>\n        // } else {\n        //     openerStyle.backgroundColor = 'rgba(200, 200, 200, 0.3)';\n        //     opener = <Tooltip title=\"Close the monitor\">\n        //         <Button type=\"link\" icon=\"sync\" onClick={this.onToggleOpen.bind(this)} style={openerStyle} />\n        //     </Tooltip>\n        // }\n        const opener = (\n            <Switch\n                defaultChecked={this.state.isOpen}\n                checkedChildren=\"hide monitor\"\n                unCheckedChildren=\"show monitor\"\n                onChange={this.onToggleOpen.bind(this)} />\n        );\n\n        if (this.state.isMonitoring) {\n            label = 'Stop Polling';\n            buttonType = 'danger';\n            if (!this.state.isPolling) {\n                monitoringStatus = (\n                    <span>\n                        {' '}\n                        <Progress type=\"circle\" percent={this.state.pollWaitProgress} width={30} strokeWidth={30} showInfo={false} />\n                    </span>\n                );\n            } else {\n                monitoringStatus = (\n                    <span>\n                        {' '}<Progress type=\"circle\" percent={100} width={30} showInfo={false} strokeWidth={30} strokeColor={'orange'} />\n                    </span>\n                )\n            }\n            // } else {\n            //     const spinnerIcon = <Icon type=\"loading\" style={{ fontSize: '1em', color: 'orange' }} spin />;\n            //     monitoringStatus = (\n            //         <span>\n            //             {' '}<Spin size=\"small\" indicator={spinnerIcon} />\n            //         </span>\n            //     )\n            // }\n        }\n        let title;\n        if (this.state.isMonitoring) {\n            title = `Polling is running, with an interval of ${MONITORING_INTERVAL}ms and ${MONITORING_FEEDBACK_STEPS} update steps.`\n        } else {\n            title = 'Polling is currently stopped.';\n        }\n        let monitor;\n        if (this.state.isOpen) {\n            monitor = <Tooltip title={title}>\n                <Button onClick={this.toggleMonitoring.bind(this)} type={buttonType} size=\"small\" style={{ fontSize: \"80%\" }}>\n                    {label}\n                </Button>\n                {monitoringStatus}\n            </Tooltip>\n        }\n        return (\n            <span>\n                {opener}\n                {' '}\n                {monitor}\n            </span>\n        );\n    }\n}\n","/**\n * A component for browsing through (search, filter, sort) jobs submitted by\n * the current user.\n */\n\n// 3rd party imports\nimport React from 'react';\nimport { CheckboxValueType } from 'antd/lib/checkbox/Group';\nimport { CheckboxChangeEvent } from 'antd/lib/checkbox';\nimport { Table, Form, Input, Button, Checkbox, Select, DatePicker, Popconfirm, Tooltip, Modal, Switch } from 'antd';\nimport moment, { Moment } from 'moment';\nimport JobStatusBadge from '../JobStatus'\n\n// project imports (should be shared lib)\nimport { NiceRelativeTime, NiceElapsedTime } from '@kbase/ui-components';\n\n// project imports\nimport { Job, JobStatus, JobsSearchExpression, SearchState, TimeRange, TimeRangePresets, TimeRangeLiteral, SortSpec } from '../../redux/store';\nimport JobDetail from '../JobDetail';\n\n// file imports\nimport './style.css';\nimport Monitor from '../Monitor';\nimport PubSub from '../../lib/PubSub';\nimport { PaginationConfig } from 'antd/lib/table';\n\n/*\n    Props and State\n*/\n\ntype JobStatusFilterKey = 'queued' | 'running' | 'canceled' | 'success' | 'error';\n\ninterface JobStatusFilterOption {\n    label: string;\n    value: JobStatusFilterKey;\n}\n\nconst jobStatusFilterOptions: Array<JobStatusFilterOption> = [\n    {\n        label: 'Queued',\n        value: 'queued'\n    },\n    {\n        label: 'Running',\n        value: 'running'\n    },\n    {\n        label: 'Canceled',\n        value: 'canceled'\n    },\n    {\n        label: 'Success',\n        value: 'success'\n    },\n    {\n        label: 'Error',\n        value: 'error'\n    }\n];\n\nfunction jobStatusFilterOptionsToJobStatus(filter: Array<JobStatusFilterKey>): Array<JobStatus> {\n    let jobStatuses: Array<JobStatus> = [];\n    filter.forEach((status) => {\n        switch (status) {\n            case 'queued':\n                jobStatuses.push(JobStatus.QUEUED);\n                break;\n            case 'running':\n                jobStatuses.push(JobStatus.RUNNING);\n                break;\n            case 'canceled':\n                jobStatuses.push(JobStatus.CANCELED_QUEUED);\n                jobStatuses.push(JobStatus.CANCELED_RUNNING);\n                break;\n            case 'success':\n                jobStatuses.push(JobStatus.FINISHED);\n                break;\n            case 'error':\n                jobStatuses.push(JobStatus.ERRORED_QUEUED);\n                jobStatuses.push(JobStatus.ERRORED_RUNNING);\n                break;\n        }\n    });\n    return jobStatuses;\n}\n\nexport interface UserJobsProps {\n    jobs: Array<Job>;\n    searchState: SearchState;\n    showMonitoringControls: boolean;\n    search: (searchExpression: JobsSearchExpression) => void;\n    cancelJob: (jobID: string) => void;\n}\n\ninterface UserJobsState {\n    showDates: boolean;\n    currentJobStatusFilter: Array<JobStatusFilterKey>;\n    timeRange: TimeRange;\n    isFilterOpen: boolean;\n    selectedJob: Job | null;\n    currentSort: SortSpec | null;\n}\n\nexport default class UserJobs extends React.Component<UserJobsProps, UserJobsState> {\n    currentQuery?: string;\n\n    static defaultTimeRange: TimeRangePresets = 'last48Hours';\n    pubsub: PubSub;\n\n    constructor(props: UserJobsProps) {\n        super(props);\n\n        this.currentQuery = '';\n        this.pubsub = new PubSub();\n\n        this.state = {\n            showDates: false,\n            currentJobStatusFilter: ['queued', 'running', 'canceled', 'success', 'error'],\n            timeRange: { kind: 'preset', preset: UserJobs.defaultTimeRange },\n            isFilterOpen: false,\n            selectedJob: null,\n            currentSort: null\n        };\n    }\n\n    componentDidMount() {\n        this.doSearch(true);\n    }\n\n    componentDidUpdate() {\n        if (this.props.searchState === SearchState.SEARCHING) {\n            this.pubsub.send('searching', { is: true })\n        } else {\n            this.pubsub.send('searching', { is: false })\n        }\n    }\n\n    onChangeTimeRange(value: string) {\n        // TODO: should narrow the string value\n        if (value === 'customRange') {\n            this.setState({\n                showDates: true,\n                timeRange: { kind: 'literal', start: Date.now(), end: Date.now() }\n            });\n            // nothing else to do.\n            return;\n        } else {\n            this.setState(\n                {\n                    showDates: false,\n                    timeRange: { kind: 'preset', preset: value as TimeRangePresets }\n                },\n                () => {\n                    this.doSearch(true);\n                }\n            );\n        }\n    }\n\n    onChangeQuery(event: React.ChangeEvent<HTMLInputElement>) {\n        this.currentQuery = event.target.value;\n    }\n\n    onSubmit(event: React.FormEvent) {\n        event.preventDefault();\n        this.doSearch(true);\n    }\n\n    doSearch(forceSearch: boolean) {\n        if (typeof this.currentQuery === 'undefined') {\n            return;\n        }\n\n        const jobStatusFilter = jobStatusFilterOptionsToJobStatus(this.state.currentJobStatusFilter);\n\n        const searchExpression: JobsSearchExpression = {\n            query: this.currentQuery,\n            timeRange: this.state.timeRange,\n            jobStatus: jobStatusFilter,\n            forceSearch,\n            sort: this.state.currentSort\n        };\n\n        this.pubsub.send('search', {});\n\n        this.props.search(searchExpression);\n        return false;\n    }\n\n    onRangeFromChange(date: Moment | null, dateString: string) {\n        // TODO: if the range ends up null (how?), should it default\n        // to the previously selected preset? For now, just go back to lastHourl.\n        if (date === null) {\n            this.setState({\n                timeRange: {\n                    kind: 'preset',\n                    preset: 'lastHour'\n                }\n            });\n            return;\n        }\n\n        // handle logic of switching from 'preset' to 'literal'\n        let existingTimeRange = this.state.timeRange;\n        let timeRange: TimeRange;\n        switch (existingTimeRange.kind) {\n            case 'preset':\n                timeRange = {\n                    kind: 'literal',\n                    start: date.valueOf(),\n                    end: Infinity\n                };\n                break;\n            case 'literal':\n                timeRange = {\n                    kind: 'literal',\n                    start: date.valueOf(),\n                    end: existingTimeRange.end\n                };\n                break;\n            default:\n                return;\n        }\n\n        this.setState({\n            timeRange\n        });\n    }\n\n    onRangeToChange(date: Moment | null, dateString: string) {\n        // TODO: if the range ends up null (how?), should it default\n        // to the previously selected preset? For now, just go back to lastHourl.\n        if (date === null) {\n            this.setState({\n                timeRange: {\n                    kind: 'preset',\n                    preset: 'lastHour'\n                }\n            });\n            return;\n        }\n        let existingTimeRange = this.state.timeRange;\n        let timeRange: TimeRange;\n        switch (existingTimeRange.kind) {\n            case 'preset':\n                timeRange = {\n                    kind: 'literal',\n                    start: Infinity,\n                    end: date.valueOf()\n                };\n                break;\n            case 'literal':\n                timeRange = {\n                    kind: 'literal',\n                    start: existingTimeRange.start,\n                    end: date.valueOf()\n                };\n                break;\n            default:\n                return;\n        }\n\n        this.setState({\n            timeRange\n        });\n    }\n\n    renderJobAction(job: Job) {\n        switch (job.status) {\n            case JobStatus.QUEUED:\n            case JobStatus.RUNNING:\n                return (\n                    <Popconfirm\n                        title=\"Cancel this job?\"\n                        onConfirm={() => {\n                            this.props.cancelJob(job.id);\n                        }}\n                        okText=\"Yes\"\n                        cancelText=\"No\"\n                    >\n                        <Button icon=\"close\" type=\"danger\" size=\"small\" />\n                    </Popconfirm>\n                );\n            default:\n                return;\n        }\n    }\n\n    renderTimeRangeSelectionControl() {\n        return <Select\n            defaultValue={UserJobs.defaultTimeRange}\n            onChange={this.onChangeTimeRange.bind(this)}\n            dropdownMatchSelectWidth={true}\n            style={{ width: '11em' }}\n        >\n            <Select.Option value=\"lastHour\">Previous Hour</Select.Option>\n            <Select.Option value=\"last48Hours\">Previous 48 Hours</Select.Option>\n            <Select.Option value=\"lastWeek\">Previous Week</Select.Option>\n            <Select.Option value=\"lastMonth\">Previous Month</Select.Option>\n            <Select.Option value=\"customRange\">Custom Range</Select.Option>\n        </Select>;\n    }\n\n    renderTimeRangeControl(timeRange: TimeRangeLiteral) {\n        return <React.Fragment>\n            <Form.Item label=\"From\">\n                <DatePicker\n                    showTime={true}\n                    allowClear={false}\n                    value={moment(timeRange.start)}\n                    onChange={this.onRangeFromChange.bind(this)}\n                />\n            </Form.Item>\n            <Form.Item label=\"To\">\n                <DatePicker\n                    showTime={true}\n                    allowClear={false}\n                    value={moment(timeRange.end)}\n                    onChange={this.onRangeToChange.bind(this)}\n                />\n            </Form.Item>\n        </React.Fragment>\n    }\n\n    renderSearchInput() {\n        let dateControls;\n        if (this.state.showDates) {\n            const timeRange = this.state.timeRange;\n            if (timeRange.kind === 'literal') {\n                dateControls = this.renderTimeRangeControl(timeRange);\n            }\n        }\n        return (\n            <Form layout=\"inline\" onSubmit={this.onSubmit.bind(this)}>\n                <Form.Item>\n                    <Input\n                        defaultValue={this.currentQuery}\n                        placeholder=\"Search jobs\"\n                        style={{ width: '15em' }}\n                        onChange={this.onChangeQuery.bind(this)}\n                    />\n                </Form.Item>\n\n                <Form.Item label=\"TimeRange\" />\n                <Form.Item>\n                    {this.renderTimeRangeSelectionControl()}\n                </Form.Item>\n\n                {dateControls}\n\n                <Form.Item>\n                    <Button icon=\"search\" type=\"primary\" htmlType=\"submit\" />\n                </Form.Item>\n\n                <Form.Item>\n                    <Switch checkedChildren=\"hide filters\" unCheckedChildren=\"show filters\" onChange={this.onToggleFilterArea.bind(this)} />\n                </Form.Item>\n\n                <Form.Item>\n                    <Monitor\n                        onPoll={() => {\n                            this.doSearch(true);\n                        }}\n                        pubsub={this.pubsub}\n                        startPolling={true}\n                        isPollerRunning={this.props.searchState === SearchState.SEARCHING}\n                        showControls={this.props.showMonitoringControls}\n                        startOpen={true}\n                    />\n                </Form.Item>\n            </Form>\n        );\n    }\n\n    onToggleFilterArea(isFilterOpen: boolean) {\n        this.setState({ isFilterOpen });\n    }\n\n    onFilterChange(filters: Array<CheckboxValueType>) {\n        const filter = filters as Array<JobStatusFilterKey>;\n\n        this.setState(\n            {\n                currentJobStatusFilter: filter\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    onChangeJobStatusAny(event: CheckboxChangeEvent) {\n        if (event.target.checked) {\n            this.setState(\n                {\n                    currentJobStatusFilter: ['queued', 'running', 'canceled', 'success', 'error']\n                },\n                () => {\n                    this.doSearch(false);\n                }\n            );\n        }\n    }\n\n    onClickAny() {\n        this.setState(\n            {\n                currentJobStatusFilter: ['queued', 'running', 'canceled', 'success', 'error']\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    onClickFinished() {\n        this.setState(\n            {\n                currentJobStatusFilter: ['canceled', 'success', 'error']\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    onClickActive() {\n        this.setState(\n            {\n                currentJobStatusFilter: ['queued', 'running']\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    renderFilterInput() {\n        const options = jobStatusFilterOptions;\n        return (\n            <div className=\"UserJobs-filterArea\">\n                <span style={{ color: 'gray', fontWeight: 'bold', marginRight: '10px' }}>Filter by Job Status</span>\n                <Button size=\"small\" onClick={this.onClickAny.bind(this)}>\n                    <i>Any</i>\n                </Button>{' '}\n                <Button size=\"small\" onClick={this.onClickActive.bind(this)}>\n                    <i>Active</i>\n                </Button>{' '}\n                <Button size=\"small\" onClick={this.onClickFinished.bind(this)} style={{ marginRight: '10px' }}>\n                    <i>Finished</i>\n                </Button>\n                <Checkbox.Group\n                    options={options}\n                    onChange={this.onFilterChange.bind(this)}\n                    value={this.state.currentJobStatusFilter}\n                />\n            </div>\n        );\n    }\n\n    renderControlBar() {\n        let filterRowStyle: React.CSSProperties = { margin: '10px 10px 10px 0' };\n        if (!this.state.isFilterOpen) {\n            filterRowStyle.display = 'none';\n        }\n        let filterRow;\n        if (this.state.isFilterOpen) {\n            filterRow = <div className=\"Row\" style={filterRowStyle}>\n                {this.renderFilterInput()}\n            </div>\n        }\n        return (\n            <div className=\"Col\">\n                <div className=\"Row\">{this.renderSearchInput()}</div>\n                {filterRow}\n            </div>\n        );\n    }\n\n    onClickDetail(job: Job) {\n        this.setState({\n            selectedJob: job\n        });\n    }\n\n    onCloseModal() {\n        this.setState({\n            selectedJob: null\n        });\n    }\n\n    renderJobDetail() {\n        if (!this.state.selectedJob) {\n            return;\n        }\n        const footer = (\n            <Button key=\"cancel\" onClick={this.onCloseModal.bind(this)}>\n                Close\n            </Button>\n        )\n        const title = (\n            <span>\n                Detail for Job <span style={{ fontFamily: 'monospace', fontWeight: 'bold' }}>{this.state.selectedJob.id}</span>\n            </span>\n        )\n        return (\n            <Modal className=\"FullScreenModal\" title={title}\n                onCancel={this.onCloseModal.bind(this)} visible={true}\n                footer={footer}>\n                <JobDetail jobID={this.state.selectedJob.id} />\n            </Modal>\n        )\n    }\n\n    onTableChanged(pagination: PaginationConfig, filters: any, sorter: any) {\n        console.log('table changed', pagination, filters, sorter);\n        this.setState(\n            {\n                currentSort: {\n                    field: sorter.field,\n                    direction: sorter.order === 'ascend' ? 'ascending' : 'descending'\n                }\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    renderJobsTable() {\n        const loading = this.props.searchState === SearchState.SEARCHING;\n        return (\n            <Table\n                size=\"small\"\n                className=\"UserJobs-table xScrollingFlexTable\"\n                dataSource={this.props.jobs}\n                loading={loading}\n                rowKey={(job: Job) => {\n                    return job.id;\n                }}\n                pagination={{ position: 'bottom', showSizeChanger: true }}\n                onChange={this.onTableChanged.bind(this)}\n            // pagination={false}\n            // scroll={{ y: '100%' }}\n\n            >\n                <Table.Column\n                    title=\"ID\"\n                    dataIndex=\"id\"\n                    key=\"id\"\n                    width=\"8%\"\n                    render={(jobID: string, job: Job): any => {\n                        const title = jobID;\n                        return (\n                            <Tooltip title={title}>\n                                <a href=\"https://example.com\" onClick={(e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n                                    e.preventDefault();\n                                    this.onClickDetail(job)\n                                }}>{jobID}</a>\n                            </Tooltip>\n                        )\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     return a.id.localeCompare(b.id);\n                // }}\n                />\n                <Table.Column\n                    title=\"User\"\n                    dataIndex=\"username\"\n                    key=\"username\"\n                    width=\"10%\"\n                    render={(username: string) => {\n                        return (\n                            <a href={`#people/${username}`} target=\"_parent\">\n                                {username}\n                            </a>\n                        );\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     return a.username.localeCompare(b.username);\n                // }}\n                />\n                <Table.Column\n                    title=\"Narrative\"\n                    dataIndex=\"narrativeTitle\"\n                    key=\"narrativeTitle\"\n                    width=\"17%\"\n                    render={(title: string, job: Job): any => {\n                        if (!title || !job.narrativeID) {\n                            return 'n/a';\n                        }\n                        const href = ['/narrative', job.narrativeID].join('/');\n                        return (\n                            <Tooltip title={title}>\n                                <a href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n                                    {title}\n                                </a>\n                            </Tooltip>\n                        );\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     if (!a.narrativeTitle) {\n                //         if (!b.narrativeTitle) {\n                //             return 0;\n                //         }\n                //         return -1;\n                //     } else {\n                //         if (!b.narrativeTitle) {\n                //             return 1;\n                //         }\n                //         return a.narrativeTitle.localeCompare(b.narrativeTitle);\n                //     }\n                // }}\n                />\n                <Table.Column\n                    title=\"App\"\n                    dataIndex=\"appTitle\"\n                    key=\"appTitle\"\n                    width=\"18%\"\n                    // style={cellStyle}\n                    render={(title: string, job: Job): any => {\n                        if (!title) {\n                            return 'n/a';\n                        }\n                        const href = '/#catalog/apps/' + job.appID;\n                        return (\n                            <Tooltip title={title}>\n                                <a href={href} target=\"_parent\">\n                                    {title}\n                                </a>\n                            </Tooltip>\n                        );\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     if (!a.appTitle) {\n                //         if (!b.appTitle) {\n                //             return 0;\n                //         }\n                //         return -1;\n                //     } else {\n                //         if (!b.appTitle) {\n                //             return 1;\n                //         }\n                //         return a.appTitle.localeCompare(b.appTitle);\n                //     }\n                // }}\n                />\n                <Table.Column\n                    title=\"Submitted\"\n                    dataIndex=\"queuedAt\"\n                    key=\"queuedAt\"\n                    width=\"8%\"\n                    render={(date: number, job: Job) => {\n                        if (!date) {\n                            return <span>** empty **</span>;\n                        }\n                        return <NiceRelativeTime time={new Date(date)} />;\n                    }}\n                    defaultSortOrder=\"descend\"\n                    sorter={true}\n                // sorter={(a: Job, b: Job) => {\n                //     if (a.queuedAt === null) {\n                //         if (b.queuedAt === null) {\n                //             return 0;\n                //         }\n                //         return -1;\n                //     } else {\n                //         if (b.queuedAt === null) {\n                //             return 1;\n                //         }\n                //         return a.queuedAt - b.queuedAt;\n                //     }\n                // }}\n                />\n                <Table.Column\n                    title=\"Queued\"\n                    dataIndex=\"queuedElapsed\"\n                    key=\"queuedElapsed\"\n                    width=\"10%\"\n                    render={(_, job: Job) => {\n                        switch (job.status) {\n                            case JobStatus.QUEUED:\n                            case JobStatus.ERRORED_QUEUED:\n                            case JobStatus.CANCELED_QUEUED:\n                                return <NiceElapsedTime from={job.queuedAt} precision={2} useClock={true} />;\n                            default:\n                                return <span>-</span>;\n                        }\n                    }}\n                />\n                <Table.Column\n                    title=\"Run\"\n                    // dataIndex=\"runElapsed\"\n                    key=\"runElapsed\"\n                    width=\"10%\"\n                    render={(_, job: Job) => {\n                        switch (job.status) {\n                            case JobStatus.QUEUED:\n                            case JobStatus.ERRORED_QUEUED:\n                            case JobStatus.CANCELED_QUEUED:\n                                return '-';\n                            case JobStatus.RUNNING:\n                                return <NiceElapsedTime from={job.runAt} precision={2} useClock={true} />;\n                            case JobStatus.FINISHED:\n                            case JobStatus.CANCELED_RUNNING:\n                            case JobStatus.ERRORED_RUNNING:\n                                return <NiceElapsedTime from={job.runAt} to={job.finishAt} precision={2} />;\n                        }\n                    }}\n                />\n                <Table.Column\n                    title=\"Status\"\n                    dataIndex=\"status\"\n                    key=\"status\"\n                    width=\"8%\"\n                    render={(status: JobStatus, job: Job) => {\n                        return <JobStatusBadge job={job} />\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     if (a.status === b.status) {\n                //         return 0;\n                //     }\n                //     if (a.status === JobStatus.QUEUED) {\n                //         return -1;\n                //     }\n                //     if (a.status === JobStatus.RUNNING) {\n                //         if (b.status === JobStatus.QUEUED) {\n                //             return 1;\n                //         }\n                //         return -1;\n                //     }\n                //     if (a.status === JobStatus.FINISHED) {\n                //         if (b.status === JobStatus.QUEUED || b.status === JobStatus.RUNNING) {\n                //             return 1;\n                //         }\n                //         return -1;\n                //     }\n                //     if (a.status === JobStatus.ERRORED) {\n                //         if (b.status === JobStatus.CANCELED_QUEUED || b.status === JobStatus.CANCELED_RUNNING) {\n                //             return -1;\n                //         }\n                //         return 1;\n                //     }\n                //     return 1;\n                // }}\n                />\n                <Table.Column\n                    title=\"Server\"\n                    dataIndex=\"clientGroups\"\n                    key=\"clientGroups\"\n                    width=\"8%\"\n                    render={(clientGroups: Array<string>) => {\n                        return clientGroups.join(',');\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     // TODO: sort client groups first...\n                //     return a.clientGroups.join(',').localeCompare(b.clientGroups.join(','));\n                // }}\n                />\n                <Table.Column\n                    title=\"Cancel\"\n                    dataIndex=\"action\"\n                    key=\"action\"\n                    width=\"5%\"\n                    render={(status: JobStatus, job: Job) => {\n                        return this.renderJobAction(job);\n                    }}\n                />\n            </Table>\n        );\n    }\n\n    render() {\n        return (\n            <div data-k-b-testhook-component=\"UserJobs\" className=\"UserJobs\">\n                <div>{this.renderControlBar()}</div>\n                {this.renderJobsTable()}\n                {this.renderJobDetail()}\n            </div>\n        );\n    }\n}\n","import uuid from 'uuid';\n\nexport type TaskID = string;\n\nexport interface Task<ResultType> {\n    id: TaskID;\n    promise: Promise<ResultType>\n    isCanceled: boolean;\n}\n\n// type Request<ParamType, ResultType> = (param: ParamType) => Promise<ResultType>;\n\nexport default abstract class CancelableRequest<ParamType, ResultType> {\n    pendingTasks: Map<TaskID, Task<ResultType>>;\n    isCanceled: boolean;\n    constructor() {\n        this.pendingTasks = new Map<TaskID, Task<ResultType>>();\n        this.isCanceled = false;\n    }\n\n    newID() {\n        return uuid.v4();\n    }\n\n    cancel(task: Task<ResultType>) {\n        task.isCanceled = true;\n        this.pendingTasks.delete(task.id);\n    }\n\n    cancelPending() {\n        this.pendingTasks.forEach((task, key) => {\n            this.cancel(task);\n        });\n    }\n\n    done(task: Task<ResultType>) {\n        this.pendingTasks.delete(task.id);\n    }\n\n    spawn(param: ParamType): Task<ResultType> {\n        this.cancelPending();\n        return this.request(param);\n    }\n\n    abstract request(param: ParamType): Task<ResultType>;\n}","import { Job, JobsSearchExpression, EpochTime, StoreState } from '../store';\nimport MetricsServiceClient from '../../lib/MetricsServiceClient';\nimport { serviceJobToUIJob, compareTimeRange, compareStatus, extractTimeRange } from './utils';\nimport { Action } from 'redux';\nimport { ActionType } from '.';\nimport { NarrativeJobServiceClient } from '@kbase/ui-lib';\nimport { AppError } from '@kbase/ui-components';\nimport { ThunkDispatch } from 'redux-thunk';\nimport CancelableRequest, { Task } from '../../lib/CancelableRequest';\n\nexport interface UserJobsSearch extends Action<ActionType.USER_JOBS_SEARCH> {\n    type: ActionType.USER_JOBS_SEARCH;\n    searchExpression: JobsSearchExpression;\n}\n\nexport interface UserJobsSearchStart extends Action<ActionType.USER_JOBS_SEARCH_START> {\n    type: ActionType.USER_JOBS_SEARCH_START;\n}\n\nexport interface UserJobsSearchSuccess extends Action<ActionType.USER_JOBS_SEARCH_SUCCESS> {\n    type: ActionType.USER_JOBS_SEARCH_SUCCESS;\n    searchExpression: JobsSearchExpression;\n    rawJobs: Array<Job>;\n    jobs: Array<Job>;\n    jobsFetchedAt: EpochTime;\n}\n\nexport interface UserJobsSearchError extends Action<ActionType.USER_JOBS_SEARCH_ERROR> {\n    type: ActionType.USER_JOBS_SEARCH_ERROR;\n    error: AppError;\n}\n\nexport function userJobsSearchStart(): UserJobsSearchStart {\n    return {\n        type: ActionType.USER_JOBS_SEARCH_START\n    };\n}\n\nexport function userJobsSearchSuccess(\n    rawJobs: Array<Job>,\n    jobs: Array<Job>,\n    jobsFetchedAt: EpochTime,\n    searchExpression: JobsSearchExpression\n): UserJobsSearchSuccess {\n    return {\n        type: ActionType.USER_JOBS_SEARCH_SUCCESS,\n        searchExpression,\n        rawJobs,\n        jobs,\n        jobsFetchedAt\n    };\n}\n\nexport function userJobsSearchError(error: AppError): UserJobsSearchError {\n    return {\n        type: ActionType.USER_JOBS_SEARCH_ERROR,\n        error\n    };\n}\n\ninterface UserJobsParam {\n    token: string,\n    serviceWizardURL: string,\n    from: number,\n    to: number\n}\n\ntype UserJobsResult = Array<Job>;\n\nclass UserJobsRequest extends CancelableRequest<UserJobsParam, UserJobsResult> {\n    request({ token, serviceWizardURL, from, to }: UserJobsParam): Task<UserJobsResult> {\n        const client = new MetricsServiceClient({\n            url: serviceWizardURL,\n            token: token,\n            version: 'dev'\n        });\n        const promise = client\n            .getJobs({\n                epoch_range: [from, to],\n                user_ids: []\n            })\n            .then((metrics) => {\n                const converted = metrics.job_states.map((jobState) => {\n                    return serviceJobToUIJob(jobState, 'UNKNOWN');\n                });\n                return converted;\n            })\n\n        const task: Task<UserJobsResult> = {\n            id: this.newID(),\n            promise,\n            isCanceled: false\n        }\n        this.pendingTasks.set(task.id, task);\n        return task;\n    }\n}\n\nconst userJobsSearchRequest = new UserJobsRequest();\n\nexport function userJobsSearch(searchExpression: JobsSearchExpression) {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(userJobsSearchStart());\n\n        const {\n            auth: { userAuthorization },\n            app: {\n                config: {\n                    services: {\n                        ServiceWizard: { url: serviceWizardURL }\n                    }\n                }\n            }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                userJobsSearchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        let {\n            views: {\n                userJobsView: { jobsFetchedAt, rawJobs }\n            }\n        } = getState();\n\n        const searchTerms = searchExpression.query.split(/\\s+/).map((term) => {\n            return new RegExp(term, 'i');\n        });\n\n        const [timeRangeStart, timeRangeEnd] = extractTimeRange(searchExpression.timeRange);\n\n        if (!jobsFetchedAt || searchExpression.forceSearch) {\n\n            const task = userJobsSearchRequest.spawn({\n                token: userAuthorization.token,\n                serviceWizardURL,\n                from: timeRangeStart,\n                to: timeRangeEnd\n            });\n\n            rawJobs = await task.promise;\n            if (task.isCanceled) {\n                // just do nothing\n                return;\n            }\n            jobsFetchedAt = new Date().getTime();\n            userJobsSearchRequest.done(task);\n\n            // rawJobs = await fetchAllUserJobs(userAuthorization.token, serviceWizardURL, timeRangeStart, timeRangeEnd);\n            jobsFetchedAt = new Date().getTime();\n            // UPDATE: update the raw jobs\n        }\n\n        const newJobs = rawJobs.filter((job) => {\n            return (\n                searchTerms.every((term) => {\n                    return term.test(job.appTitle) || term.test(job.narrativeTitle) || term.test(job.id) || term.test(job.username)\n                }) &&\n                compareTimeRange(\n                    job,\n                    // searchExpression.timeRange,\n                    timeRangeStart,\n                    timeRangeEnd\n                ) &&\n                compareStatus(job, searchExpression.jobStatus)\n            );\n        });\n\n        dispatch(userJobsSearchSuccess(rawJobs, newJobs, jobsFetchedAt, searchExpression));\n    };\n}\n\nexport function userJobsRefreshSearch() {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(userJobsSearchStart());\n\n        const {\n            auth: { userAuthorization }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                userJobsSearchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        const {\n            app: {\n                config: {\n                    services: {\n                        ServiceWizard: { url: serviceWizardURL }\n                    }\n                }\n            },\n            views: {\n                userJobsView: { searchExpression }\n            }\n        } = getState();\n\n        if (!searchExpression) {\n            userJobsSearchError({\n                message: 'No search expression',\n                code: 'nosearchexpression'\n            });\n            return;\n        }\n\n        const searchTerms = searchExpression.query.split(/\\s+/).map((term) => {\n            return new RegExp(term, 'i');\n        });\n\n        const [timeRangeStart, timeRangeEnd] = extractTimeRange(searchExpression.timeRange);\n\n\n        const task = userJobsSearchRequest.spawn({\n            token: userAuthorization.token,\n            serviceWizardURL,\n            from: timeRangeStart,\n            to: timeRangeEnd\n        });\n\n        const rawJobs = await task.promise;\n        if (task.isCanceled) {\n            // just do nothing\n            return;\n        }\n\n        userJobsSearchRequest.done(task);\n\n        const newJobs = rawJobs.filter((job) => {\n            return (\n                searchTerms.every((term) => {\n                    return term.test(job.appTitle) || term.test(job.narrativeTitle);\n                }) &&\n                compareTimeRange(\n                    job,\n                    // searchExpression.timeRange,\n                    timeRangeStart,\n                    timeRangeEnd\n                ) &&\n                compareStatus(job, searchExpression.jobStatus)\n            );\n        });\n\n        dispatch(userJobsSearchSuccess(rawJobs, newJobs, Date.now(), searchExpression));\n    };\n}\n\n// user job cancellation...\n// Job Cancelation\n\nexport interface UserJobsCancelJob {\n    type: ActionType.USER_JOBS_CANCEL;\n    jobID: string;\n}\n\nexport interface UserJobsCancelJobStart {\n    type: ActionType.USER_JOBS_CANCEL_START;\n}\n\nexport interface UserJobsCancelJobSuccess {\n    type: ActionType.USER_JOBS_CANCEL_SUCCESS;\n}\n\nexport interface UserJobsCancelJobError {\n    type: ActionType.USER_JOBS_CANCEL_ERROR;\n    error: AppError;\n}\n\nexport function userJobsCancelJobStart(): UserJobsCancelJobStart {\n    return {\n        type: ActionType.USER_JOBS_CANCEL_START\n    };\n}\n\nexport function userJobsCancelJobSuccess(): UserJobsCancelJobSuccess {\n    return {\n        type: ActionType.USER_JOBS_CANCEL_SUCCESS\n    };\n}\n\nexport function userJobsCancelJobError(error: AppError): UserJobsCancelJobError {\n    return {\n        type: ActionType.USER_JOBS_CANCEL_ERROR,\n        error\n    };\n}\n\nexport function userJobsCancelJob(jobID: string) {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(userJobsCancelJobStart());\n\n        const {\n            auth: { userAuthorization },\n            app: {\n                config: {\n                    services: {\n                        NarrativeJobService: { url: njsURL }\n                    }\n                }\n            }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                userJobsCancelJobError({\n                    message: 'no authorization',\n                    code: 'no-authorization'\n                })\n            );\n            return;\n        }\n\n        // do it\n        const njsClient = new NarrativeJobServiceClient({\n            url: njsURL,\n            token: userAuthorization.token,\n            module: 'NarrativeJobService'\n        });\n        njsClient\n            .cancelJob({ job_id: jobID })\n            .then(() => {\n                dispatch(userJobsCancelJobSuccess());\n                dispatch(userJobsRefreshSearch());\n            })\n            .catch((err) => {\n                console.error('error canceling job', err);\n                dispatch(\n                    userJobsCancelJobError({\n                        message: 'error canceling job: ' + err.message,\n                        code: 'error-canceling'\n                    })\n                );\n            });\n    };\n}\n","/**\n * A redux adapter container for the User Jobs view component.\n *\n * For those not familiar with redux-based apps: Redux exists as a parallel system to the react component hierarchy. The react \"store\" (database)\n * is established in the top level `App` component. A component can access the store data and the store actions through what is commonly\n * referred to as a \"container\" module. We prefer to call them \"redux adapters\", to be more specific.\n *\n * A redux adapter is a separate component file. It essentially creates a component (via the `connect` function) which \"wraps\" the underlying\n * view component. It extracts the data and action generators and supplies them to the view component.\n */\n\n/**\n * Imports, ignore\n */\n// 3rd party\nimport { Dispatch, Action } from 'redux';\nimport { connect } from 'react-redux';\n\n// project\nimport UserJobs from './view';\nimport { StoreState, Job, JobsSearchExpression, SearchState } from '../../redux/store';\nimport { userJobsSearch, userJobsCancelJob } from '../../redux/actions/userJobs';\n\n/**\n * The props which this redux adapter requires in it's invocation.\n *\n * Current empty\n */\nexport interface OwnProps { }\n\n/**\n * The props this redux adapter extracts from the store and injects in\n * its call to the child component, UserJobs.\n *\n * @note These properties must exist in UserJobs.\n */\ninterface StateProps {\n    jobs: Array<Job>;\n    searchState: SearchState;\n    showMonitoringControls: boolean;\n    // searchExpression: JobsSearchExpression;\n}\n\n/**\n * The props this redux adapter extracts from actions and injects into\n * its call to the child component, UserJobs.\n *\n * @note These properties must exist in UserJobs.\n */\ninterface DispatchProps {\n    search: (searchExpression: JobsSearchExpression) => void;\n    cancelJob: (jobID: string) => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        views: {\n            userJobsView: { searchState, jobs }\n        }\n    } = state;\n\n    if (!userAuthorization) {\n        throw new Error('Not authorized!');\n    }\n\n    // const { roles } = userAuthorization\n    // const showMonitoringControls = roles.some((role) => {\n    //     return role === 'DevToken';\n    // })\n    const showMonitoringControls = true;\n    return { jobs, searchState, showMonitoringControls };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {\n        search: (searchExpression: JobsSearchExpression) => {\n            dispatch(userJobsSearch(searchExpression) as any);\n        },\n        cancelJob: (jobID: string) => {\n            dispatch(userJobsCancelJob(jobID) as any);\n        }\n    };\n}\n\nconst UserJobsReduxAdapter = connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(UserJobs);\n\nexport default UserJobsReduxAdapter;\n","/**\n * A component for browsing through (search, filter, sort) jobs submitted by\n * the current user.\n */\n\n/** imports */\n// 3rd party imports\nimport React from 'react';\nimport { Table, Form, Input, Button, Checkbox, Select, DatePicker, Popconfirm, Tooltip, Modal, Switch } from 'antd';\nimport { CheckboxValueType } from 'antd/lib/checkbox/Group';\nimport { CheckboxChangeEvent } from 'antd/lib/checkbox';\nimport moment, { Moment } from 'moment';\n\n// project imports\nimport { Job, JobStatus, JobsSearchExpression, SearchState, TimeRangePresets, TimeRange, SortSpec } from '../../redux/store';\n\n// kbase imports (or should be kbase imports)\nimport { NiceRelativeTime, NiceElapsedTime } from '@kbase/ui-components';\nimport JobStatusBadge from '../JobStatus'\n\n// project imoprts\nimport JobDetail from '../JobDetail';\n\n// file imports\nimport './style.css';\nimport Monitor from '../Monitor';\nimport PubSub from '../../lib/PubSub';\nimport { PaginationConfig, SortOrder } from 'antd/lib/table';\n\n/**\n * This version of the job status defines the set of strings that may be used\n * in the ui controls.\n *\n */\ntype JobStatusFilterKey = 'queued' | 'running' | 'canceled' | 'success' | 'error';\n\n/**\n * This interface describes a single option for the available job status filter options.\n *\n * Job status filter options are used to populate the checkboxgroup.\n * Note that the value of each option is a job status filter key.\n */\ninterface JobStatusFilterOption {\n    label: string;\n    value: JobStatusFilterKey;\n}\n\n/**\n * A set of job status filter options used to populate and control a set of checkboxes provided\n * for the user to be able to filter jobs according to their job status.\n *\n * Note that this is a set of options because the antd checkboxgroup simplifies a set of checkboxes\n * through sets of options.\n */\nconst jobStatusFilterOptions: Array<JobStatusFilterOption> = [\n    {\n        label: 'Queued',\n        value: 'queued'\n    },\n    {\n        label: 'Running',\n        value: 'running'\n    },\n    {\n        label: 'Canceled',\n        value: 'canceled'\n    },\n    {\n        label: 'Success',\n        value: 'success'\n    },\n    {\n        label: 'Error',\n        value: 'error'\n    }\n];\n\n/**\n * Translates an array of job status filter keys, as provided by the ui job status\n * filter checkboxes, to an array of job statuses suitable for passing to the job\n * status search.\n *\n * @param filter - an array of job status filter keys\n *\n * @note Since the switch is over an enum, we don't have to worry about the default case\n *\n * @returns an array of job statuses\n */\nfunction jobStatusFilterOptionsToJobStatus(filter: Array<JobStatusFilterKey>): Array<JobStatus> {\n    let jobStatuses: Array<JobStatus> = [];\n    filter.forEach((status) => {\n        switch (status) {\n            case 'queued':\n                jobStatuses.push(JobStatus.QUEUED);\n                break;\n            case 'running':\n                jobStatuses.push(JobStatus.RUNNING);\n                break;\n            case 'canceled':\n                jobStatuses.push(JobStatus.CANCELED_QUEUED);\n                jobStatuses.push(JobStatus.CANCELED_RUNNING);\n                break;\n            case 'success':\n                jobStatuses.push(JobStatus.FINISHED);\n                break;\n            case 'error':\n                jobStatuses.push(JobStatus.ERRORED_QUEUED);\n                jobStatuses.push(JobStatus.ERRORED_RUNNING);\n                break;\n        }\n    });\n    return jobStatuses;\n}\n\n/**\n * Semantic aliasing of for epoch time in milliseconds, as produced\n * by Date.now(), new Date().getTime(), etc.\n *\n * @todo move to a common location\n */\ntype EpochTime = number;\n\n/**\n * Props for the MyJobs component\n */\nexport interface MyJobsProps {\n    /** The list of jobs to display */\n    jobs: Array<Job>;\n    /** The current search state, used to control the primary display (none, searching, searched, error) */\n    searchState: SearchState;\n    showMonitoringControls: boolean\n    /** Triggers a redux action to search of the user's jobs according to the given search expression\n     * @remarks Since at present the service used to fetch the jobs can suffer performance issues, the\n     * default search action does not fetch search results each time (rather ??).\n     * @todo when job search is more performant, this function may be removed and redirected to the\n     * search function.\n     */\n    search: (searchExpression: JobsSearchExpression) => void;\n    /** Triggers a redux action to cancel the indicated job */\n    cancelJob: (jobID: string) => void;\n}\n\n/**\n * State for the MyJobs component\n */\ninterface MyJobsState {\n    /** Flag to show the date controls */\n    showDates: boolean;\n    /** Contains the current selection of job statuses in the checkbox control */\n    currentJobStatusFilter: Array<JobStatusFilterKey>;\n    /** Contains the initial timestamp (ms epoch time) for time range */\n    timeRange: TimeRange;\n\n    isFilterOpen: boolean;\n\n    selectedJob: Job | null;\n    currentSort: SortSpec | null;\n}\n\n/**\n * A View Component for browsing through the current user's jobs.\n *\n * @remarks\n * This component is really just a tabular view into a user's jobs. It provides\n * support for free text searching, filtering by job state, and date ranges.\n *\n */\nexport default class MyJobs extends React.Component<MyJobsProps, MyJobsState> {\n    currentQuery?: string;\n\n    static defaultTimeRangePreset: TimeRangePresets = 'lastWeek';\n\n    pubsub: PubSub;\n\n    constructor(props: MyJobsProps) {\n        super(props);\n\n        this.currentQuery = '';\n        this.pubsub = new PubSub();\n\n        this.state = {\n            showDates: false,\n            currentJobStatusFilter: ['queued', 'running', 'canceled', 'success', 'error'],\n            timeRange: { kind: 'preset', preset: MyJobs.defaultTimeRangePreset },\n            isFilterOpen: false,\n            selectedJob: null,\n            currentSort: null\n        };\n    }\n\n    componentDidMount() {\n        this.doSearch(true);\n    }\n\n    componentDidUpdate() {\n        if (this.props.searchState === SearchState.SEARCHING) {\n            this.pubsub.send('searching', { is: true })\n        } else {\n            this.pubsub.send('searching', { is: false })\n        }\n    }\n\n    onChangeTimeRange(value: string) {\n        // TODO: should narrow the string value\n        if (value === 'customRange') {\n            this.setState({\n                showDates: true,\n                timeRange: { kind: 'literal', start: Date.now(), end: Date.now() }\n            });\n            // nothing else to do.\n            return;\n        } else {\n            this.setState(\n                {\n                    showDates: false,\n                    timeRange: { kind: 'preset', preset: value as TimeRangePresets }\n                },\n                () => {\n                    this.doSearch(true);\n                }\n            );\n        }\n    }\n\n    onChangeQuery(event: React.ChangeEvent<HTMLInputElement>) {\n        this.currentQuery = event.target.value;\n    }\n\n    onSubmit(event: React.FormEvent) {\n        event.preventDefault();\n        this.doSearch(true);\n    }\n\n    // onTableChanged(pagination: PaginationConfig, filters: any, sorter: any) {\n    //     console.log('table changed', pagination, filters, sorter);\n    //     this.setState(\n    //         {\n    //             currentSort: {\n    //                 field: sorter.field,\n    //                 direction: sorter.order === 'ascend' ? 'ascending' : 'descending'\n    //             }\n    //         },\n    //         () => {\n    //             this.doSearch(false);\n    //         }\n    //     );\n    // }\n\n    doSearch(forceSearch: boolean) {\n        if (typeof this.currentQuery === 'undefined') {\n            return;\n        }\n\n        const jobStatusFilter = jobStatusFilterOptionsToJobStatus(this.state.currentJobStatusFilter);\n\n        const searchExpression: JobsSearchExpression = {\n            query: this.currentQuery,\n            timeRange: this.state.timeRange,\n            jobStatus: jobStatusFilter,\n            forceSearch,\n            sort: null\n            // sort: this.state.currentSort\n        };\n\n        // TODO: document wth is happening here.\n        this.pubsub.send('search', {});\n\n        this.props.search(searchExpression);\n        return false;\n    }\n\n    onRangeFromChange(date: Moment | null, dateString: string) {\n        // TODO: if the range ends up null (how?), should it default\n        // to the previously selected preset? For now, just go back to lastHourl.\n        if (date === null) {\n            this.setState({\n                timeRange: {\n                    kind: 'preset',\n                    preset: 'lastHour'\n                }\n            });\n            return;\n        }\n\n        // handle logic of switching from 'preset' to 'literal'\n        let existingTimeRange = this.state.timeRange;\n        let timeRange: TimeRange;\n        switch (existingTimeRange.kind) {\n            case 'preset':\n                timeRange = {\n                    kind: 'literal',\n                    start: date.valueOf(),\n                    end: Infinity\n                };\n                break;\n            case 'literal':\n                timeRange = {\n                    kind: 'literal',\n                    start: date.valueOf(),\n                    end: existingTimeRange.end\n                };\n                break;\n            default:\n                return;\n        }\n\n        this.setState({\n            timeRange\n        });\n    }\n\n    onRangeToChange(date: Moment | null, dateString: string) {\n        // TODO: if the range ends up null (how?), should it default\n        // to the previously selected preset? For now, just go back to lastHourl.\n        if (date === null) {\n            this.setState({\n                timeRange: {\n                    kind: 'preset',\n                    preset: 'lastHour'\n                }\n            });\n            return;\n        }\n\n        let existingTimeRange = this.state.timeRange;\n        let timeRange: TimeRange;\n        switch (existingTimeRange.kind) {\n            case 'preset':\n                timeRange = {\n                    kind: 'literal',\n                    start: Infinity,\n                    end: date.valueOf()\n                };\n                break;\n            case 'literal':\n                timeRange = {\n                    kind: 'literal',\n                    start: existingTimeRange.start,\n                    end: date.valueOf()\n                };\n                break;\n            default:\n                return;\n        }\n\n        this.setState({\n            timeRange\n        });\n    }\n\n    renderSearchInput() {\n        let dateControls;\n        if (this.state.showDates) {\n            const timeRange = this.state.timeRange;\n            if (timeRange.kind === 'literal') {\n                dateControls = (\n                    <React.Fragment>\n                        <Form.Item label=\"From\">\n                            <DatePicker\n                                showTime={true}\n                                allowClear={false}\n                                value={moment(timeRange.start)}\n                                onChange={this.onRangeFromChange.bind(this)}\n                            />\n                        </Form.Item>\n                        <Form.Item label=\"To\">\n                            <DatePicker\n                                showTime={true}\n                                allowClear={false}\n                                value={moment(timeRange.end)}\n                                onChange={this.onRangeToChange.bind(this)}\n                            />\n                        </Form.Item>\n                    </React.Fragment>\n                );\n            }\n        }\n        return (\n            <Form layout=\"inline\" onSubmit={this.onSubmit.bind(this)}>\n                <Form.Item>\n                    <Input\n                        defaultValue={this.currentQuery}\n                        placeholder=\"Search jobs\"\n                        style={{ width: '15em' }}\n                        onChange={this.onChangeQuery.bind(this)}\n                    />\n                </Form.Item>\n\n                <Form.Item label=\"TimeRange\" />\n                <Form.Item>\n                    <Select\n                        defaultValue={MyJobs.defaultTimeRangePreset}\n                        onChange={this.onChangeTimeRange.bind(this)}\n                        dropdownMatchSelectWidth={true}\n                        style={{ width: '11em' }}\n                    >\n                        <Select.Option value=\"lastHour\">Previous Hour</Select.Option>\n                        <Select.Option value=\"last48Hours\">Previous 48 Hours</Select.Option>\n                        <Select.Option value=\"lastWeek\">Previous Week</Select.Option>\n                        <Select.Option value=\"lastMonth\">Previous Month</Select.Option>\n                        <Select.Option value=\"customRange\">Custom Range</Select.Option>\n                    </Select>\n                </Form.Item>\n                {dateControls}\n\n                <Form.Item>\n                    <Button icon=\"search\" type=\"primary\" htmlType=\"submit\" />\n                </Form.Item>\n\n                <Form.Item>\n                    <Switch checkedChildren=\"hide filters\" unCheckedChildren=\"show filters\" onChange={this.onToggleFilterArea.bind(this)} />\n                </Form.Item>\n\n                <Form.Item>\n                    <Monitor\n                        onPoll={() => {\n                            this.doSearch(true);\n                        }}\n                        pubsub={this.pubsub}\n                        isPollerRunning={this.props.searchState === SearchState.SEARCHING}\n                        startPolling={false}\n                        showControls={this.props.showMonitoringControls}\n                        startOpen={false}\n                    />\n                </Form.Item>\n            </Form>\n        );\n    }\n\n    onToggleFilterArea(isFilterOpen: boolean) {\n        this.setState({ isFilterOpen })\n        // this.setState({ isFilterOpen: !this.state.isFilterOpen });\n    }\n\n    onFilterChange(filters: Array<CheckboxValueType>) {\n        const filter = filters as Array<JobStatusFilterKey>;\n        this.setState(\n            {\n                currentJobStatusFilter: filter\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    onChangeJobStatusAny(event: CheckboxChangeEvent) {\n        if (event.target.checked) {\n            this.setState(\n                {\n                    currentJobStatusFilter: ['queued', 'running', 'canceled', 'success', 'error']\n                },\n                () => {\n                    this.doSearch(false);\n                }\n            );\n        }\n    }\n\n    onClickAny() {\n        this.setState(\n            {\n                currentJobStatusFilter: ['queued', 'running', 'canceled', 'success', 'error']\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    onClickFinished() {\n        this.setState(\n            {\n                currentJobStatusFilter: ['canceled', 'success', 'error']\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    onClickActive() {\n        this.setState(\n            {\n                currentJobStatusFilter: ['queued', 'running']\n            },\n            () => {\n                this.doSearch(false);\n            }\n        );\n    }\n\n    renderFilterInput() {\n        const options = jobStatusFilterOptions;\n        return (\n            <div className=\"MyJobs-filterArea\">\n                <span style={{ color: 'gray', fontWeight: 'bold', marginRight: '10px' }}>Filter by Job Status</span>\n                <Button size=\"small\" type=\"link\" onClick={this.onClickAny.bind(this)} data-k-b-testhook-button=\"any\">\n                    <i>Any</i>\n                </Button>{' '}\n                <Button size=\"small\" type=\"link\" onClick={this.onClickActive.bind(this)} data-k-b-testhook-button=\"active\">\n                    <i>Active</i>\n                </Button>{' '}\n                <Button\n                    size=\"small\" type=\"link\"\n                    onClick={this.onClickFinished.bind(this)}\n                    style={{ marginRight: '10px' }}\n                    data-k-b-testhook-button=\"finished\"\n                >\n                    <i>Finished</i>\n                </Button>\n                <Checkbox.Group\n                    options={options}\n                    onChange={this.onFilterChange.bind(this)}\n                    value={this.state.currentJobStatusFilter}\n                />\n            </div>\n        );\n    }\n\n    renderControlBar() {\n        let filterRowStyle: React.CSSProperties = { margin: '10px 10px 10px 0' };\n        if (!this.state.isFilterOpen) {\n            filterRowStyle.display = 'none';\n        }\n        let filterRow;\n        if (this.state.isFilterOpen) {\n            filterRow = <div className=\"Row\" style={filterRowStyle}>\n                {this.renderFilterInput()}\n            </div>\n        }\n        return (\n            <div className=\"Col\">\n                <div className=\"Row\">{this.renderSearchInput()}</div>\n                {filterRow}\n            </div>\n        );\n    }\n\n    onJobCancel(job: Job) {\n        this.props.cancelJob(job.id);\n    }\n\n    renderJobAction(job: Job) {\n        switch (job.status) {\n            case JobStatus.QUEUED:\n            case JobStatus.RUNNING:\n                return (\n                    <Popconfirm\n                        title=\"Cancel this job?\"\n                        onConfirm={() => {\n                            this.onJobCancel(job);\n                        }}\n                        okText=\"Yes\"\n                        cancelText=\"No\"\n                    >\n                        <Button\n                            icon=\"close\"\n                            type=\"danger\"\n                            size=\"small\"\n                            data-k-b-testhook-button=\"cancel\"\n                        />\n                    </Popconfirm>\n                );\n            default:\n                return;\n        }\n    }\n\n    onClickDetail(job: Job) {\n        this.setState({\n            selectedJob: job\n        });\n    }\n\n    onCloseModal() {\n        this.setState({\n            selectedJob: null\n        });\n    }\n\n    renderJobsTable() {\n        const loading = this.props.searchState === SearchState.SEARCHING;\n        return (\n            <Table\n                size=\"small\"\n                className=\"MyJobs-table xScrollingFlexTable\"\n                dataSource={this.props.jobs}\n                loading={loading}\n                rowKey={(job: Job) => {\n                    return job.id;\n                }}\n                pagination={{ position: 'bottom', showSizeChanger: true }}\n            // onChange={this.onTableChanged.bind(this)}\n            // pagination={false}\n            // scroll={{ y: '100%' }}\n\n            >\n                <Table.Column\n                    title=\"ID\"\n                    dataIndex=\"id\"\n                    key=\"id\"\n                    width=\"10%\"\n                    render={(jobID: string, job: Job): any => {\n                        const title = jobID;\n                        return (\n                            <Tooltip title={title}>\n                                <a href=\"https://example.com\" onClick={(e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n                                    e.preventDefault();\n                                    this.onClickDetail(job)\n                                }}>{jobID}</a>\n                            </Tooltip>\n                        )\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     return a.id.localeCompare(b.id);\n                // }}\n                />\n                <Table.Column\n                    title=\"Narrative\"\n                    dataIndex=\"narrativeTitle\"\n                    key=\"narrativeTitle\"\n                    width=\"17%\"\n                    render={(title: string, job: Job): any => {\n                        if (!title || !job.narrativeID) {\n                            return 'n/a';\n                        }\n                        return (\n                            <Tooltip title={title}>\n                                <a\n                                    href={`/narrative/${job.narrativeID}`}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                >\n                                    {title}\n                                </a>\n                            </Tooltip>\n                        );\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     return a.narrativeTitle.localeCompare(b.narrativeTitle);\n                // }}\n                />\n                <Table.Column\n                    title=\"App\"\n                    dataIndex=\"appTitle\"\n                    key=\"appTitle\"\n                    width=\"20%\"\n                    render={(title: string, job: Job): any => {\n                        if (!title) {\n                            return 'n/a';\n                        }\n                        const href = '/#catalog/apps/' + job.appID;\n                        return (\n                            <Tooltip title={title}>\n                                <a href={href}>{title}</a>\n                            </Tooltip>\n                        );\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     return a.appTitle.localeCompare(b.appTitle);\n                // }}\n                />\n                <Table.Column\n                    title=\"Submitted\"\n                    dataIndex=\"queuedAt\"\n                    key=\"queuedAt\"\n                    width=\"10%\"\n                    render={(date: number, job: Job) => {\n                        if (!date) {\n                            return <span>** empty **</span>;\n                        }\n                        return <NiceRelativeTime time={new Date(date)} />;\n                    }}\n                    defaultSortOrder=\"descend\"\n                    // sorter={true}\n                    sorter={(a: Job, b: Job, sortOrder?: SortOrder) => {\n                        let direction: number;\n                        if (sortOrder === 'ascend') {\n                            direction = -1;\n                        } else {\n                            direction = 1;\n                        }\n                        if (a.queuedAt === null) {\n                            if (b.queuedAt === null) {\n                                return 0;\n                            }\n                            return -1 * direction;\n                        } else {\n                            if (b.queuedAt === null) {\n                                return 1 * direction;\n                            }\n                            return (a.queuedAt - b.queuedAt) * direction;\n                        }\n                    }}\n                />\n                <Table.Column\n                    title=\"Queued\"\n                    dataIndex=\"queuedElapsed\"\n                    key=\"queuedElapsed\"\n                    width=\"10%\"\n                    render={(_, job: Job) => {\n                        switch (job.status) {\n                            case JobStatus.QUEUED:\n                            case JobStatus.ERRORED_QUEUED:\n                            case JobStatus.CANCELED_QUEUED:\n                                return <NiceElapsedTime from={job.queuedAt} precision={2} useClock={true} />;\n                            default:\n                                return <span>-</span>;\n                        }\n                    }}\n                />\n                <Table.Column\n                    title=\"Run\"\n                    // dataIndex=\"runElapsed\"\n                    key=\"runElapsed\"\n                    width=\"10%\"\n                    render={(_, job: Job) => {\n                        switch (job.status) {\n                            case JobStatus.QUEUED:\n                            case JobStatus.ERRORED_QUEUED:\n                            case JobStatus.CANCELED_QUEUED:\n                                return '-';\n                            case JobStatus.RUNNING:\n                                return <NiceElapsedTime from={job.runAt} precision={2} useClock={true} />;\n                            case JobStatus.FINISHED:\n                            case JobStatus.CANCELED_RUNNING:\n                            case JobStatus.ERRORED_RUNNING:\n                                return <NiceElapsedTime from={job.runAt} to={job.finishAt} precision={2} />;\n                        }\n                    }}\n                />\n                <Table.Column\n                    title=\"Status\"\n                    dataIndex=\"status\"\n                    key=\"status\"\n                    width=\"10%\"\n                    render={(status: JobStatus, job: Job) => {\n                        return <JobStatusBadge job={job} />;\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     if (a.status === b.status) {\n                //         return 0;\n                //     }\n                //     if (a.status === JobStatus.QUEUED) {\n                //         return -1;\n                //     }\n                //     if (a.status === JobStatus.RUNNING) {\n                //         if (b.status === JobStatus.QUEUED) {\n                //             return 1;\n                //         }\n                //         return -1;\n                //     }\n                //     if (a.status === JobStatus.FINISHED) {\n                //         if (b.status === JobStatus.QUEUED || b.status === JobStatus.RUNNING) {\n                //             return 1;\n                //         }\n                //         return -1;\n                //     }\n                //     if (a.status === JobStatus.ERRORED) {\n                //         if (b.status === JobStatus.CANCELED_QUEUED || b.status === JobStatus.CANCELED_RUNNING) {\n                //             return -1;\n                //         }\n                //         return 1;\n                //     }\n                //     return 1;\n                // }}\n                />\n                <Table.Column\n                    title=\"Server\"\n                    dataIndex=\"clientGroups\"\n                    key=\"clientGroups\"\n                    width=\"8%\"\n                    render={(clientGroups: Array<string>) => {\n                        return clientGroups.join(',');\n                    }}\n                // sorter={(a: Job, b: Job) => {\n                //     // TODO: sort client groups first...\n                //     return a.clientGroups.join(',').localeCompare(b.clientGroups.join(','));\n                // }}\n                />\n                <Table.Column\n                    title=\"Cancel\"\n                    dataIndex=\"action\"\n                    key=\"action\"\n                    width=\"5%\"\n                    render={(status: JobStatus, job: Job) => {\n                        return this.renderJobAction(job);\n                    }}\n                />\n            </Table>\n        )\n    }\n\n    renderJobDetail() {\n        if (!this.state.selectedJob) {\n            return;\n        }\n        const footer = (\n            <Button key=\"cancel\" onClick={this.onCloseModal.bind(this)}>\n                Close\n            </Button>\n        )\n        const title = (\n            <span>\n                Detail for Job <span style={{ fontFamily: 'monospace', fontWeight: 'bold' }}>{this.state.selectedJob.id}</span>\n            </span>\n        )\n        return (\n            <Modal className=\"FullScreenModal\" title={title}\n                onCancel={this.onCloseModal.bind(this)} visible={true}\n                footer={footer}>\n                <JobDetail jobID={this.state.selectedJob.id} />\n            </Modal>\n        )\n    }\n\n    render() {\n        return (\n            <div data-k-b-testhook-component=\"MyJobs\" className=\"MyJobs\">\n                <div>{this.renderControlBar()}</div>\n                {this.renderJobsTable()}\n                {this.renderJobDetail()}\n            </div>\n        );\n    }\n}\n","import { Action } from 'redux';\nimport { ActionType } from '.';\nimport { JobsSearchExpression, Job, EpochTime, StoreState } from '../store';\nimport { NarrativeJobServiceClient } from '@kbase/ui-lib';\nimport { AppError } from '@kbase/ui-components';\nimport MetricsServiceClient from '../../lib/MetricsServiceClient';\nimport { serviceJobToUIJob, compareTimeRange, compareStatus, extractTimeRange } from './utils';\nimport { ThunkDispatch } from 'redux-thunk';\nimport CancelableRequest, { Task } from '../../lib/CancelableRequest';\n\n// MY JOBS TAB\n\nexport interface MyJobsSearch extends Action<ActionType.MY_JOBS_SEARCH> {\n    type: ActionType.MY_JOBS_SEARCH;\n    searchExpression: JobsSearchExpression;\n}\n\nexport interface MyJobsSearchStart extends Action<ActionType.MY_JOBS_SEARCH_START> {\n    type: ActionType.MY_JOBS_SEARCH_START;\n}\n\nexport interface MyJobsSearchSuccess extends Action<ActionType.MY_JOBS_SEARCH_SUCCESS> {\n    type: ActionType.MY_JOBS_SEARCH_SUCCESS;\n    searchExpression: JobsSearchExpression;\n    rawJobs: Array<Job>;\n    jobs: Array<Job>;\n    jobsFetchedAt: EpochTime;\n}\n\nexport interface MyJobsSearchError extends Action<ActionType.MY_JOBS_SEARCH_ERROR> {\n    type: ActionType.MY_JOBS_SEARCH_ERROR;\n    error: AppError;\n}\n\nexport function myJobsSearchStart() {\n    return {\n        type: ActionType.MY_JOBS_SEARCH_START\n    };\n}\n\nexport function myJobsSearchSuccess(\n    rawJobs: Array<Job>,\n    jobs: Array<Job>,\n    jobsFetchedAt: EpochTime,\n    searchExpression: JobsSearchExpression\n): MyJobsSearchSuccess {\n    return {\n        type: ActionType.MY_JOBS_SEARCH_SUCCESS,\n        searchExpression,\n        rawJobs,\n        jobs,\n        jobsFetchedAt\n    };\n}\n\nexport function myJobsSearchError(error: AppError) {\n    return {\n        type: ActionType.MY_JOBS_SEARCH_ERROR,\n        error\n    };\n}\n\ninterface MyJobsParam {\n    token: string,\n    username: string,\n    serviceWizardURL: string,\n    from: number,\n    to: number\n}\n\ntype MyJobsResult = Array<Job>;\n\nclass MyJobsRequests extends CancelableRequest<MyJobsParam, MyJobsResult> {\n    request({ token, username, serviceWizardURL, from, to }: MyJobsParam): Task<MyJobsResult> {\n        const client = new MetricsServiceClient({\n            url: serviceWizardURL,\n            token: token,\n            version: 'dev',\n            // urlBaseOverride: 'http://localhost:3000',\n            timeout: 60000\n        });\n        const promise = client\n            .getJobs({\n                epoch_range: [from, to],\n                user_ids: [username]\n            })\n            .then((metrics) => {\n                const converted = metrics.job_states.map((jobState) => {\n                    return serviceJobToUIJob(jobState, username);\n                });\n\n                return converted;\n            })\n\n        const task: Task<MyJobsResult> = {\n            id: this.newID(),\n            promise,\n            isCanceled: false\n        }\n        this.pendingTasks.set(task.id, task);\n        return task;\n    }\n}\n\n\nconst myJobsSearchRequests = new MyJobsRequests();\n\nexport function myJobsSearch(searchExpression: JobsSearchExpression) {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(myJobsSearchStart());\n\n        const {\n            auth: { userAuthorization }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                myJobsSearchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        let {\n            app: {\n                config: {\n                    services: {\n                        ServiceWizard: { url: serviceWizardURL }\n                    }\n                }\n            },\n            views: {\n                myJobsView: { jobsFetchedAt, rawJobs }\n            }\n        } = getState();\n\n        const searchTerms = searchExpression.query.split(/\\s+/).map((term) => {\n            return new RegExp(term, 'i');\n        });\n\n        const [timeRangeStart, timeRangeEnd] = extractTimeRange(searchExpression.timeRange);\n\n        // Umm, there must be other conditions which make a real search happen, or is \n        // forceSearch now the way to do this? ...\n        if (!jobsFetchedAt || searchExpression.forceSearch) {\n            const task = myJobsSearchRequests.spawn({\n                token: userAuthorization.token,\n                username: userAuthorization.username,\n                serviceWizardURL,\n                from: timeRangeStart,\n                to: timeRangeEnd\n            });\n\n            rawJobs = await task.promise;\n            if (task.isCanceled) {\n                // just do nothing\n                return;\n            }\n            jobsFetchedAt = new Date().getTime();\n            myJobsSearchRequests.done(task);\n            // UPDATE: update the raw jobs\n        }\n\n        const newJobs = rawJobs.filter((job) => {\n            return (\n                searchTerms.every((term) => {\n                    return term.test(job.appTitle) || term.test(job.narrativeTitle);\n                }) &&\n                compareTimeRange(job, timeRangeStart, timeRangeEnd) &&\n                compareStatus(job, searchExpression.jobStatus)\n            );\n        });\n\n        dispatch(myJobsSearchSuccess(rawJobs, newJobs, jobsFetchedAt, searchExpression));\n    };\n}\n\n// Jobs refetch\n\nexport function myJobsRefreshSearch() {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(myJobsSearchStart());\n\n        const {\n            auth: { userAuthorization }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                myJobsSearchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        const {\n            app: {\n                config: {\n                    services: {\n                        ServiceWizard: { url: serviceWizardURL }\n                    }\n                }\n            },\n            views: {\n                myJobsView: { searchExpression }\n            }\n        } = getState();\n\n        if (!searchExpression) {\n            myJobsSearchError({\n                message: 'No search expression',\n                code: 'nosearchexpression'\n            });\n            return;\n        }\n\n        const [timeRangeStart, timeRangeEnd] = extractTimeRange(searchExpression.timeRange);\n\n        const searchTerms = searchExpression.query.split(/\\s+/).map((term) => {\n            return new RegExp(term, 'i');\n        });\n\n        const task = myJobsSearchRequests.spawn({\n            token: userAuthorization.token,\n            username: userAuthorization.username,\n            serviceWizardURL,\n            from: timeRangeStart,\n            to: timeRangeEnd\n        });\n\n        const rawJobs = await task.promise;\n        if (task.isCanceled) {\n            // just do nothing\n            return;\n        }\n        // jobsFetchedAt = new Date().getTime();\n        myJobsSearchRequests.done(task);\n\n        // const rawJobs = await fetchMyJobs(\n        //     userAuthorization.token,\n        //     userAuthorization.username,\n        //     serviceWizardURL,\n        //     timeRangeStart,\n        //     timeRangeEnd\n        // );\n\n        const newJobs = rawJobs.filter((job) => {\n            return (\n                searchTerms.every((term) => {\n                    return term.test(job.appTitle) || term.test(job.narrativeTitle);\n                }) &&\n                compareTimeRange(\n                    job,\n                    // searchExpression.timeRange,\n                    timeRangeStart,\n                    timeRangeEnd\n                ) &&\n                compareStatus(job, searchExpression.jobStatus)\n            );\n        });\n\n        dispatch(myJobsSearchSuccess(rawJobs, newJobs, Date.now(), searchExpression));\n    };\n}\n\n// JOB CANCELATION\n\n// Job Cancelation\n\nexport interface MyJobsCancelJob {\n    type: ActionType.MY_JOBS_CANCEL;\n    jobID: string;\n}\n\nexport interface MyJobsCancelJobStart {\n    type: ActionType.MY_JOBS_CANCEL_START;\n}\n\nexport interface MyJobsCancelJobSuccess {\n    type: ActionType.MY_JOBS_CANCEL_SUCCESS;\n}\n\nexport interface MyJobsCancelJobError {\n    type: ActionType.MY_JOBS_CANCEL_ERROR;\n    error: AppError;\n}\n\nexport function myJobsCancelJobStart(): MyJobsCancelJobStart {\n    return {\n        type: ActionType.MY_JOBS_CANCEL_START\n    };\n}\n\nexport function myJobsCancelJobSuccess(): MyJobsCancelJobSuccess {\n    return {\n        type: ActionType.MY_JOBS_CANCEL_SUCCESS\n    };\n}\n\nexport function myJobsCancelJobError(error: AppError): MyJobsCancelJobError {\n    return {\n        type: ActionType.MY_JOBS_CANCEL_ERROR,\n        error\n    };\n}\n\nexport function myJobsCancelJob(jobID: string) {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(myJobsCancelJobStart());\n\n        const {\n            auth: { userAuthorization },\n            app: {\n                config: {\n                    services: {\n                        NarrativeJobService: { url: njsURL }\n                    }\n                }\n            }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                myJobsCancelJobError({\n                    message: 'no authorization',\n                    code: 'no-authorization'\n                })\n            );\n            return;\n        }\n\n        // do it\n        const njsClient = new NarrativeJobServiceClient({\n            url: njsURL,\n            token: userAuthorization.token,\n            module: 'NarrativeJobService'\n        });\n        njsClient\n            .cancelJob({ job_id: jobID })\n            .then(() => {\n                dispatch(myJobsCancelJobSuccess());\n                dispatch(myJobsRefreshSearch());\n            })\n            .catch((err) => {\n                console.error('error canceling job', err);\n                dispatch(\n                    myJobsCancelJobError({\n                        message: 'error canceling job: ' + err.message,\n                        code: 'error-canceling'\n                    })\n                );\n            });\n    };\n}\n","import { Dispatch, Action } from 'redux';\nimport { connect } from 'react-redux';\nimport MyJobs from './view';\n\nimport { StoreState, Job, JobsSearchExpression, SearchState } from '../../redux/store';\nimport { myJobsSearch, myJobsRefreshSearch, myJobsCancelJob } from '../../redux/actions/myJobs';\n\nexport interface OwnProps { }\n\ninterface StateProps {\n    jobs: Array<Job>;\n    searchState: SearchState;\n    showMonitoringControls: boolean;\n}\n\ninterface DispatchProps {\n    search: (searchExpression: JobsSearchExpression) => void;\n    cancelJob: (jobID: string) => void;\n    refreshSearch: () => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        views: {\n            myJobsView: { searchState, jobs }\n        }\n    } = state;\n\n    if (!userAuthorization) {\n        throw new Error('Not authorized!');\n    }\n\n    // const { roles } = userAuthorization\n    // console.log('roles?', roles);\n    // const showMonitoringControls = roles.some((role) => {\n    //     return role === 'DevToken';\n    // })\n    const showMonitoringControls = true;\n\n    return { jobs, searchState, showMonitoringControls };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {\n        search: (searchExpression: JobsSearchExpression) => {\n            dispatch(myJobsSearch(searchExpression) as any);\n        },\n        cancelJob: (jobID: string) => {\n            dispatch(myJobsCancelJob(jobID) as any);\n        },\n        refreshSearch: () => {\n            dispatch(myJobsRefreshSearch() as any);\n        }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(MyJobs);\n","import React from 'react';\nimport { AppStat, PublicAppStatsQuery, SearchState } from '../../redux/store';\nimport { Table, Form, Progress, Input, Button, Tooltip } from 'antd';\nimport { NiceTimeDuration } from '@kbase/ui-components';\nimport { PaginationConfig, SorterResult } from 'antd/lib/table';\nimport './style.css';\n\nexport interface PublicAppStatsProps {\n    searchState: SearchState;\n    appStats: Array<AppStat>;\n    onSearch: (query: PublicAppStatsQuery) => void;\n}\n\ninterface PublicAppStatsState {\n    appStats: Array<AppStat>;\n}\n\nexport default class PublicAppStats extends React.Component<PublicAppStatsProps, PublicAppStatsState> {\n    currentQuery: string;\n    constructor(props: PublicAppStatsProps) {\n        super(props);\n        this.currentQuery = '';\n    }\n    componentDidMount() {\n        this.props.onSearch({\n            query: this.currentQuery\n        });\n    }\n    onSubmitSearch(event: React.FormEvent) {\n        event.preventDefault();\n        this.props.onSearch({\n            query: this.currentQuery\n        });\n    }\n    onChangeQuery(event: React.ChangeEvent<HTMLInputElement>) {\n        this.currentQuery = event.target.value;\n    }\n    renderControlBar() {\n        return (\n            <Form layout=\"inline\" onSubmit={this.onSubmitSearch.bind(this)}>\n                <Form.Item>\n                    <Input\n                        defaultValue={this.currentQuery}\n                        placeholder=\"Search App Stats (leave empty for all)\"\n                        style={{ width: '20em' }}\n                        onChange={this.onChangeQuery.bind(this)}\n                    />\n                </Form.Item>\n                <Form.Item>\n                    <Button icon=\"search\" type=\"primary\" htmlType=\"submit\" />\n                </Form.Item>\n            </Form>\n        );\n    }\n    onTableChange(pagination: PaginationConfig, filters: any, sorter: SorterResult<AppStat>) { }\n    renderAppStatsTable() {\n        return (\n            <Table<AppStat>\n                dataSource={this.props.appStats}\n                loading={this.props.searchState === SearchState.SEARCHING}\n                rowKey={(stat: AppStat) => {\n                    return stat.appId;\n                }}\n                pagination={{ position: 'bottom', showSizeChanger: true }}\n                // pagination={false}\n                // scroll={{ y: '100%' }}\n                size=\"small\"\n                className=\"PreciseTable ScrollingFlexTable\"\n                onChange={this.onTableChange}\n            >\n                <Table.Column\n                    title=\"Module\"\n                    dataIndex=\"moduleId\"\n                    key=\"moduleId\"\n                    width=\"25%\"\n                    render={(moduleId: string, stat: AppStat) => {\n                        return (\n                            <Tooltip title={stat.moduleTitle}>\n                                <a href={`#catalog/module/${moduleId}`}>{stat.moduleTitle}</a>\n                            </Tooltip>\n                        );\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.moduleTitle.localeCompare(b.moduleTitle);\n                    }}\n                    defaultSortOrder=\"ascend\"\n                />\n                <Table.Column\n                    title=\"Function\"\n                    dataIndex=\"functionId\"\n                    key=\"functionId\"\n                    width=\"25%\"\n                    render={(functionId: string, stat: AppStat) => {\n                        return (\n                            <Tooltip title={stat.functionTitle}>\n                                <a href={`#catalog/apps/${stat.moduleId}/${stat.functionId}`}>\n                                    {stat.functionTitle}\n                                </a>\n                            </Tooltip>\n                        );\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.functionTitle.localeCompare(b.functionTitle);\n                    }}\n                />\n                <Table.Column\n                    title=\"Runs\"\n                    dataIndex=\"runCount\"\n                    key=\"runCount\"\n                    width=\"5%\"\n                    align=\"right\"\n                    render={(runCount: number) => {\n                        return (\n                            <div className=\"NumericColumn\">\n                                {new Intl.NumberFormat('en-US', {\n                                    useGrouping: true\n                                }).format(runCount)}\n                            </div>\n                        );\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.runCount - b.runCount;\n                    }}\n                />\n                <Table.Column\n                    title=\"Errors\"\n                    dataIndex=\"errorCount\"\n                    key=\"errorCount\"\n                    width=\"5%\"\n                    align=\"right\"\n                    render={(errorCount: number) => {\n                        return (\n                            <div className=\"NumericColumn\">\n                                {new Intl.NumberFormat('en-US', {\n                                    useGrouping: true\n                                }).format(errorCount)}\n                            </div>\n                        );\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.errorCount - b.errorCount;\n                    }}\n                />\n                <Table.Column\n                    title=\"Success\"\n                    dataIndex=\"successRate\"\n                    key=\"successRate\"\n                    width=\"10%\"\n                    render={(successRate: number) => {\n                        return (\n                            <Progress\n                                percent={successRate * 100}\n                                format={(percent: number | undefined) => {\n                                    return new Intl.NumberFormat('en-US', {\n                                        style: 'percent'\n                                    }).format(successRate);\n                                }}\n                            />\n                        );\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.successRate - b.successRate;\n                    }}\n                />\n                <Table.Column\n                    title=\"Avg Run\"\n                    dataIndex=\"averageRunTime\"\n                    key=\"averageRunTime\"\n                    width=\"10%\"\n                    render={(averageRunTime: number) => {\n                        return <NiceTimeDuration precision={2} duration={averageRunTime * 1000} />;\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.averageRunTime - b.averageRunTime;\n                    }}\n                />\n                <Table.Column\n                    title=\"Avg Queue\"\n                    dataIndex=\"averageQueueTime\"\n                    key=\"averageQueueTime\"\n                    width=\"10%\"\n                    render={(averageQueueTime: number) => {\n                        return <NiceTimeDuration precision={2} duration={averageQueueTime * 1000} />;\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.averageQueueTime - b.averageQueueTime;\n                    }}\n                />\n                <Table.Column\n                    title=\"Total Run\"\n                    dataIndex=\"totalRunTime\"\n                    key=\"totalRunTime\"\n                    width=\"10%\"\n                    render={(totalRunTime: number) => {\n                        return <NiceTimeDuration precision={2} duration={totalRunTime * 1000} />;\n                    }}\n                    sorter={(a: AppStat, b: AppStat) => {\n                        return a.totalRunTime - b.totalRunTime;\n                    }}\n                />\n            </Table>\n        );\n    }\n    render() {\n        return <div className=\"PublicAppStats\">\n            {this.renderControlBar()}\n            {this.renderAppStatsTable()}\n        </div>;\n    }\n}\n","import { Action } from 'redux';\nimport { ActionType } from '.';\nimport { StoreState, AppStat, PublicAppStatsQuery } from '../store';\nimport { CatalogClient } from '@kbase/ui-lib';\nimport { AppError } from '@kbase/ui-components';\n\nimport { ThunkDispatch } from 'redux-thunk';\n\nfunction calcAverage(total: number, count: number) {\n    if (total) {\n        if (count) {\n            return total / count;\n        } else {\n            return null;\n        }\n    } else {\n        if (count) {\n            return 0;\n        } else {\n            return null;\n        }\n    }\n}\n\nfunction calcRate(part: number, whole: number) {\n    if (part) {\n        if (whole) {\n            return part / whole;\n        } else {\n            return null;\n        }\n    } else {\n        if (whole) {\n            return 0;\n        } else {\n            return null;\n        }\n    }\n}\n\n// Search\n\nexport interface Search extends Action<ActionType.PUBLIC_APP_STATS_SEARCH> {\n    type: ActionType.PUBLIC_APP_STATS_SEARCH;\n    query: PublicAppStatsQuery;\n}\n\nexport interface SearchStart extends Action<ActionType.PUBLIC_APP_STATS_SEARCH_START> {\n    type: ActionType.PUBLIC_APP_STATS_SEARCH_START;\n}\n\nexport interface SearchError extends Action<ActionType.PUBLIC_APP_STATS_SEARCH_ERROR> {\n    type: ActionType.PUBLIC_APP_STATS_SEARCH_ERROR;\n    error: AppError;\n}\n\nexport interface SearchSuccess extends Action<ActionType.PUBLIC_APP_STATS_SEARCH_SUCCESS> {\n    type: ActionType.PUBLIC_APP_STATS_SEARCH_SUCCESS;\n    appStats: Array<AppStat>;\n}\n\nfunction searchStart(): SearchStart {\n    return {\n        type: ActionType.PUBLIC_APP_STATS_SEARCH_START\n    };\n}\n\nfunction searchError(error: AppError): SearchError {\n    return {\n        type: ActionType.PUBLIC_APP_STATS_SEARCH_ERROR,\n        error\n    };\n}\n\nfunction searchSuccess(appStats: Array<AppStat>): SearchSuccess {\n    return {\n        type: ActionType.PUBLIC_APP_STATS_SEARCH_SUCCESS,\n        appStats\n    };\n}\n\nexport function search(query: PublicAppStatsQuery) {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(searchStart());\n\n        const {\n            auth: { userAuthorization },\n            app: {\n                config: {\n                    services: {\n                        Catalog: { url: catalogUrl }\n                    }\n                }\n            }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                searchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        if (!userAuthorization) {\n            dispatch(\n                searchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        const catalogClient = new CatalogClient({\n            module: 'Catalog',\n            token: userAuthorization.token,\n            url: catalogUrl\n        });\n        const rawStats = await catalogClient.getExecAggrStats({});\n        const stats = rawStats.map((stat) => {\n            const [moduleId, functionId] = stat.full_app_id.split('/');\n            if (!moduleId || !functionId) {\n                console.warn('bad app!', stat);\n            }\n            const successRate = calcRate(stat.number_of_calls - stat.number_of_errors, stat.number_of_calls);\n            const averageRunTime = calcAverage(stat.total_exec_time, stat.number_of_calls);\n            const averageQueueTime = calcAverage(stat.total_queue_time, stat.number_of_calls);\n            return {\n                appId: stat.full_app_id,\n                moduleId,\n                functionId: functionId || '',\n                moduleTitle: moduleId,\n                functionTitle: functionId || '',\n                runCount: stat.number_of_calls,\n                errorCount: stat.number_of_errors,\n                successRate,\n                averageRunTime,\n                averageQueueTime,\n                totalRunTime: stat.total_queue_time\n            } as AppStat;\n        });\n\n        const expression = query.query.split(/\\s+/).map((term) => {\n            return new RegExp(term, 'i');\n        });\n        const filtered = stats.filter((stat) => {\n            return expression.every((term) => {\n                return (\n                    term.test(stat.moduleTitle) ||\n                    term.test(stat.moduleId) ||\n                    term.test(stat.functionTitle) ||\n                    term.test(stat.functionId)\n                );\n            });\n        });\n\n        dispatch(searchSuccess(filtered));\n    };\n}\n","import { StoreState, AppStat, PublicAppStatsQuery, SearchState } from '../../redux/store';\nimport { Action, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport Component from './view';\nimport { search } from '../../redux/actions/publicAppStats';\n\nexport interface OwnProps {}\n\ninterface StateProps {\n    searchState: SearchState;\n    appStats: Array<AppStat>;\n}\n\ninterface DispatchProps {\n    onSearch: (query: PublicAppStatsQuery) => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        views: {\n            publicAppStatsView: { appStats, searchState }\n        }\n    } = state;\n    return {\n        searchState,\n        appStats\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {\n        onSearch: (query: PublicAppStatsQuery) => {\n            dispatch(search(query) as any);\n        }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Component);\n","import React from 'react';\nimport { UserRunSummaryStat, SearchState, UserRunSummaryQuery } from '../../redux/store';\nimport { Table, Form, Input, Button, Tooltip } from 'antd';\nimport './style.css';\n\nexport interface UserRunSummaryProps {\n    searchState: SearchState;\n    userRunSummary: Array<UserRunSummaryStat>;\n    search: (query: UserRunSummaryQuery) => void;\n}\n\ninterface UserRunSummaryState { }\n\nexport default class UserRunSummary extends React.Component<UserRunSummaryProps, UserRunSummaryState> {\n    currentQuery: UserRunSummaryQuery;\n    constructor(props: UserRunSummaryProps) {\n        super(props);\n        this.currentQuery = {\n            query: ''\n        };\n    }\n    componentDidMount() {\n        this.props.search(this.currentQuery);\n    }\n    onSubmitSearch(event: React.FormEvent) {\n        event.preventDefault();\n        this.props.search(this.currentQuery);\n    }\n    onChangeQuery(event: React.ChangeEvent<HTMLInputElement>) {\n        this.currentQuery.query = event.target.value;\n    }\n    renderControlBar() {\n        return (\n            <Form layout=\"inline\" onSubmit={this.onSubmitSearch.bind(this)}>\n                <Form.Item>\n                    <Input\n                        defaultValue={this.currentQuery.query}\n                        placeholder=\"Search (leave empty for all)\"\n                        style={{ width: '20em' }}\n                        onChange={this.onChangeQuery.bind(this)}\n                    />\n                </Form.Item>\n                <Form.Item>\n                    <Button icon=\"search\" type=\"primary\" htmlType=\"submit\" />\n                </Form.Item>\n            </Form>\n        );\n    }\n    renderTable() {\n        return (\n            <Table<UserRunSummaryStat>\n                dataSource={this.props.userRunSummary}\n                loading={this.props.searchState === SearchState.SEARCHING}\n                rowKey={(stat: UserRunSummaryStat) => {\n                    return [\n                        stat.username,\n                        stat.appId,\n                        stat.moduleName,\n                        stat.functionName\n                    ].join(':');\n                }}\n                pagination={{ position: 'bottom', showSizeChanger: true }}\n                // pagination={false}\n                // scroll={{ y: '100%' }}\n                size=\"small\"\n                className=\"PreciseTable ScrollingFlexTable\"\n            >\n                <Table.Column\n                    title=\"User\"\n                    dataIndex=\"username\"\n                    // key=\"username\"\n                    width=\"30%\"\n                    render={(username: string, stat: UserRunSummaryStat) => {\n                        return (\n                            <Tooltip title={username}>\n                                <a href={`#people/${username}`} target=\"_parent\">\n                                    {username}\n                                </a>\n                            </Tooltip>\n                        );\n                    }}\n                    sorter={(a: UserRunSummaryStat, b: UserRunSummaryStat) => {\n                        return a.username.localeCompare(b.username);\n                    }}\n                />\n                <Table.Column\n                    title=\"Module\"\n                    dataIndex=\"moduleName\"\n                    // key=\"moduleId\"\n                    width=\"30%\"\n                    render={(moduleName: string) => {\n                        return (\n                            <Tooltip title={moduleName}>\n                                <a href={`#catalog/module/${moduleName}`} target=\"_parent\">\n                                    {moduleName}\n                                </a>\n                            </Tooltip>\n                        );\n                    }}\n                    sorter={(a: UserRunSummaryStat, b: UserRunSummaryStat) => {\n                        return a.moduleName.localeCompare(b.moduleName);\n                    }}\n                />\n                <Table.Column\n                    title=\"Function\"\n                    dataIndex=\"functionName\"\n                    // key=\"functionId\"\n                    width=\"30%\"\n                    render={(functionName: string, stat: UserRunSummaryStat) => {\n                        return (\n                            <Tooltip title={functionName}>\n                                <a href={`#catalog/apps/${stat.appId}`} target=\"_parent\">\n                                    {functionName}\n                                </a>\n                            </Tooltip>\n                        );\n                    }}\n                    sorter={(a: UserRunSummaryStat, b: UserRunSummaryStat) => {\n                        return a.functionName.localeCompare(b.functionName);\n                    }}\n                />\n                <Table.Column\n                    title=\"Runs\"\n                    dataIndex=\"runCount\"\n                    // key=\"runCount\"\n                    width=\"10%\"\n                    align=\"right\"\n                    render={(runCount: number, stat: UserRunSummaryStat) => {\n                        return (\n                            <div className=\"NumericColumn\">\n                                {Intl.NumberFormat('en-US', {\n                                    useGrouping: true\n                                }).format(runCount)}\n                            </div>\n                        );\n                    }}\n                    sorter={(a: UserRunSummaryStat, b: UserRunSummaryStat) => {\n                        return a.runCount - b.runCount;\n                    }}\n                    defaultSortOrder=\"descend\"\n                />\n            </Table>\n        );\n    }\n    render() {\n        return (\n            <div className=\"UserRunSummary\">\n                {this.renderControlBar()}\n                {this.renderTable()}\n            </div>\n        );\n    }\n}\n","import { Action } from 'redux';\nimport { ActionType } from '.';\nimport { StoreState, UserRunSummaryQuery, UserRunSummaryStat } from '../store';\nimport { CatalogClient } from '@kbase/ui-lib';\nimport { AppError } from '@kbase/ui-components';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { } from './utils';\n\n// Search\n\nexport interface Search extends Action<ActionType.USER_RUN_SUMMARY_SEARCH> {\n    type: ActionType.USER_RUN_SUMMARY_SEARCH;\n    query: UserRunSummaryQuery;\n}\n\nexport interface SearchStart extends Action<ActionType.USER_RUN_SUMMARY_SEARCH_START> {\n    type: ActionType.USER_RUN_SUMMARY_SEARCH_START;\n}\n\nexport interface SearchError extends Action<ActionType.USER_RUN_SUMMARY_SEARCH_ERROR> {\n    type: ActionType.USER_RUN_SUMMARY_SEARCH_ERROR;\n    error: AppError;\n}\n\nexport interface SearchSuccess extends Action<ActionType.USER_RUN_SUMMARY_SEARCH_SUCCESS> {\n    type: ActionType.USER_RUN_SUMMARY_SEARCH_SUCCESS;\n    userRunSummary: Array<UserRunSummaryStat>;\n}\n\nfunction searchStart(): SearchStart {\n    return {\n        type: ActionType.USER_RUN_SUMMARY_SEARCH_START\n    };\n}\n\nfunction searchError(error: AppError): SearchError {\n    return {\n        type: ActionType.USER_RUN_SUMMARY_SEARCH_ERROR,\n        error\n    };\n}\n\nfunction searchSuccess(userRunSummary: Array<UserRunSummaryStat>): SearchSuccess {\n    return {\n        type: ActionType.USER_RUN_SUMMARY_SEARCH_SUCCESS,\n        userRunSummary\n    };\n}\n\nexport function search(query: UserRunSummaryQuery) {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(searchStart());\n\n        const {\n            auth: { userAuthorization },\n            app: {\n                config: {\n                    services: {\n                        Catalog: { url: catalogUrl }\n                    }\n                }\n            }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                searchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        if (!userAuthorization) {\n            dispatch(\n                searchError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        const catalogClient = new CatalogClient({\n            module: 'Catalog',\n            token: userAuthorization.token,\n            url: catalogUrl\n        });\n        const params = {\n            begin: 0,\n            end: Date.now()\n        };\n        const rawStats = await catalogClient.getExecAggrTable(params);\n        const stats: Array<UserRunSummaryStat> = rawStats.map((stat) => {\n            let appId: string | null = stat.app;\n            if (!appId) {\n                appId = null;\n            }\n\n            return {\n                username: stat.user,\n                isApp: stat.app ? true : false,\n                appId: stat.app || null,\n                moduleName: stat.func_mod,\n                functionName: stat.func,\n                runCount: stat.n\n            } as UserRunSummaryStat;\n        });\n\n        const expression = query.query.split(/\\s+/).map((term) => {\n            return new RegExp(term, 'i');\n        });\n        const filtered = stats.filter((stat) => {\n            return expression.every((term) => {\n                return (\n                    (stat.appId && term.test(stat.appId)) ||\n                    term.test(stat.moduleName) ||\n                    term.test(stat.functionName) ||\n                    term.test(stat.username)\n                );\n            });\n        });\n\n        dispatch(searchSuccess(filtered));\n    };\n}\n","import { StoreState, SearchState, UserRunSummaryStat, UserRunSummaryQuery } from '../../redux/store';\nimport { Action, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport Component from './view';\nimport { search } from '../../redux/actions/userRunSummary';\n\nexport interface OwnProps {}\n\ninterface StateProps {\n    searchState: SearchState;\n    userRunSummary: Array<UserRunSummaryStat>;\n}\n\ninterface DispatchProps {\n    search: (query: UserRunSummaryQuery) => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        views: {\n            userRunSummaryView: { searchState, userRunSummary }\n        }\n    } = state;\n    return { searchState, userRunSummary };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {\n        search: (query: UserRunSummaryQuery) => {\n            dispatch(search(query) as any);\n        }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Component);\n","import React from 'react';\nimport './style.css';\nimport UserJobs from '../UserJobs';\nimport MyJobs from '../MyJobs';\nimport PublicAppStats from '../PublicAppStats';\nimport UserRunSummary from '../UserRunSummary';\nimport { MainParams } from './state';\nimport FlexTabs, { Tab } from '../FlexTabs';\nimport { Icon } from 'antd';\n\nexport interface MainProps {\n    isAdmin: boolean;\n    params: MainParams;\n    view: string;\n    setTitle: (title: string) => void;\n    setView: (view: string) => void;\n    setParams: (params: MainParams) => void;\n}\n\ninterface MainState {\n    activeTabKey: string | null;\n    defaultActiveTabKey: string | null;\n}\n\nexport default class Main extends React.Component<MainProps, MainState> {\n    defaultTabKey: string;\n    constructor(props: MainProps) {\n        super(props);\n        this.defaultTabKey = 'myJobs';\n        this.state = {\n            activeTabKey: this.defaultTabKey,\n            defaultActiveTabKey: this.defaultTabKey\n        };\n    }\n\n    componentDidMount() {\n        this.props.setTitle('Job Browser');\n\n        // window.setTimeout(() => {\n        //     this.props.setParams({ tab: 'userJobs' });\n        // }, 1000);\n    }\n\n    componentWillUnmount() {\n        this.setState({\n            activeTabKey: null\n            // defaultActiveTabKey: null\n        });\n    }\n\n    onTabsChange(activeKey: string) {\n        // console.log('tabs changed', activeKey, this.activeTabKey);\n        this.setState({ activeTabKey: activeKey });\n        // this.state.activeTabKey = activeKey;\n    }\n\n    renderJobsTab() { }\n\n    renderAdminJobsTab() { }\n\n    renderMyJobsTab() {\n        return <MyJobs />\n    }\n\n    renderUserJobsTab() {\n        return <UserJobs />\n    }\n\n    renderPublicAppStatsTab() {\n        return <PublicAppStats />\n    }\n\n    renderUserRunSummaryTab() {\n        return <UserRunSummary />\n    }\n\n    renderTabs() {\n        // let userRunTab;\n        // let userJobsTab;\n        // console.log('rendering, admin?', this.props.isAdmin);\n        // if (this.props.isAdmin) {\n        //     const tabLabel = (\n        //         <span>\n        //             User Run Summary <Icon type=\"unlock\" />\n        //         </span>\n        //     );\n        //     userRunTab = (\n        //         <Tabs.TabPane tab={tabLabel} key=\"userRunSummary\">\n        //             <UserRunSummary />\n        //         </Tabs.TabPane>\n        //     );\n        //     const userJobsTabLabel = (\n        //         <span>\n        //             User Jobs <Icon type=\"unlock\" />\n        //         </span>\n        //     );\n        //     userJobsTab = (\n        //         <Tabs.TabPane tab={userJobsTabLabel} key=\"userJobs\">\n        //             <UserJobs />\n        //         </Tabs.TabPane>\n        //     );\n        // }\n\n        // FIXME: The animated flag is set to false below because for some reason antd (on safari at least) is not\n        // correctly rendering any tab other than the first one with animation enabled (which is default).\n        // Please investigate and either find what we have done wrong or antd has.\n        // console.log('default active tab key?', this.state.defaultActiveTabKey);\n        // return (\n        //     <Tabs\n        //         animated={false}\n        //         // defaultActiveKey={this.state.activeTabKey || undefined}\n        //         activeKey={this.props.params.tab || this.state.activeTabKey || undefined}\n        //         // className=\"FlexTabs\"\n        //         onChange={this.onTabsChange.bind(this)}\n        //         destroyInactiveTabPane={true}\n        //     >\n        //         <Tabs.TabPane tab=\"My Jobs\" key=\"myJobs\">\n        //             <MyJobs />\n        //         </Tabs.TabPane>\n\n        //         <Tabs.TabPane tab=\"Public App Stats\" key=\"publicAppStats\">\n        //             <PublicAppStats />\n        //         </Tabs.TabPane>\n\n        //         {userJobsTab}\n        //         {userRunTab}\n        //     </Tabs>\n        // );\n        const tabs: Array<Tab> = [];\n\n        tabs.push({\n            tab: 'myjobs',\n            title: 'My Jobs',\n            component: this.renderMyJobsTab()\n        });\n\n        if (this.props.isAdmin) {\n            const userJobsTabLabel = (\n                <span>\n                    User Jobs <Icon type=\"unlock\" />\n                </span>\n            );\n            tabs.push({\n                tab: 'userjobs',\n                title: userJobsTabLabel,\n                component: <UserJobs />\n            })\n        }\n\n        tabs.push({\n            tab: 'appstats',\n            title: 'Public AppStats',\n            component: this.renderPublicAppStatsTab()\n        });\n\n        if (this.props.isAdmin) {\n            const tabLabel = (\n                <span>\n                    User Run Summary <Icon type=\"unlock\" />\n                </span>\n            );\n            tabs.push({\n                tab: 'userrunsummary',\n                title: tabLabel,\n                component: <UserRunSummary />\n            })\n        }\n\n        return (\n            <FlexTabs\n                tabs={tabs}\n            />\n        );\n    }\n\n    render() {\n        return <div\n            className=\"Col Col-scrollable\"\n            data-k-b-testhook-plugin=\"job-browser2\"\n        >\n            {this.renderTabs()}\n        </div>;\n    }\n}\n","import { Dispatch, Action } from 'redux';\nimport { connect } from 'react-redux';\nimport Main from './view';\nimport { StoreState } from '../../redux/store';\nimport { sendTitle, setView, setParams } from '@kbase/ui-components';\nimport { Params } from '@kbase/ui-components/lib/redux/integration/store';\n\nexport interface OwnProps { }\n\nexport type MainParams = Params<'tab'>;\n\ninterface StateProps {\n    isAdmin: boolean;\n    params: MainParams;\n    view: string;\n}\n\ninterface DispatchProps {\n    setTitle: (title: string) => void;\n    setView: (view: string) => void;\n    setParams: (params: MainParams) => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        views: {\n            mainView: { isAdmin }\n        },\n        app: {\n            runtime: {\n                navigation: { view, params: rawParams }\n            }\n        }\n    } = state;\n    // TODO: call function to coerce raw params into typed params...\n    const params: MainParams = (rawParams as unknown) as MainParams;\n    return { isAdmin, view, params };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {\n        setTitle: (title: string) => {\n            dispatch(sendTitle(title) as any);\n        },\n        setView: (view: string) => {\n            dispatch(setView(view) as any);\n        },\n        setParams: (params: MainParams) => {\n            dispatch(setParams(params) as any);\n        }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Main);\n","import { Action } from 'redux';\nimport { ActionType } from '.';\nimport { CatalogClient } from '@kbase/ui-lib';\nimport { AppError } from '@kbase/ui-components';\n\nimport { ThunkDispatch } from 'redux-thunk';\nimport { StoreState } from '../store';\n\n// MAIN Loading\n\nexport interface MainLoad extends Action<ActionType.MAIN_LOAD> {\n    type: ActionType.MAIN_LOAD;\n}\n\nexport interface MainLoadStart extends Action<ActionType.MAIN_LOAD_START> {\n    type: ActionType.MAIN_LOAD_START;\n}\n\nexport interface MainLoadSuccess extends Action<ActionType.MAIN_LOAD_SUCCESS> {\n    type: ActionType.MAIN_LOAD_SUCCESS;\n    isAdmin: boolean;\n}\n\nexport interface MainLoadError extends Action<ActionType.MAIN_LOAD_ERROR> {\n    type: ActionType.MAIN_LOAD_ERROR;\n    error: AppError;\n}\n\nexport interface Unload extends Action<ActionType.MAIN_UNLOAD> {\n    type: ActionType.MAIN_UNLOAD;\n}\n\nexport function mainLoadStart(): MainLoadStart {\n    return {\n        type: ActionType.MAIN_LOAD_START\n    };\n}\n\nexport function mainLoadSuccess(isAdmin: boolean): MainLoadSuccess {\n    return {\n        type: ActionType.MAIN_LOAD_SUCCESS,\n        isAdmin\n    };\n}\n\nexport function mainLoadError(error: AppError): MainLoadError {\n    return {\n        type: ActionType.MAIN_LOAD_ERROR,\n        error\n    };\n}\n\nexport function mainLoad() {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(mainLoadStart());\n        const {\n            auth: { userAuthorization },\n            app: {\n                config: {\n                    services: {\n                        Catalog: { url: catalogURL }\n                    }\n                }\n            }\n        } = getState();\n\n        if (!userAuthorization) {\n            dispatch(\n                mainLoadError({\n                    message: 'Not authorized',\n                    code: 'unauthorized'\n                })\n            );\n            return;\n        }\n\n        // determine auth\n        // TODO: we need a model object for interacting with the outside world\n        const catalogClient = new CatalogClient({\n            token: userAuthorization.token,\n            url: catalogURL,\n            module: 'Catalog'\n        });\n\n        try {\n            const isAdmin = await catalogClient.isAdmin();\n            dispatch(mainLoadSuccess(isAdmin ? true : false));\n        } catch (ex) {\n            dispatch(\n                mainLoadError({\n                    message: ex.message,\n                    code: 'error-checking-admin-status'\n                })\n            );\n        }\n    };\n}\n\nexport function unload() {\n    return {\n        type: ActionType.MAIN_UNLOAD\n    };\n}\n","/**\n * This is a \"loader\" component. It is solely responsible for\n */\nimport * as React from 'react';\nimport { ComponentLoadingState, StoreState, MainView } from '../../redux/store';\nimport Container from './state';\n\n// The redux connection\n\nimport { Dispatch, Action } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { Spin, Alert } from 'antd';\nimport { mainLoad, unload } from '../../redux/actions/app';\n\n// First the loader component, which takes care of a loading view, error view, and the\n// container.\n\nexport interface LoaderProps {\n    view: MainView;\n    onLoad: () => void;\n    unload: () => void;\n}\n\ninterface LoaderState { }\n\nclass Loader extends React.Component<LoaderProps, LoaderState> {\n    renderLoading() {\n        const message = (\n            <div>\n                Loading Main ... <Spin />\n            </div>\n        );\n        return (\n            <Alert\n                type=\"info\"\n                message={message}\n                style={{\n                    width: '20em',\n                    padding: '20px',\n                    margin: '20px auto'\n                }}\n            />\n        );\n    }\n\n    renderError() {\n        if (!this.props.view.error) {\n            return;\n        }\n        return <Alert type=\"error\" message={this.props.view.error.message} />;\n    }\n\n    render() {\n        switch (this.props.view.loadingState) {\n            case ComponentLoadingState.NONE:\n                return this.renderLoading();\n            case ComponentLoadingState.LOADING:\n                return this.renderLoading();\n            case ComponentLoadingState.ERROR:\n                return this.renderError();\n            case ComponentLoadingState.SUCCESS:\n                return <Container />;\n        }\n    }\n\n    componentDidMount() {\n        // console.log('did mount?', this.props.view.loadingState);\n        // this.props.onLoad();\n        switch (this.props.view.loadingState) {\n            case ComponentLoadingState.NONE:\n                // should only appear briefly as the LOAD event is processed.\n                this.props.onLoad();\n        }\n    }\n\n    componentWillUnmount() {\n        this.props.unload();\n    }\n}\n\n/**\n * This is the redux interface -- the main entry point for the Main Component.\n */\n\nexport interface OwnProps { }\n\ninterface StateProps {\n    view: MainView;\n    token: string;\n}\n\ninterface DispatchProps {\n    onLoad: () => void;\n    unload: () => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        views: { mainView }\n    } = state;\n    return {\n        view: mainView,\n        token: userAuthorization!.token\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, props: OwnProps): DispatchProps {\n    return {\n        onLoad: () => {\n            dispatch(mainLoad() as any);\n        },\n        unload: () => {\n            dispatch(unload() as any);\n        }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Loader);\n","import React from 'react';\nimport { Alert } from 'antd';\n\nexport interface ErrorBoundaryProps {\n\n}\n\ninterface ErrorBoundaryState {\n    errorMessage: string | null;\n}\n\nexport default class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n    constructor(props: ErrorBoundaryProps) {\n        super(props);\n        this.state = {\n            errorMessage: null\n        }\n    }\n\n    static getDerivedStateFromError(error: Error) {\n        return {\n            errorMessage: error.message\n        }\n    }\n\n    componentDidCatch(error: Error, errorInfo: any) {\n        console.error('ERROR', error, errorInfo);\n    }\n\n    render() {\n        if (this.state.errorMessage) {\n            const message = this.state.errorMessage;\n            return <Alert type=\"error\" message={message} />\n        }\n        return this.props.children;\n    }\n}","/**\n * The top component of the App, named appropriately App.\n *\n * As the top level component of the app, it is responsible for the setting up\n * any top level support such as the KBase integration (kbase-ui's AppBase) and\n * the redux store.\n */\n\n// 3rd party\nimport React from 'react';\nimport { createReduxStore } from './redux/store';\nimport { Provider } from 'react-redux';\n\n// KBase external\nimport { AppBase } from '@kbase/ui-components';\n\nimport { AuthGate } from '@kbase/ui-components';\n\n// project\nimport Main from './components/Main';\nimport ErrorBoundary from './components/ErrorBoundary'\n\n// file\nimport './App.css';\n\n/**\n * The app currently has no props, but we establish\n * a props interface as a placeholder.\n */\nexport interface AppProps { }\n\n/**\n * The app currently has no state, but we establish\n * a state interface as a placeholder.\n */\ninterface AppState { }\n\n// Redux setup\nconst store = createReduxStore();\n\n/**\n * The top level component for the entire web app.\n *\n * @remarks\n * Also see the [kbase-ui] support library, which provides AppBase\n *\n * @public\n */\nexport default class App extends React.Component<AppProps, AppState> {\n    constructor(props: AppProps) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        return (\n            <ErrorBoundary>\n                <Provider store={store}>\n                    <AppBase>\n                        <AuthGate required={true}>\n                            <Main />\n                        </AuthGate>\n                    </AppBase>\n                </Provider>\n            </ErrorBoundary>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/**\n * index.tsx\n * This is the root code run from the index.html, and is thus the entry point to the\n * app.\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ui_lib_1 = require(\"@kbase/ui-lib\");\n\nvar IFrameIntegration_1 = require(\"../../lib/IFrameIntegration\");\n\nvar actions_1 = require(\"../auth/actions\");\n\nvar ActionType;\n\n(function (ActionType) {\n  ActionType[\"APP_LOAD\"] = \"@kbase-ui-lib/app/load\";\n  ActionType[\"APP_LOAD_START\"] = \"@kbase-ui-lib/app/load/start\";\n  ActionType[\"APP_LOAD_SUCCESS\"] = \"@kbase-ui-lib/app/load/success\";\n  ActionType[\"APP_LOAD_ERROR\"] = \"@kbase-ui-lib/app/load/error\";\n  ActionType[\"APP_SEND_MESSAGE\"] = \"@kbase-ui-lib/app/send/message\";\n  ActionType[\"APP_SEND_TITLE\"] = \"@kbase-ui-lib/app/send/title\";\n  ActionType[\"APP_SET_TITLE\"] = \"@kbase-ui-lib/app/set/title\";\n  ActionType[\"APP_NAVIGATE\"] = \"@kbase-ui-lib/app/navigate\";\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\n\nfunction loadSuccess(config, runtime) {\n  return {\n    type: ActionType.APP_LOAD_SUCCESS,\n    config: config,\n    runtime: runtime\n  };\n}\n\nexports.loadSuccess = loadSuccess;\n\nfunction loadError(error) {\n  return {\n    type: ActionType.APP_LOAD_ERROR,\n    error: error\n  };\n}\n\nexports.loadError = loadError;\n\nfunction sendTitle(title) {\n  var _this = this;\n\n  return function (dispatch, getState) {\n    return __awaiter(_this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (channel) {\n                _context.next = 3;\n                break;\n              }\n\n              console.warn('Trying to set title without a channel!');\n              return _context.abrupt(\"return\");\n\n            case 3:\n              dispatch(sendMessage('set-title', {\n                title: title\n              }));\n              dispatch(setTitle(title));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  };\n}\n\nexports.sendTitle = sendTitle;\n\nfunction setTitle(title) {\n  return {\n    type: ActionType.APP_SET_TITLE,\n    title: title\n  };\n}\n\nexports.setTitle = setTitle;\n\nfunction navigate(navigation) {\n  return {\n    type: ActionType.APP_NAVIGATE,\n    navigation: navigation\n  };\n}\n\nexports.navigate = navigate;\nvar channel;\nvar windowListener;\n\nfunction appStart() {\n  return function (dispatch, getState) {\n    var iframeParams = IFrameIntegration_1.getParamsFromDOM();\n\n    if (!iframeParams) {\n      return;\n    }\n\n    var hostChannelId = iframeParams.channelId;\n    channel = new ui_lib_1.Channel({\n      to: hostChannelId,\n      debug: false\n    });\n    var devMode = false;\n    channel.on('start', function (params) {\n      try {\n        var services = params.config.services;\n        dispatch(loadSuccess({\n          baseUrl: '',\n          services: {\n            Groups: {\n              url: services.Groups.url\n            },\n            UserProfile: {\n              url: services.UserProfile.url\n            },\n            Workspace: {\n              url: services.Workspace.url\n            },\n            ServiceWizard: {\n              url: services.ServiceWizard.url\n            },\n            Auth: {\n              url: services.Auth.url\n            },\n            NarrativeMethodStore: {\n              url: services.NarrativeMethodStore.url\n            },\n            Catalog: {\n              url: services.Catalog.url\n            },\n            NarrativeJobService: {\n              url: services.NarrativeJobService.url\n            }\n          },\n          defaultPath: '/'\n        }, {\n          channelId: channel.id,\n          hostChannelId: hostChannelId,\n          devMode: devMode,\n          title: '',\n          navigation: {\n            view: params.view,\n            params: params.params || {}\n          }\n        }));\n\n        if (params.authorization) {\n          var _params$authorization = params.authorization,\n              token = _params$authorization.token,\n              username = _params$authorization.username,\n              realname = _params$authorization.realname,\n              roles = _params$authorization.roles;\n          dispatch(actions_1.authAuthorized(token, username, realname, roles));\n        }\n      } catch (ex) {\n        channel.send('start-error', {\n          message: ex.message\n        });\n      }\n\n      channel.send('started', {});\n    }, function (err) {\n      console.error('Error starting...', err);\n    });\n    channel.on('navigate', function (_ref) {\n      var to = _ref.to,\n          params = _ref.params;\n      dispatch(navigate({\n        view: to,\n        params: params\n      }));\n    }, function (err) {\n      console.error('Error processing \"navigate\" message');\n    });\n    channel.start();\n    channel.send('ready', {\n      channelId: channel.id,\n      greeting: 'heloooo'\n    });\n\n    windowListener = function windowListener() {\n      channel.send('clicked', {});\n    };\n\n    window.document.body.addEventListener('click', windowListener);\n    'integration app start action finished';\n  };\n}\n\nexports.appStart = appStart;\n\nfunction sendMessage(messageName, payload) {\n  return function (dispatch, getState) {\n    channel.send(messageName, payload);\n  };\n}\n\nexports.sendMessage = sendMessage;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar RootState;\n\n(function (RootState) {\n  RootState[RootState[\"NONE\"] = 0] = \"NONE\";\n  RootState[RootState[\"HOSTED\"] = 1] = \"HOSTED\";\n  RootState[RootState[\"DEVELOP\"] = 2] = \"DEVELOP\";\n  RootState[RootState[\"ERROR\"] = 3] = \"ERROR\";\n})(RootState = exports.RootState || (exports.RootState = {}));\n\nfunction makeRootStoreInitialState() {\n  return {\n    root: {\n      hostChannelId: null,\n      state: RootState.NONE\n    }\n  };\n}\n\nexports.makeRootStoreInitialState = makeRootStoreInitialState;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar AuthState;\n\n(function (AuthState) {\n  AuthState[AuthState[\"NONE\"] = 0] = \"NONE\";\n  AuthState[AuthState[\"CHECKING\"] = 1] = \"CHECKING\";\n  AuthState[AuthState[\"AUTHORIZED\"] = 2] = \"AUTHORIZED\";\n  AuthState[AuthState[\"UNAUTHORIZED\"] = 3] = \"UNAUTHORIZED\";\n  AuthState[AuthState[\"ERROR\"] = 4] = \"ERROR\";\n})(AuthState = exports.AuthState || (exports.AuthState = {}));\n\nfunction makeAuthStoreInitialState() {\n  return {\n    auth: {\n      status: AuthState.NONE,\n      message: '',\n      userAuthorization: null\n    }\n  };\n}\n\nexports.makeAuthStoreInitialState = makeAuthStoreInitialState;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar axios_1 = __importDefault(require(\"axios\"));\n\nvar DEFAULT_TIMEOUT = 10000;\n\nvar JSONRPCException =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(JSONRPCException, _Error);\n\n  function JSONRPCException(_ref) {\n    var _this;\n\n    var name = _ref.name,\n        code = _ref.code,\n        message = _ref.message,\n        error = _ref.error;\n\n    _classCallCheck(this, JSONRPCException);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(JSONRPCException).call(this, message));\n    _this.name = name;\n    _this.code = code;\n    _this.error = error;\n    return _this;\n  }\n\n  return JSONRPCException;\n}(_wrapNativeSuper(Error));\n\nexports.JSONRPCException = JSONRPCException;\n\nvar classJSONRPCServerException =\n/*#__PURE__*/\nfunction (_Error2) {\n  _inherits(classJSONRPCServerException, _Error2);\n\n  function classJSONRPCServerException() {\n    _classCallCheck(this, classJSONRPCServerException);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(classJSONRPCServerException).apply(this, arguments));\n  }\n\n  return classJSONRPCServerException;\n}(_wrapNativeSuper(Error));\n\nexports.classJSONRPCServerException = classJSONRPCServerException;\n\nvar GenericClient =\n/*#__PURE__*/\nfunction () {\n  function GenericClient(_ref2) {\n    var url = _ref2.url,\n        token = _ref2.token,\n        module = _ref2.module,\n        timeout = _ref2.timeout;\n\n    _classCallCheck(this, GenericClient);\n\n    this.url = url;\n    this.token = token || null;\n    this.module = module;\n    this.timeout = timeout || DEFAULT_TIMEOUT;\n  }\n\n  _createClass(GenericClient, [{\n    key: \"makePayload\",\n    value: function makePayload(method, param) {\n      return {\n        version: '1.1',\n        method: this.module + '.' + method,\n        id: String(Math.random()).slice(2),\n        params: param\n      };\n    }\n  }, {\n    key: \"callFunc\",\n    value: function callFunc(func, param) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var headers, params, response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                headers = {\n                  'Content-Type': 'application/json',\n                  'Accept': 'application/json'\n                };\n\n                if (this.token) {\n                  headers['Authorization'] = this.token;\n                }\n\n                params = this.makePayload(func, param);\n                _context.next = 5;\n                return axios_1.default.post(this.url, params, {\n                  headers: headers,\n                  timeout: this.timeout\n                });\n\n              case 5:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response.data.result);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return GenericClient;\n}();\n\nexports.GenericClient = GenericClient;\n\nvar AuthorizedGenericClient =\n/*#__PURE__*/\nfunction (_GenericClient) {\n  _inherits(AuthorizedGenericClient, _GenericClient);\n\n  function AuthorizedGenericClient(params) {\n    var _this2;\n\n    _classCallCheck(this, AuthorizedGenericClient);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(AuthorizedGenericClient).call(this, params));\n\n    if (!params.token) {\n      throw new Error('Authorized client requires token');\n    }\n\n    _this2.token = params.token;\n    return _this2;\n  }\n\n  _createClass(AuthorizedGenericClient, [{\n    key: \"callFunc\",\n    value: function callFunc(func, param) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var params, headers, response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                params = this.makePayload(func, param);\n                headers = {\n                  'Content-Type': 'application/json',\n                  'Accept': 'application/json',\n                  'Authorization': this.token\n                };\n                _context2.next = 4;\n                return axios_1.default.post(this.url, params, {\n                  headers: headers,\n                  timeout: this.timeout\n                });\n\n              case 4:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", response.data.result);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }]);\n\n  return AuthorizedGenericClient;\n}(GenericClient);\n\nexports.AuthorizedGenericClient = AuthorizedGenericClient;","\"use strict\";\n\nvar _slicedToArray = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Cookies = __importStar(require(\"es-cookie\"));\n\nvar ui_lib_1 = require(\"@kbase/ui-lib\");\n\nvar AuthActionType;\n\n(function (AuthActionType) {\n  AuthActionType[\"AUTH_CHECK\"] = \"auth check\";\n  AuthActionType[\"AUTH_CHECK_START\"] = \"auth check start\";\n  AuthActionType[\"AUTH_CHECK_ERROR\"] = \"auth check error\";\n  AuthActionType[\"AUTH_AUTHORIZED\"] = \"auth authorized\";\n  AuthActionType[\"AUTH_UNAUTHORIZED\"] = \"auth unauthorized\";\n  AuthActionType[\"AUTH_REMOVE_AUTHORIZATION\"] = \"auth remove authorization\";\n  AuthActionType[\"AUTH_ADD_AUTHORIZATION\"] = \"auth add authorization\";\n  AuthActionType[\"AUTH_ADD_AUTHORIZATION_ERROR\"] = \"auth add authorization error\";\n})(AuthActionType = exports.AuthActionType || (exports.AuthActionType = {}));\n\nfunction authCheckStart() {\n  return {\n    type: AuthActionType.AUTH_CHECK_START\n  };\n}\n\nexports.authCheckStart = authCheckStart;\n\nfunction authCheckError(error) {\n  return {\n    type: AuthActionType.AUTH_CHECK_ERROR,\n    error: error\n  };\n}\n\nexports.authCheckError = authCheckError;\n\nfunction authAuthorized(token, username, realname, roles) {\n  return {\n    type: AuthActionType.AUTH_AUTHORIZED,\n    token: token,\n    username: username,\n    realname: realname,\n    roles: roles\n  };\n}\n\nexports.authAuthorized = authAuthorized;\n\nfunction authUnauthorized() {\n  return {\n    type: AuthActionType.AUTH_UNAUTHORIZED\n  };\n}\n\nexports.authUnauthorized = authUnauthorized;\n\nfunction checkAuth() {\n  return function (dispatch, getState) {\n    dispatch(authCheckStart());\n\n    var _getState = getState(),\n        url = _getState.app.config.services.Auth.url;\n\n    var token = Cookies.get('kbase_session');\n\n    if (!token) {\n      dispatch(authUnauthorized());\n      return;\n    }\n\n    var auth = new ui_lib_1.AuthClient({\n      url: url\n    });\n    Promise.all([auth.getTokenInfo(token), auth.getMe(token)]).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          tokenInfo = _ref2[0],\n          account = _ref2[1];\n\n      var roles = account.roles.map(function (_ref3) {\n        var id = _ref3.id,\n            desc = _ref3.desc;\n        return id;\n      });\n      dispatch(authAuthorized(token, account.user, account.display, roles));\n    }).catch(function (err) {\n      console.error('auth check error', err);\n      dispatch(authCheckError({\n        code: 'error',\n        message: err.message\n      }));\n    });\n  };\n}\n\nexports.checkAuth = checkAuth;\n\nfunction removeAuthorization() {\n  return function (dispatch, getState) {\n    Cookies.remove('kbase_session');\n    dispatch(authUnauthorized());\n  };\n}\n\nexports.removeAuthorization = removeAuthorization;\n\nfunction addAuthorization(token) {\n  return function (dispatch, getState) {\n    var _getState2 = getState(),\n        url = _getState2.app.config.services.Auth.url;\n\n    Cookies.set('kbase_session', token);\n    var auth = new ui_lib_1.AuthClient({\n      url: url\n    });\n    Promise.all([auth.getTokenInfo(token), auth.getMe(token)]).then(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          tokenInfo = _ref5[0],\n          account = _ref5[1];\n\n      var roles = account.roles.map(function (_ref6) {\n        var id = _ref6.id,\n            desc = _ref6.desc;\n        return id;\n      });\n      dispatch(authAuthorized(token, account.user, account.display, roles));\n    }).catch(function (err) {\n      console.error('auth check error', err);\n      dispatch(authCheckError({\n        code: 'error',\n        message: err.message\n      }));\n    });\n  };\n}\n\nexports.addAuthorization = addAuthorization;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar AppState;\n\n(function (AppState) {\n  AppState[AppState[\"NONE\"] = 0] = \"NONE\";\n  AppState[AppState[\"LOADING\"] = 1] = \"LOADING\";\n  AppState[AppState[\"READY\"] = 2] = \"READY\";\n  AppState[AppState[\"ERROR\"] = 3] = \"ERROR\";\n})(AppState = exports.AppState || (exports.AppState = {}));\n\nfunction makeIntegrationStoreInitialState() {\n  return {\n    app: {\n      status: AppState.NONE,\n      config: {\n        baseUrl: '',\n        services: {\n          Groups: {\n            url: ''\n          },\n          UserProfile: {\n            url: ''\n          },\n          Workspace: {\n            url: ''\n          },\n          ServiceWizard: {\n            url: ''\n          },\n          Auth: {\n            url: ''\n          },\n          NarrativeMethodStore: {\n            url: ''\n          },\n          Catalog: {\n            url: ''\n          },\n          NarrativeJobService: {\n            url: ''\n          }\n        },\n        defaultPath: ''\n      },\n      runtime: {\n        channelId: null,\n        hostChannelId: null,\n        devMode: null,\n        title: '',\n        navigation: {\n          view: '',\n          params: {}\n        }\n      }\n    }\n  };\n}\n\nexports.makeIntegrationStoreInitialState = makeIntegrationStoreInitialState;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar DevelopStatus;\n\n(function (DevelopStatus) {\n  DevelopStatus[\"NONE\"] = \"developStatus/none\";\n  DevelopStatus[\"LOADING\"] = \"developStatus/loading\";\n  DevelopStatus[\"READY\"] = \"developStatus/ready\";\n  DevelopStatus[\"ERROR\"] = \"developStatus/error\";\n})(DevelopStatus = exports.DevelopStatus || (exports.DevelopStatus = {}));\n\nfunction makeDevelopStore() {\n  return {\n    develop: {\n      title: 'SET TITLE HERE',\n      status: DevelopStatus.NONE,\n      view: '',\n      params: {}\n    }\n  };\n}\n\nexports.makeDevelopStore = makeDevelopStore;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ui_lib_1 = require(\"@kbase/ui-lib\");\n\nvar ui_lib_2 = require(\"@kbase/ui-lib\");\n\nvar DevelopActionType;\n\n(function (DevelopActionType) {\n  DevelopActionType[\"DEVELOP_SET_TITLE\"] = \"develop/set/title\";\n  DevelopActionType[\"DEVELOP_START\"] = \"develop/start\";\n  DevelopActionType[\"DEVELOP_LOAD_SUCCESS\"] = \"develop/load/success\";\n  DevelopActionType[\"DEVELOP_SET_VIEW\"] = \"develop/set/view\";\n  DevelopActionType[\"DEVELOP_SET_PARAMS\"] = \"develop/set/params\";\n})(DevelopActionType = exports.DevelopActionType || (exports.DevelopActionType = {}));\n\nfunction setTitle(title) {\n  return {\n    type: DevelopActionType.DEVELOP_SET_TITLE,\n    title: title\n  };\n}\n\nexports.setTitle = setTitle;\n\nfunction loadSuccess(hostChannelId) {\n  return {\n    type: DevelopActionType.DEVELOP_LOAD_SUCCESS,\n    hostChannelId: hostChannelId\n  };\n}\n\nexports.loadSuccess = loadSuccess;\n\nfunction setView(view) {\n  return {\n    type: DevelopActionType.DEVELOP_SET_VIEW,\n    view: view\n  };\n}\n\nexports.setView = setView;\n\nfunction setParams(params) {\n  return {\n    type: DevelopActionType.DEVELOP_SET_PARAMS,\n    params: params\n  };\n}\n\nexports.setParams = setParams;\nvar channel;\nvar devConfig = {\n  baseUrl: '',\n  defaultPath: '',\n  services: {\n    Groups: {\n      url: '/services/groups'\n    },\n    UserProfile: {\n      url: '/services/user_profile/rpc'\n    },\n    Workspace: {\n      url: '/services/ws'\n    },\n    ServiceWizard: {\n      url: '/services/service_wizard'\n    },\n    Auth: {\n      url: '/services/auth'\n    },\n    NarrativeMethodStore: {\n      url: '/services/narrative_method_store/rpc'\n    },\n    Catalog: {\n      url: '/services/catalog/rpc'\n    },\n    NarrativeJobService: {\n      url: '/services/njs_wrapper'\n    }\n  }\n};\n\nfunction setupAndStartChannel(channel, dispatch) {\n  var _this = this;\n\n  channel.on('ready', function (params) {\n    return __awaiter(_this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var auth, authInfo;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              channel.setPartner(params.channelId);\n              auth = new ui_lib_2.Auth(devConfig.services.Auth.url);\n              _context.next = 4;\n              return auth.checkAuth();\n\n            case 4:\n              authInfo = _context.sent;\n\n              if (authInfo.status === ui_lib_2.AuthState.AUTHENTICATED) {\n                channel.send('start', {\n                  authorization: {\n                    token: authInfo.userAuthorization.token,\n                    username: authInfo.userAuthorization.username,\n                    realname: authInfo.userAuthorization.realname,\n                    roles: authInfo.userAuthorization.roles\n                  },\n                  config: devConfig,\n                  view: '',\n                  params: {}\n                });\n              } else {\n                channel.send('start', {\n                  authorization: null,\n                  config: devConfig\n                });\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  });\n  channel.on('get-auth-status', function () {\n    return __awaiter(_this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var auth, authInfo;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              auth = new ui_lib_2.Auth(devConfig.services.Auth.url);\n              _context2.next = 3;\n              return auth.checkAuth();\n\n            case 3:\n              authInfo = _context2.sent;\n\n              if (authInfo.status === ui_lib_2.AuthState.AUTHENTICATED) {\n                channel.send('auth-status', {\n                  token: authInfo.userAuthorization.token,\n                  username: authInfo.userAuthorization.username,\n                  realname: authInfo.userAuthorization.realname,\n                  roles: authInfo.userAuthorization.roles\n                });\n              } else {\n                channel.send('auth-status', {\n                  token: null,\n                  username: '',\n                  realname: '',\n                  roles: []\n                });\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n  });\n  channel.on('get-config', function () {\n    channel.send('config', {\n      value: devConfig\n    });\n  });\n  channel.on('add-button', function (_ref) {\n    var button = _ref.button;\n    console.warn('add button not yet supported');\n  });\n  channel.on('open-window', function (_ref2) {\n    var url = _ref2.url;\n    window.location.href = url;\n  });\n  channel.on('ui-navigate', function (to) {\n    console.warn('ui-navigate not yet supported');\n  });\n  channel.on('post-form', function (config) {\n    console.warn('form-post not yet supported');\n  });\n  channel.on('set-title', function (config) {\n    dispatch(setTitle(config.title));\n  });\n  channel.start();\n}\n\nfunction start(window) {\n  var _this2 = this;\n\n  return function (dispatch, getState) {\n    return __awaiter(_this2, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              channel = new ui_lib_1.Channel({\n                debug: false\n              });\n              setupAndStartChannel(channel, dispatch);\n              dispatch(loadSuccess(channel.id));\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n  };\n}\n\nexports.start = start;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar AppBase_1 = require(\"./components/AppBase\");\n\nexports.AppBase = AppBase_1.default;\n\nvar Loader_1 = require(\"./components/Loader\");\n\nexports.Loader = Loader_1.default;\n\nvar store_1 = require(\"./redux/store\");\n\nexports.makeBaseStoreState = store_1.makeBaseStoreState;\n\nvar NiceTimeDuration_1 = require(\"./components/NiceTimeDuration\");\n\nexports.NiceTimeDuration = NiceTimeDuration_1.default;\n\nvar NiceRelativeTime_1 = require(\"./components/NiceRelativeTime\");\n\nexports.NiceRelativeTime = NiceRelativeTime_1.default;\n\nvar NiceElapsedTime_1 = require(\"./components/NiceElapsedTime\");\n\nexports.NiceElapsedTime = NiceElapsedTime_1.default;\n\nvar actions_1 = require(\"./redux/integration/actions\");\n\nexports.sendTitle = actions_1.sendTitle;\nexports.setTitle = actions_1.setTitle;\nexports.navigate = actions_1.navigate;\n\nvar AuthGate_1 = require(\"./components/AuthGate\");\n\nexports.AuthGate = AuthGate_1.default;\n\nvar actions_2 = require(\"./redux/develop/actions\");\n\nexports.setView = actions_2.setView;\nexports.setParams = actions_2.setParams;\n\nvar reducers_1 = require(\"./redux/reducers\");\n\nexports.baseReducer = reducers_1.default;\n\nvar store_2 = require(\"./redux/root/store\");\n\nexports.RootState = store_2.RootState;\n\nvar FlexTabs_1 = require(\"./components/FlexTabs\");\n\nexports.FlexTabs = FlexTabs_1.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction findHostElement() {\n  var node;\n\n  if (window.frameElement) {\n    return window.frameElement || null;\n  } else {\n    return window.document.querySelector('[data-plugin-host=\"true\"]');\n  }\n}\n\nfunction getParamsFromIFrame() {\n  var hostNode = findHostElement();\n\n  if (!hostNode) {\n    return null;\n  }\n\n  if (!hostNode.hasAttribute('data-params')) {\n    return null;\n  }\n\n  var params = hostNode.getAttribute('data-params');\n\n  if (params === null) {\n    return null;\n  }\n\n  var iframeParams = JSON.parse(decodeURIComponent(params));\n  return iframeParams;\n}\n\nexports.getParamsFromIFrame = getParamsFromIFrame;\n\nfunction getParamsFromDOM() {\n  var hostNode = findHostElement();\n\n  if (!hostNode) {\n    return null;\n  }\n\n  if (!hostNode.hasAttribute('data-params')) {\n    return null;\n  }\n\n  var params = hostNode.getAttribute('data-params');\n\n  if (params === null) {\n    return null;\n  }\n\n  var iframeParams = JSON.parse(decodeURIComponent(params));\n  return iframeParams;\n}\n\nexports.getParamsFromDOM = getParamsFromDOM;\n\nfunction getChannelID() {\n  var hostNode = findHostElement();\n\n  if (!hostNode) {\n    return null;\n  }\n\n  if (!hostNode.hasAttribute('data-channel')) {\n    return null;\n  }\n\n  return hostNode.getAttribute('data-channel');\n}\n\nexports.getChannelID = getChannelID;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar store_1 = require(\"../redux/integration/store\");\n\nvar Loader =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Loader, _React$Component);\n\n  function Loader() {\n    _classCallCheck(this, Loader);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Loader).apply(this, arguments));\n  }\n\n  _createClass(Loader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.onLoad();\n    }\n  }, {\n    key: \"renderError\",\n    value: function renderError() {\n      if (!this.props.error) {\n        return React.createElement(\"div\", {\n          \"data-k-b-testhook-component\": \"Loader\",\n          \"data-k-b-testhook-element\": \"error\"\n        }, \"An Unknown Error Occurred!\");\n      }\n\n      return React.createElement(\"div\", {\n        \"data-k-b-testhook-component\": \"Loader\",\n        \"data-k-b-testhook-element\": \"error\"\n      }, this.props.error.message);\n    }\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading() {\n      return React.createElement(\"div\", {\n        \"data-k-b-testhook-component\": \"Loader\",\n        \"data-k-b-testhook-element\": \"loading\"\n      }, \"Loading...\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      switch (this.props.status) {\n        case store_1.AppState.NONE:\n        case store_1.AppState.LOADING:\n          return this.renderLoading();\n\n        case store_1.AppState.ERROR:\n          return this.renderError();\n\n        case store_1.AppState.READY:\n          return this.props.children;\n      }\n    }\n  }]);\n\n  return Loader;\n}(React.Component);\n\nexports.default = Loader;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar RootActionType;\n\n(function (RootActionType) {\n  RootActionType[RootActionType[\"ROOT_START_HOSTED_ENVIRONMENT\"] = 0] = \"ROOT_START_HOSTED_ENVIRONMENT\";\n  RootActionType[RootActionType[\"ROOT_START_DEVELOPMENT_ENVIRONMENT\"] = 1] = \"ROOT_START_DEVELOPMENT_ENVIRONMENT\";\n})(RootActionType = exports.RootActionType || (exports.RootActionType = {}));\n\nfunction startHostedEnvironment(params) {\n  return {\n    type: RootActionType.ROOT_START_HOSTED_ENVIRONMENT,\n    params: params\n  };\n}\n\nexports.startHostedEnvironment = startHostedEnvironment;\n\nfunction startDevelopmentEnvironment() {\n  return {\n    type: RootActionType.ROOT_START_DEVELOPMENT_ENVIRONMENT\n  };\n}\n\nexports.startDevelopmentEnvironment = startDevelopmentEnvironment;","\"use strict\";\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar axios_1 = __importDefault(require(\"axios\"));\n\nvar ServiceClient =\n/*#__PURE__*/\nfunction () {\n  function ServiceClient(_ref) {\n    var url = _ref.url,\n        token = _ref.token,\n        timeout = _ref.timeout;\n\n    _classCallCheck(this, ServiceClient);\n\n    this.url = url;\n    this.token = token || null;\n    this.timeout = timeout;\n  }\n\n  _createClass(ServiceClient, [{\n    key: \"makePayload\",\n    value: function makePayload(method, param) {\n      return {\n        version: '1.1',\n        method: this.constructor.module + '.' + method,\n        id: String(Math.random()).slice(2),\n        params: [param]\n      };\n    }\n  }, {\n    key: \"makeEmptyPayload\",\n    value: function makeEmptyPayload(method) {\n      return {\n        version: '1.1',\n        method: this.constructor.module + '.' + method,\n        id: String(Math.random()).slice(2),\n        params: []\n      };\n    }\n  }]);\n\n  return ServiceClient;\n}();\n\nexports.ServiceClient = ServiceClient;\n\nvar AuthorizedServiceClient =\n/*#__PURE__*/\nfunction (_ServiceClient) {\n  _inherits(AuthorizedServiceClient, _ServiceClient);\n\n  function AuthorizedServiceClient(params) {\n    var _this;\n\n    _classCallCheck(this, AuthorizedServiceClient);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthorizedServiceClient).call(this, params));\n\n    if (!params.token) {\n      throw new Error('Authorized client requires token');\n    }\n\n    _this.token = params.token;\n    return _this;\n  }\n\n  _createClass(AuthorizedServiceClient, [{\n    key: \"callFunc\",\n    value: function callFunc(func, param) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var connection = axios_1.default.post(_this2.url, _this2.makePayload(func, param), {\n          headers: {\n            Authorization: _this2.token,\n            'Content-Type': 'application/json',\n            Accept: 'application/json'\n          },\n          timeout: _this2.timeout\n        });\n        connection.then(function (response) {\n          resolve(response.data);\n        }).catch(function (err) {\n          reject(err);\n        });\n      });\n    }\n  }]);\n\n  return AuthorizedServiceClient;\n}(ServiceClient);\n\nexports.AuthorizedServiceClient = AuthorizedServiceClient;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar axios_1 = __importDefault(require(\"axios\"));\n\nvar endpoints = {\n  root: '',\n  tokenInfo: 'api/V2/token',\n  apiMe: 'api/V2/me',\n  me: 'me',\n  loginStart: 'login/start',\n  logout: 'logout',\n  loginChoice: 'login/choice',\n  loginCreate: 'login/create',\n  loginUsernameSuggest: 'login/suggestname',\n  loginPick: 'login/pick',\n  loginCancel: 'login/cancel',\n  linkStart: 'link/start',\n  linkCancel: 'link/cancel',\n  linkChoice: 'link/choice',\n  linkPick: 'link/pick',\n  linkRemove: 'me/unlink',\n  tokens: 'tokens',\n  tokensRevoke: 'tokens/revoke',\n  tokensRevokeAll: 'tokens/revokeall',\n  userSearch: 'api/V2/users/search',\n  adminUserSearch: 'api/V2/admin/search',\n  adminUser: 'api/V2/admin/user'\n};\n\nvar AuthClient =\n/*#__PURE__*/\nfunction () {\n  function AuthClient(_ref) {\n    var url = _ref.url;\n\n    _classCallCheck(this, AuthClient);\n\n    this.url = url;\n  }\n\n  _createClass(AuthClient, [{\n    key: \"makePath\",\n    value: function makePath(path) {\n      if (typeof path === 'string') {\n        return [this.url].concat([path]).join('/');\n      }\n\n      return [this.url].concat(path).join('/');\n    }\n  }, {\n    key: \"root\",\n    value: function root() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios_1.default.get(this.makePath([endpoints.root]), {\n                  headers: {\n                    Accept: 'application/json'\n                  }\n                });\n\n              case 2:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response.data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"getTokenInfo\",\n    value: function getTokenInfo(token) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _ref2, data;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios_1.default.get(this.makePath([endpoints.tokenInfo]), {\n                  headers: {\n                    Accept: 'application/json',\n                    Authorization: token\n                  }\n                });\n\n              case 2:\n                _ref2 = _context2.sent;\n                data = _ref2.data;\n                return _context2.abrupt(\"return\", data);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"getMe\",\n    value: function getMe(token) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var _ref3, data;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return axios_1.default.get(this.makePath([endpoints.apiMe]), {\n                  headers: {\n                    Accept: 'application/json',\n                    Authorization: token\n                  }\n                });\n\n              case 2:\n                _ref3 = _context3.sent;\n                data = _ref3.data;\n                return _context3.abrupt(\"return\", data);\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }]);\n\n  return AuthClient;\n}();\n\nexports.default = AuthClient;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nrequire(\"./AppBase.css\");\n\nrequire(\"typeface-oxygen\");\n\nrequire(\"typeface-roboto\");\n\nrequire(\"../style/fonts.css\");\n\nrequire(\"../style/common.css\");\n\nvar Integration_1 = __importDefault(require(\"./Integration\"));\n\nvar Root_1 = __importDefault(require(\"./Root\"));\n\nvar AppBase =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AppBase, _React$Component);\n\n  function AppBase(props) {\n    var _this;\n\n    _classCallCheck(this, AppBase);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppBase).call(this, props));\n    _this.hosted = window.frameElement ? true : false;\n    _this.state = {\n      clicks: 0\n    };\n    return _this;\n  }\n\n  _createClass(AppBase, [{\n    key: \"clickMe\",\n    value: function clickMe() {\n      this.setState({\n        clicks: this.state.clicks + 1\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Root_1.default, null, React.createElement(Integration_1.default, null, React.createElement(\"div\", {\n        className: \"Row Row-fullheight Row-scrollable\",\n        \"data-k-b-testhook-component\": \"AppBase\"\n      }, React.createElement(\"div\", {\n        className: \"Col scrollable\"\n      }, this.props.children))));\n    }\n  }]);\n\n  return AppBase;\n}(React.Component);\n\nexports.default = AppBase;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar actions_1 = require(\"../../redux/integration/actions\");\n\nvar Loader_1 = __importDefault(require(\"../Loader\"));\n\nvar container_1 = __importDefault(require(\"./container\"));\n\nvar Wrapped =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Wrapped, _React$Component);\n\n  function Wrapped() {\n    _classCallCheck(this, Wrapped);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Wrapped).apply(this, arguments));\n  }\n\n  _createClass(Wrapped, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Loader_1.default, {\n        status: this.props.status,\n        error: this.props.error,\n        onLoad: this.props.onLoad\n      }, React.createElement(container_1.default, null, this.props.children));\n    }\n  }]);\n\n  return Wrapped;\n}(React.Component);\n\nfunction mapStateToProps(state, props) {\n  var status = state.app.status;\n  return {\n    status: status\n  };\n}\n\nexports.mapStateToProps = mapStateToProps;\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onLoad: function onLoad() {\n      dispatch(actions_1.appStart());\n    }\n  };\n}\n\nexports.mapDispatchToProps = mapDispatchToProps;\nexports.default = react_redux_1.connect(mapStateToProps, mapDispatchToProps)(Wrapped);","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar actions_1 = require(\"../../redux/integration/actions\");\n\nvar view_1 = __importDefault(require(\"./view\"));\n\nfunction mapStateToProps(state, props) {\n  var _state$app = state.app,\n      status = _state$app.status,\n      defaultPath = _state$app.config.defaultPath,\n      title = _state$app.runtime.title,\n      hostChannelId = state.root.hostChannelId;\n  return {\n    defaultPath: defaultPath,\n    hostChannelId: hostChannelId,\n    title: title\n  };\n}\n\nexports.mapStateToProps = mapStateToProps;\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onAppStart: function onAppStart() {\n      dispatch(actions_1.appStart());\n    }\n  };\n}\n\nexports.mapDispatchToProps = mapDispatchToProps;\nexports.default = react_redux_1.connect(mapStateToProps, mapDispatchToProps)(view_1.default);","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nrequire(\"./style.css\");\n\nvar KBaseIntegration =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(KBaseIntegration, _React$Component);\n\n  function KBaseIntegration(props) {\n    var _this;\n\n    _classCallCheck(this, KBaseIntegration);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(KBaseIntegration).call(this, props));\n    _this.state = {\n      ready: false\n    };\n    _this.hosted = window.frameElement ? true : false;\n    _this.channel = null;\n    return _this;\n  }\n\n  _createClass(KBaseIntegration, [{\n    key: \"teardownChannel\",\n    value: function teardownChannel() {}\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        ready: true\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.teardownChannel();\n    }\n  }, {\n    key: \"renderReady\",\n    value: function renderReady() {\n      return React.createElement(React.Fragment, null, this.props.children);\n    }\n  }, {\n    key: \"renderNotReady\",\n    value: function renderNotReady() {\n      return React.createElement(\"div\", {\n        \"data-k-b-testhook-element\": \"notready\"\n      }, \"Loading...\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        \"data-k-b-testhook-component\": \"KBaseIntegration\",\n        className: \"scrollable-flex-column\"\n      }, this.state.ready ? this.renderReady() : this.renderNotReady());\n    }\n  }]);\n\n  return KBaseIntegration;\n}(React.Component);\n\nexports.default = KBaseIntegration;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar view_1 = __importDefault(require(\"./view\"));\n\nvar actions_1 = require(\"../../redux/root/actions\");\n\nfunction mapStateToProps(state, props) {\n  var rootState = state.root.state;\n  return {\n    rootState: rootState\n  };\n}\n\nexports.mapStateToProps = mapStateToProps;\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    startHostedEnvironment: function startHostedEnvironment(params) {\n      dispatch(actions_1.startHostedEnvironment(params));\n    },\n    startDevelopmentEnvironment: function startDevelopmentEnvironment() {\n      dispatch(actions_1.startDevelopmentEnvironment());\n    }\n  };\n}\n\nexports.mapDispatchToProps = mapDispatchToProps;\nexports.default = react_redux_1.connect(mapStateToProps, mapDispatchToProps)(view_1.default);","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar IFrameIntegration_1 = require(\"../../lib/IFrameIntegration\");\n\nvar store_1 = require(\"../../redux/root/store\");\n\nvar Develop_1 = __importDefault(require(\"../Develop\"));\n\nfunction rootStateToLabel(state) {\n  switch (state) {\n    case store_1.RootState.NONE:\n      return 'none';\n\n    case store_1.RootState.HOSTED:\n      return 'hosted';\n\n    case store_1.RootState.DEVELOP:\n      return 'develop';\n\n    case store_1.RootState.ERROR:\n      return 'error';\n  }\n}\n\nvar Root =\n/*#__PURE__*/\nfunction (_react_1$default$Comp) {\n  _inherits(Root, _react_1$default$Comp);\n\n  function Root(props) {\n    var _this;\n\n    _classCallCheck(this, Root);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Root).call(this, props));\n    _this.iframeParams = IFrameIntegration_1.getParamsFromIFrame();\n    return _this;\n  }\n\n  _createClass(Root, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.iframeParams) {\n        this.props.startHostedEnvironment(this.iframeParams);\n      } else {\n        this.props.startDevelopmentEnvironment();\n      }\n    }\n  }, {\n    key: \"renderDebug\",\n    value: function renderDebug() {\n      var status = rootStateToLabel(this.props.rootState);\n      return react_1.default.createElement(\"div\", null, \"Root State: \", status, \", \");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      switch (this.props.rootState) {\n        case store_1.RootState.NONE:\n          return react_1.default.createElement(\"div\", null, \"Loading...\");\n\n        case store_1.RootState.HOSTED:\n          return react_1.default.createElement(react_1.default.Fragment, null, this.props.children);\n\n        case store_1.RootState.DEVELOP:\n          return react_1.default.createElement(Develop_1.default, null, this.props.children);\n\n        case store_1.RootState.ERROR:\n          return react_1.default.createElement(\"div\", null, \"Error!\");\n      }\n    }\n  }]);\n\n  return Root;\n}(react_1.default.Component);\n\nexports.default = Root;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar view_1 = __importDefault(require(\"./view\"));\n\nvar actions_1 = require(\"../../redux/develop/actions\");\n\nvar actions_2 = require(\"../../redux/auth/actions\");\n\nfunction mapStateToProps(state, props) {\n  var hostChannelId = state.root.hostChannelId,\n      _state$develop = state.develop,\n      title = _state$develop.title,\n      developStatus = _state$develop.status,\n      auth = state.auth;\n  return {\n    title: title,\n    hostChannelId: hostChannelId,\n    authorization: auth,\n    developStatus: developStatus\n  };\n}\n\nexports.mapStateToProps = mapStateToProps;\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    start: function start(window) {\n      dispatch(actions_1.start(window));\n    },\n    addAuthorization: function addAuthorization(token) {\n      dispatch(actions_2.addAuthorization(token));\n    },\n    removeAuthorization: function removeAuthorization() {\n      dispatch(actions_2.removeAuthorization());\n    }\n  };\n}\n\nexports.mapDispatchToProps = mapDispatchToProps;\nexports.default = react_redux_1.connect(mapStateToProps, mapDispatchToProps)(view_1.default);","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nrequire(\"./style.css\");\n\nvar antd_1 = require(\"antd\");\n\nvar store_1 = require(\"../../redux/auth/store\");\n\nvar store_2 = require(\"../../redux/develop/store\");\n\nfunction authStateLabel(status) {\n  switch (status) {\n    case store_1.AuthState.NONE:\n      return 'none';\n\n    case store_1.AuthState.CHECKING:\n      return 'checking';\n\n    case store_1.AuthState.AUTHORIZED:\n      return 'authorized';\n\n    case store_1.AuthState.UNAUTHORIZED:\n      return 'unauthorized';\n\n    case store_1.AuthState.ERROR:\n      return 'error';\n\n    default:\n      return 'OTHER';\n  }\n}\n\nvar Develop =\n/*#__PURE__*/\nfunction (_react_1$default$Comp) {\n  _inherits(Develop, _react_1$default$Comp);\n\n  function Develop(props) {\n    var _this;\n\n    _classCallCheck(this, Develop);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Develop).call(this, props));\n    _this.tokenRef = react_1.default.createRef();\n    return _this;\n  }\n\n  _createClass(Develop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.start(window);\n    }\n  }, {\n    key: \"onLoginClick\",\n    value: function onLoginClick() {\n      if (this.tokenRef.current === null) {\n        return;\n      }\n\n      var token = this.tokenRef.current.value;\n\n      if (token.length === 0) {\n        return;\n      }\n\n      this.props.addAuthorization(token);\n    }\n  }, {\n    key: \"onLogoutClick\",\n    value: function onLogoutClick() {\n      this.props.removeAuthorization();\n    }\n  }, {\n    key: \"renderAuthForm\",\n    value: function renderAuthForm() {\n      return react_1.default.createElement(\"div\", {\n        className: \"Develop-auth-form\"\n      }, react_1.default.createElement(\"p\", null, react_1.default.createElement(\"b\", null, \"Not Authenticated!\"), \" Enter a Login Token below.\"), \"Token: \", react_1.default.createElement(\"input\", {\n        ref: this.tokenRef,\n        style: {\n          width: '30em'\n        }\n      }), react_1.default.createElement(antd_1.Button, {\n        icon: \"login\",\n        htmlType: \"submit\",\n        onClick: this.onLoginClick.bind(this)\n      }, \"Login\"));\n    }\n  }, {\n    key: \"renderAuthToolbar\",\n    value: function renderAuthToolbar() {\n      if (!this.props.authorization.userAuthorization) {\n        return;\n      }\n\n      return react_1.default.createElement(\"div\", {\n        className: \"Develop-auth-toolbar\"\n      }, \"Logged in as\", ' ', react_1.default.createElement(\"b\", null, react_1.default.createElement(\"span\", null, this.props.authorization.userAuthorization.realname), \" (\", react_1.default.createElement(\"span\", null, this.props.authorization.userAuthorization.username)), \")\", ' ', react_1.default.createElement(antd_1.Button, {\n        icon: \"logout\",\n        onClick: this.onLogoutClick.bind(this)\n      }, \"Logout\"));\n    }\n  }, {\n    key: \"renderAuth\",\n    value: function renderAuth() {\n      switch (this.props.authorization.status) {\n        case store_1.AuthState.CHECKING:\n          return react_1.default.createElement(\"div\", null);\n\n        case store_1.AuthState.AUTHORIZED:\n          return react_1.default.createElement(\"div\", {\n            className: \"Auth Auth-authorized scrollable-flex-column\"\n          }, this.renderAuthToolbar());\n\n        case store_1.AuthState.NONE:\n        case store_1.AuthState.UNAUTHORIZED:\n          return react_1.default.createElement(\"div\", {\n            className: \"Auth Auth-unauthorized scrollable-flex-column\"\n          }, this.renderAuthForm());\n\n        case store_1.AuthState.ERROR:\n          return react_1.default.createElement(\"div\", {\n            className: \"Auth Auth-unauthorized scrollable-flex-column\"\n          }, react_1.default.createElement(\"p\", null, \"Error\"), this.props.authorization.message);\n\n        default:\n          return react_1.default.createElement(\"div\", null);\n      }\n    }\n  }, {\n    key: \"renderDevError\",\n    value: function renderDevError() {\n      return react_1.default.createElement(\"div\", null, \"Dev Error\");\n    }\n  }, {\n    key: \"renderDevReady\",\n    value: function renderDevReady() {\n      var params = {\n        channelId: this.props.hostChannelId\n      };\n      var paramsString = JSON.stringify(params);\n      return react_1.default.createElement(\"div\", {\n        \"data-params\": encodeURIComponent(paramsString),\n        \"data-plugin-host\": \"true\",\n        className: \"Develop\"\n      }, react_1.default.createElement(\"div\", {\n        className: \"Develop-area\"\n      }, react_1.default.createElement(antd_1.Tag, null, \"Develop Mode Area\"), this.renderTitleToolbar(), this.renderAuth()), this.props.children);\n    }\n  }, {\n    key: \"renderDevLoading\",\n    value: function renderDevLoading() {\n      var message = react_1.default.createElement(\"div\", {\n        className: \"Develop-area\"\n      }, react_1.default.createElement(antd_1.Spin, null), \" Loading Dev Environment...\");\n      return react_1.default.createElement(antd_1.Alert, {\n        message: message\n      });\n    }\n  }, {\n    key: \"renderDev\",\n    value: function renderDev() {\n      switch (this.props.developStatus) {\n        case store_2.DevelopStatus.NONE:\n        case store_2.DevelopStatus.LOADING:\n          return this.renderDevLoading();\n\n        case store_2.DevelopStatus.ERROR:\n          return this.renderDevError();\n\n        case store_2.DevelopStatus.READY:\n          return this.renderDevReady();\n      }\n    }\n  }, {\n    key: \"renderTitleToolbar\",\n    value: function renderTitleToolbar() {\n      return react_1.default.createElement(\"div\", {\n        className: \"Develop-toolbar\"\n      }, \"Title: \", react_1.default.createElement(\"span\", null, this.props.title));\n    }\n  }, {\n    key: \"renderDebug\",\n    value: function renderDebug() {\n      return react_1.default.createElement(\"div\", {\n        className: \"Develop-debug\"\n      }, \"Development: dev status: \", this.props.developStatus, \", channel:\", this.props.hostChannelId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react_1.default.createElement(react_1.default.Fragment, null, this.renderDev());\n    }\n  }]);\n\n  return Develop;\n}(react_1.default.Component);\n\nexports.default = Develop;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar windowChannel_1 = require(\"./windowChannel\");\n\nexports.Channel = windowChannel_1.Channel;\n\nvar GenericClient_1 = require(\"./comm/GenericClient\");\n\nexports.GenericClient = GenericClient_1.GenericClient;\nexports.AuthorizedGenericClient = GenericClient_1.AuthorizedGenericClient;\n\nvar ServiceClient_1 = require(\"./comm/ServiceClient\");\n\nexports.ServiceClient = ServiceClient_1.ServiceClient;\nexports.AuthorizedServiceClient = ServiceClient_1.AuthorizedServiceClient;\n\nvar DynamicServiceClient_1 = require(\"./comm/DynamicServiceClient\");\n\nexports.DynamicServiceClient = DynamicServiceClient_1.DynamicServiceClient;\n\nvar NarrativeJobService_1 = require(\"./coreServices/NarrativeJobService\");\n\nexports.NarrativeJobServiceClient = NarrativeJobService_1.default;\n\nvar Catalog_1 = require(\"./coreServices/Catalog\");\n\nexports.CatalogClient = Catalog_1.default;\n\nvar auth_1 = require(\"./coreServices/auth\");\n\nexports.AuthClient = auth_1.default;\n\nvar time_1 = require(\"./time\");\n\nexports.niceDuration = time_1.niceDuration;\nexports.niceElapsed = time_1.niceElapsed;\nexports.niceRelativeTime = time_1.niceRelativeTime;\n\nvar Auth_1 = require(\"./Auth\");\n\nexports.Auth = Auth_1.default;\nexports.AuthState = Auth_1.AuthState;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar store_1 = require(\"./integration/store\");\n\nvar store_2 = require(\"./auth/store\");\n\nvar store_3 = require(\"./develop/store\");\n\nvar store_4 = require(\"./root/store\");\n\nfunction makeBaseStoreState() {\n  var rootStore = store_4.makeRootStoreInitialState();\n  var appStore = store_1.makeIntegrationStoreInitialState();\n  var authStore = store_2.makeAuthStoreInitialState();\n  var developStore = store_3.makeDevelopStore();\n  return Object.assign(Object.assign(Object.assign(Object.assign({}, rootStore), appStore), authStore), developStore);\n}\n\nexports.makeBaseStoreState = makeBaseStoreState;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar antd_1 = require(\"antd\");\n\nvar ui_lib_1 = require(\"@kbase/ui-lib\");\n\nvar NiceTimeDuration =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NiceTimeDuration, _React$Component);\n\n  function NiceTimeDuration() {\n    _classCallCheck(this, NiceTimeDuration);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NiceTimeDuration).apply(this, arguments));\n  }\n\n  _createClass(NiceTimeDuration, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.showTooltip === false) {\n        return React.createElement(\"span\", null, ui_lib_1.niceDuration(this.props.duration, {}));\n      }\n\n      var fullElapsed = React.createElement(\"span\", null, ui_lib_1.niceDuration(this.props.duration, {}));\n      var tooltip;\n\n      if (this.props.tooltipPrefix) {\n        tooltip = React.createElement(\"span\", null, this.props.tooltipPrefix, fullElapsed);\n      } else {\n        tooltip = fullElapsed;\n      }\n\n      return React.createElement(antd_1.Tooltip, {\n        placement: \"bottomRight\",\n        title: tooltip\n      }, ui_lib_1.niceDuration(this.props.duration, {\n        precision: this.props.precision\n      }));\n    }\n  }]);\n\n  return NiceTimeDuration;\n}(React.Component);\n\nexports.default = NiceTimeDuration;","\"use strict\";\n\nvar _slicedToArray = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar ui_lib_1 = require(\"@kbase/ui-lib\");\n\nvar antd_1 = require(\"antd\");\n\nvar intervals = [[60 * 1000, 500], [60 * 60 * 1000, 30 * 1000], [60 * 60 * 24 * 1000, 60 * 1000 * 30], [Infinity, 60 * 60 * 24 * 1000]];\n\nvar NiceRelativeTime =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NiceRelativeTime, _React$Component);\n\n  function NiceRelativeTime(props) {\n    var _this;\n\n    _classCallCheck(this, NiceRelativeTime);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NiceRelativeTime).call(this, props));\n    _this.nowTimer = null;\n    _this.state = {\n      now: new Date()\n    };\n    _this.interval = _this.calcInterval();\n    return _this;\n  }\n\n  _createClass(NiceRelativeTime, [{\n    key: \"calcInterval\",\n    value: function calcInterval() {\n      var elapsed = this.state.now.getTime() - this.props.time.getTime();\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = intervals[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref3 = _step.value;\n\n          var _ref2 = _slicedToArray(_ref3, 2);\n\n          var upto = _ref2[0];\n          var interval = _ref2[1];\n\n          if (elapsed < upto) {\n            return interval;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      console.error('hmm again', elapsed, intervals);\n      throw new Error('did not find interval');\n    }\n  }, {\n    key: \"handleInterval\",\n    value: function handleInterval() {\n      this.setState({\n        now: new Date()\n      });\n      var interval = this.calcInterval();\n\n      if (this.interval !== interval) {\n        this.interval = interval;\n        this.startIntervalTimer();\n      }\n    }\n  }, {\n    key: \"startIntervalTimer\",\n    value: function startIntervalTimer() {\n      var _this2 = this;\n\n      if (this.nowTimer) {\n        window.clearInterval(this.nowTimer);\n      }\n\n      this.nowTimer = window.setInterval(function () {\n        _this2.handleInterval();\n      }, this.interval);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.startIntervalTimer();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.nowTimer) {\n        window.clearInterval(this.nowTimer);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.showTooltip === false) {\n        return React.createElement(\"span\", null, ui_lib_1.niceRelativeTime(this.props.time, {\n          absoluteAfter: 30,\n          now: this.state.now\n        }));\n      }\n\n      var fullDate = React.createElement(\"span\", null, Intl.DateTimeFormat('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        timeZoneName: 'short'\n      }).format(this.props.time));\n      var tooltip;\n\n      if (this.props.tooltipPrefix) {\n        tooltip = React.createElement(\"span\", null, this.props.tooltipPrefix, fullDate);\n      } else {\n        tooltip = fullDate;\n      }\n\n      return React.createElement(antd_1.Tooltip, {\n        placement: \"bottomRight\",\n        title: tooltip\n      }, React.createElement(\"span\", {\n        \"data-k-b-testhook-element\": \"label\"\n      }, ui_lib_1.niceRelativeTime(this.props.time, {\n        absoluteAfter: 30,\n        now: this.state.now\n      })));\n    }\n  }]);\n\n  return NiceRelativeTime;\n}(React.Component);\n\nexports.default = NiceRelativeTime;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar antd_1 = require(\"antd\");\n\nvar ui_lib_1 = require(\"@kbase/ui-lib\");\n\nvar SECOND = 1000;\nvar MINUTE = 60 * SECOND;\nvar HOUR = 60 * MINUTE;\nvar DAY = 24 * HOUR;\nvar CLOCK_INTERVAL_SECOND = SECOND / 4;\nvar CLOCK_INTERVAL_MINUTE = MINUTE / 4;\nvar CLOCK_INTERVAL_HOUR = HOUR / 4;\n\nvar NiceElapsedTime =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NiceElapsedTime, _React$Component);\n\n  function NiceElapsedTime(props) {\n    var _this;\n\n    _classCallCheck(this, NiceElapsedTime);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NiceElapsedTime).call(this, props));\n    _this.clockTimer = null;\n    _this.state = {\n      clockTime: Date.now()\n    };\n    return _this;\n  }\n\n  _createClass(NiceElapsedTime, [{\n    key: \"startClock\",\n    value: function startClock() {\n      var _this2 = this;\n\n      this.clockTimer = window.setInterval(function () {\n        _this2.setState({\n          clockTime: Date.now()\n        });\n      }, CLOCK_INTERVAL_SECOND);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.to && this.props.useClock) {\n        this.startClock();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.clockTimer) {\n        window.clearInterval(this.clockTimer);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var elapsed;\n\n      if (this.props.to) {\n        elapsed = this.props.to - this.props.from;\n      } else {\n        elapsed = this.state.clockTime - this.props.from;\n      }\n\n      var _ui_lib_1$niceElapsed = ui_lib_1.niceElapsed(elapsed, {}),\n          content = _ui_lib_1$niceElapsed.label;\n\n      if (this.props.showTooltip === false) {\n        return React.createElement(\"span\", null, content);\n      }\n\n      var tooltip;\n\n      if (this.props.tooltipPrefix) {\n        tooltip = React.createElement(\"span\", null, this.props.tooltipPrefix, React.createElement(\"span\", null, content));\n      } else {\n        tooltip = React.createElement(\"span\", null, content);\n      }\n\n      var _ui_lib_1$niceElapsed2 = ui_lib_1.niceElapsed(elapsed, {\n        precision: this.props.precision\n      }),\n          tooltipContent = _ui_lib_1$niceElapsed2.label,\n          value = _ui_lib_1$niceElapsed2.value;\n\n      return React.createElement(antd_1.Tooltip, {\n        placement: \"bottomRight\",\n        title: tooltip\n      }, React.createElement(\"span\", {\n        \"data-k-b-testhook-element\": \"label\"\n      }, tooltipContent));\n    }\n  }]);\n\n  return NiceElapsedTime;\n}(React.Component);\n\nexports.default = NiceElapsedTime;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar view_1 = __importDefault(require(\"./view\"));\n\nvar store_1 = require(\"../../redux/auth/store\");\n\nfunction mapStateToProps(state, props) {\n  var _state$auth = state.auth,\n      status = _state$auth.status,\n      userAuthorization = _state$auth.userAuthorization;\n  var token;\n  var isAuthorized = false;\n\n  switch (status) {\n    case store_1.AuthState.NONE:\n    case store_1.AuthState.CHECKING:\n      token = null;\n      break;\n\n    case store_1.AuthState.AUTHORIZED:\n      token = userAuthorization.token;\n      isAuthorized = true;\n      break;\n\n    case store_1.AuthState.UNAUTHORIZED:\n    case store_1.AuthState.ERROR:\n      token = null;\n      break;\n\n    default:\n      token = null;\n  }\n\n  return {\n    token: token,\n    authState: status,\n    isAuthorized: isAuthorized\n  };\n}\n\nfunction mapDispatchToProps(dispatch, ownProps) {\n  return {};\n}\n\nexports.default = react_redux_1.connect(mapStateToProps, mapDispatchToProps)(view_1.default);","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nrequire(\"./style.css\");\n\nvar antd_1 = require(\"antd\");\n\nvar AuthGate =\n/*#__PURE__*/\nfunction (_react_1$default$Comp) {\n  _inherits(AuthGate, _react_1$default$Comp);\n\n  function AuthGate(props) {\n    var _this;\n\n    _classCallCheck(this, AuthGate);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthGate).call(this, props));\n    _this.required = props.required;\n    return _this;\n  }\n\n  _createClass(AuthGate, [{\n    key: \"renderUnauthorized\",\n    value: function renderUnauthorized() {\n      var message = 'Not authorized - authentication required';\n      return react_1.default.createElement(antd_1.Alert, {\n        type: \"error\",\n        message: message,\n        style: {\n          width: '70%',\n          margin: 'auto'\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.props.isAuthorized) {\n        return this.renderUnauthorized();\n      }\n\n      return react_1.default.createElement(react_1.default.Fragment, null, this.props.children);\n    }\n  }]);\n\n  return AuthGate;\n}(react_1.default.Component);\n\nexports.default = AuthGate;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar reducers_1 = __importDefault(require(\"./integration/reducers\"));\n\nvar reducers_2 = __importDefault(require(\"./auth/reducers\"));\n\nvar reducers_3 = __importDefault(require(\"./develop/reducers\"));\n\nvar reducers_4 = __importDefault(require(\"./root/reducers\"));\n\nvar reducer = function reducer(state, action) {\n  var reducers = [reducers_4.default, reducers_1.default, reducers_2.default, reducers_3.default];\n\n  for (var _i = 0, _reducers = reducers; _i < _reducers.length; _i++) {\n    var _reducer = _reducers[_i];\n\n    var newState = _reducer(state, action);\n\n    if (newState) {\n      return newState;\n    }\n  }\n};\n\nexports.default = reducer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar store_1 = require(\"./store\");\n\nvar actions_1 = require(\"./actions\");\n\nfunction loadSuccess(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    app: {\n      status: store_1.AppState.READY,\n      config: action.config,\n      runtime: action.runtime\n    }\n  });\n}\n\nfunction setTitle(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    app: Object.assign(Object.assign({}, state.app), {\n      runtime: Object.assign(Object.assign({}, state.app.runtime), {\n        title: action.title\n      })\n    }),\n    develop: Object.assign(Object.assign({}, state.develop), {\n      title: action.title\n    })\n  });\n}\n\nfunction navigate(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    app: Object.assign(Object.assign({}, state.app), {\n      runtime: Object.assign(Object.assign({}, state.app.runtime), {\n        navigation: action.navigation\n      })\n    })\n  });\n}\n\nvar reducer = function reducer(state, action) {\n  if (!state) {\n    return state;\n  }\n\n  switch (action.type) {\n    case actions_1.ActionType.APP_LOAD_SUCCESS:\n      return loadSuccess(state, action);\n\n    case actions_1.ActionType.APP_SET_TITLE:\n      return setTitle(state, action);\n\n    case actions_1.ActionType.APP_NAVIGATE:\n      return navigate(state, action);\n\n    default:\n      return;\n  }\n};\n\nexports.default = reducer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar store_1 = require(\"./store\");\n\nvar actions_1 = require(\"./actions\");\n\nfunction authCheckStart(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    auth: {\n      status: store_1.AuthState.CHECKING,\n      message: '',\n      userAuthorization: {\n        token: '',\n        username: '',\n        realname: '',\n        roles: []\n      }\n    }\n  });\n}\n\nexports.authCheckStart = authCheckStart;\n\nfunction authCheckError(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    auth: {\n      status: store_1.AuthState.ERROR,\n      message: action.error.message,\n      userAuthorization: {\n        token: '',\n        username: '',\n        realname: '',\n        roles: []\n      }\n    }\n  });\n}\n\nexports.authCheckError = authCheckError;\n\nfunction authAuthorized(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    auth: {\n      status: store_1.AuthState.AUTHORIZED,\n      message: '',\n      userAuthorization: {\n        token: action.token,\n        username: action.username,\n        realname: action.realname,\n        roles: action.roles\n      }\n    }\n  });\n}\n\nexports.authAuthorized = authAuthorized;\n\nfunction authUnauthorized(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    auth: {\n      status: store_1.AuthState.UNAUTHORIZED,\n      message: '',\n      userAuthorization: {\n        token: '',\n        username: '',\n        realname: '',\n        roles: []\n      }\n    }\n  });\n}\n\nexports.authUnauthorized = authUnauthorized;\n\nvar reducer = function reducer(state, action) {\n  if (!state) {\n    return state;\n  }\n\n  switch (action.type) {\n    case actions_1.AuthActionType.AUTH_CHECK_START:\n      return authCheckStart(state, action);\n\n    case actions_1.AuthActionType.AUTH_AUTHORIZED:\n      return authAuthorized(state, action);\n\n    case actions_1.AuthActionType.AUTH_UNAUTHORIZED:\n      return authUnauthorized(state, action);\n\n    case actions_1.AuthActionType.AUTH_CHECK_ERROR:\n      return authCheckError(state, action);\n\n    default:\n      return;\n  }\n};\n\nexports.default = reducer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar store_1 = require(\"./store\");\n\nvar actions_1 = require(\"./actions\");\n\nfunction setTitle(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    develop: Object.assign(Object.assign({}, state.develop), {\n      title: action.title\n    })\n  });\n}\n\nfunction loadSuccess(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    root: Object.assign(Object.assign({}, state.root), {\n      hostChannelId: action.hostChannelId\n    }),\n    develop: Object.assign(Object.assign({}, state.develop), {\n      status: store_1.DevelopStatus.READY\n    })\n  });\n}\n\nfunction setView(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    app: Object.assign(Object.assign({}, state.app), {\n      runtime: Object.assign(Object.assign({}, state.app.runtime), {\n        navigation: Object.assign(Object.assign({}, state.app.runtime.navigation), {\n          view: action.view\n        })\n      })\n    }),\n    develop: Object.assign(Object.assign({}, state.develop), {\n      view: action.view\n    })\n  });\n}\n\nfunction setParams(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    app: Object.assign(Object.assign({}, state.app), {\n      runtime: Object.assign(Object.assign({}, state.app.runtime), {\n        navigation: Object.assign(Object.assign({}, state.app.runtime.navigation), {\n          params: action.params\n        })\n      })\n    }),\n    develop: Object.assign(Object.assign({}, state.develop), {\n      params: action.params\n    })\n  });\n}\n\nvar reducer = function reducer(state, action) {\n  if (!state) {\n    return state;\n  }\n\n  switch (action.type) {\n    case actions_1.DevelopActionType.DEVELOP_SET_TITLE:\n      return setTitle(state, action);\n\n    case actions_1.DevelopActionType.DEVELOP_LOAD_SUCCESS:\n      return loadSuccess(state, action);\n\n    case actions_1.DevelopActionType.DEVELOP_SET_VIEW:\n      return setView(state, action);\n\n    case actions_1.DevelopActionType.DEVELOP_SET_PARAMS:\n      return setParams(state, action);\n\n    default:\n      return;\n  }\n};\n\nexports.default = reducer;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar store_1 = require(\"./store\");\n\nvar actions_1 = require(\"../root/actions\");\n\nfunction startHostedEnvironment(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    root: Object.assign(Object.assign({}, state.root), {\n      state: store_1.RootState.HOSTED,\n      hostChannelId: action.params.channelId\n    })\n  });\n}\n\nfunction startDevelopmentEnvironment(state, action) {\n  return Object.assign(Object.assign({}, state), {\n    root: Object.assign(Object.assign({}, state.root), {\n      state: store_1.RootState.DEVELOP,\n      hostChannelId: null\n    })\n  });\n}\n\nvar reducer = function reducer(state, action) {\n  if (!state) {\n    return state;\n  }\n\n  switch (action.type) {\n    case actions_1.RootActionType.ROOT_START_HOSTED_ENVIRONMENT:\n      return startHostedEnvironment(state, action);\n\n    case actions_1.RootActionType.ROOT_START_DEVELOPMENT_ENVIRONMENT:\n      return startDevelopmentEnvironment(state, action);\n\n    default:\n      return;\n  }\n};\n\nexports.default = reducer;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/erikpearson/work/kbase/sprints/2019/q3/s4/kbase-ui-plugin-job-browser2/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar antd_1 = require(\"antd\");\n\nrequire(\"./style.css\");\n\nvar FlexTabs =\n/*#__PURE__*/\nfunction (_react_1$default$Comp) {\n  _inherits(FlexTabs, _react_1$default$Comp);\n\n  function FlexTabs(props) {\n    var _this;\n\n    _classCallCheck(this, FlexTabs);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FlexTabs).call(this, props));\n    _this.state = {\n      selectedTabIndex: 0\n    };\n    return _this;\n  }\n\n  _createClass(FlexTabs, [{\n    key: \"selectTab\",\n    value: function selectTab(tabIndex) {\n      this.setState({\n        selectedTabIndex: tabIndex\n      });\n    }\n  }, {\n    key: \"renderTabs\",\n    value: function renderTabs() {\n      var _this2 = this;\n\n      return this.props.tabs.map(function (tab, index) {\n        var classNames = ['FlexTabs-tab'];\n\n        if (index === _this2.state.selectedTabIndex) {\n          classNames.push('FlexTabs-tab-active');\n        }\n\n        return react_1.default.createElement(\"span\", {\n          key: String(index),\n          className: classNames.join(' ')\n        }, react_1.default.createElement(antd_1.Button, {\n          type: \"link\",\n          onClick: function onClick() {\n            _this2.selectTab(index);\n          }\n        }, tab.title));\n      });\n    }\n  }, {\n    key: \"renderTabBody\",\n    value: function renderTabBody() {\n      return this.props.tabs[this.state.selectedTabIndex].component;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react_1.default.createElement(\"div\", {\n        className: \"FlexTabs\"\n      }, react_1.default.createElement(\"div\", {\n        className: \"FlexTabs-header\"\n      }, this.renderTabs()), react_1.default.createElement(\"div\", {\n        className: \"FlexTabs-body\"\n      }, this.renderTabBody()));\n    }\n  }]);\n\n  return FlexTabs;\n}(react_1.default.Component);\n\nexports.default = FlexTabs;"],"sourceRoot":""}